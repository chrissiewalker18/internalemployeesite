
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!(/!=/).test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof(r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);if(brightcove==undefined){var brightcove={};}
if(brightcove.userAgent==undefined){brightcove.userAgent=navigator.userAgent;}
brightcove.createElement=function(el){if(document.createElementNS){return document.createElementNS('http://www.w3.org/1999/xhtml',el);}else{return document.createElement(el);}};brightcove.getDomainFromHost=function(pDomain){var result=pDomain.match(/[A-Za-z0-9-]+.[A-Za-z0-9-]+$/)[0];return(result.split(".")[0]!="co")?result:pDomain.match(/[A-Za-z0-9-]+.[A-Za-z0-9-]+.[A-Za-z0-9-]+$/)[0];};document.domain=brightcove.getDomainFromHost(window.location.hostname);brightcove.player={};brightcove.player.advertising={};brightcove.player.advertising.translation={};brightcove.player.advertising.ima={};brightcove.player.advertising.events={};brightcove.player.api={};brightcove.player.api.components={};brightcove.player.api.data={};brightcove.player.api.modules={};brightcove.player.api.utils={};brightcove.player.beml={};brightcove.player.content={};brightcove.player.core={};brightcove.player.data={};brightcove.player.events={};brightcove.player.html={};brightcove.player.html.video={};brightcove.player.net={};brightcove.player.reporting={};brightcove.player.services={};brightcove.player.ui={};brightcove.player.ui.beml={};brightcove.player.ui.containers={};brightcove.player.ui.controls={};brightcove.player.ui.labels={};brightcove.player.ui.media={};brightcove.player.ui.media.utils={};brightcove.player.ui.menus={};brightcove.player.ui.themes={};brightcove.player.ui.themes.components={};brightcove.player.ui.themes.icons={};brightcove.player.ui.themes.skins={};brightcove.player.utils={};(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;brightcove.player.core.Class=function(){};brightcove.player.core.Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}
function Class(){if(!initializing&&this.constructor){this.constructor.apply(this,arguments);}}
Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class;};})();brightcove.player.core.EventDispatcher=brightcove.player.core.Class.extend({constructor:function(){this.listeners={};this.enumerableProperties={};},addEventListener:function(pType,pHandler,pObject,pPriority){this.removeEventListener(pType,pHandler,pObject);if(this.listeners[pType]==undefined){this.listeners[pType]=[];}
if(pPriority==undefined){pPriority=0;}
this.listeners[pType].push({object:pObject,handler:pHandler,priority:pPriority});this.listeners[pType].sort(function(a,b){return b.priority-a.priority;});},removeEventListener:function(pType,pHandler,pObject){var listeners=this.listeners[pType];if(listeners){for(var i=listeners.length-1;i>-1;i--){if(listeners[i].object==pObject&&listeners[i].handler==pHandler){listeners.splice(i,1);return;}}}},dispatchEvent:function(pEvent){pEvent.target=this;var listeners=this.listeners[pEvent.type];if(listeners){listeners=listeners.slice().reverse();for(var i=listeners.length-1;i>-1;i--){if(listeners[i].object){listeners[i].handler.apply(listeners[i].object,[pEvent]);}else{listeners[i].handler(pEvent);}}}},dispatchMessage:function(pMessage){if(window.parent.postMessage){window.parent.postMessage(pMessage,"*");}},redispatch:function(pEvent){this.dispatchEvent(pEvent);}});brightcove.player.html.Element=brightcove.player.core.EventDispatcher.extend({constructor:function(pTag,pContext,pOptions){this._super();this.tag=pTag||"div";this.options=pOptions;if(!this.options){var css={position:"absolute"};css["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";this.options={css:css};}
this.events=this.generateEvents();this.context=pContext||document.body;this._element=$("<"+this.tag+" />",this.options);this.element=this._element[0];this.bindEventListeners();this.hidden=false;this.rotation=0;},animate:function(prop,speed,easing,callback){this._element.animate(prop,speed,easing,callback);},insert:function(){$(this.context).append(this._element);},append:function(pElement){this._element.append(pElement);},before:function(pElement){this._element.before(pElement);},after:function(){},remove:function(){return this._element.remove();},move:function(pX,pY){this.setX(pX);this.setY(pY);},setX:function(pX){if(!isNaN(Number(pX))){this._element.css("left",pX+"px");}},setY:function(pY){if(!isNaN(Number(pY))){this._element.css("top",pY+"px");}},getOffsets:function(){return this._element.offset();},getLeftOffset:function(){return this.getOffsets().left;},getTopOffset:function(){return this.getOffsets().top;},slide:function(pX,pY,pDuration){pDuration=pDuration||250;$(this._element).animate({left:pX+"px",top:pY+"px"},pDuration,"linear");},getRotation:function(){return this.rotation;},setRotation:function(pRotation){this.rotation=pRotation;this.css("-webkit-transform","rotate("+pRotation+"deg)");},setSize:function(pWidth,pHeight){if(!isNaN(Number(pHeight))){this._element.css("height",pHeight+"px");}
if(!isNaN(Number(pWidth))){this._element.css("width",pWidth+"px");}},scale:function(pWidth,pHeight,pDuration){$(this._element).animate({width:pWidth+'px',height:pHeight+'px'},pDuration,"linear");},stopAnimation:function(){this._element.stop(arguments);},setText:function(pText){this._element.text(pText);},setHtml:function(pHtmlText){if(pHtmlText==null){return false;}
if(!pHtmlText.match(/<[A-Za-z]+(>| \/>)/)){this.setText(pHtmlText);return true;}
pHtmlText="<div>"+pHtmlText+"</div>";try{var range=document.createRange();range.selectNodeContents(this.element);range.deleteContents();var nodes=new DOMParser().parseFromString(pHtmlText,'text/xml');var numNodes=nodes.firstChild.childNodes.length;var df=document.createDocumentFragment();var nChild;for(var i=0;i<numNodes;i++){var oChild=nodes.firstChild.childNodes[i];if(oChild.nodeType==Node.ELEMENT_NODE){nChild=document.createElement(oChild.tagName);for(var prop in oChild){nChild[prop]=oChild[prop];}}else{nChild=document.importNode(oChild,true);}
df.appendChild(nChild);}
this.element.appendChild(df);return true;}catch(e){}
return false;},css:function(pProperty,pValue){return this._element.css.apply(this._element,arguments);},hide:function(){this.hidden=true;this._element.hide();},show:function(){this.hidden=false;this._element.show();},bindEventListeners:function(){for(var i=0;i<this.events.length;i++){if(this[this.events[i]+"Handler"]){this._element.bind(this.events[i],$.proxy(this[this.events[i]+"Handler"],this));}}},generateEvents:function(){var events=this.elementEvents||[];return["click","mousedown","mouseup","mouseover","mouseout","touchstart","touchend","touchmove"].concat(events);}});brightcove.player.services.RemoteService=brightcove.player.core.Class.extend({constructor:function(pServicePath){this.requests=[];this.servicePath=pServicePath;},invoke:function(command,parameters,success){return this.callRemote(command,parameters,function(remoteResult){if(remoteResult.success){success(remoteResult.data);}},this);},callRemote:function(pMethod,pKeyValuePairs,pCallback,pScope){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var url=playerConfig.getItem(PlayerConfig.SERVICES_URL)+this.servicePath;url+=("/?command="+pMethod);var key=playerConfig.snippetParameters.playerKey;if(key){url+=("&playerKey="+key);}else if(!pKeyValuePairs||pKeyValuePairs.playerId==undefined){var dto=playerConfig.getItem(PlayerConfig.TEMPLATE_DATA);url+="&playerId="+dto.id;}
for(var i in pKeyValuePairs){url+=("&"+i+"="+pKeyValuePairs[i]);}
var request=new brightcove.player.services.RemoteRequest(pCallback,pScope);this.requests.push(request);request.addEventListener(brightcove.player.events.Event.COMPLETE,this.onResult,this);request.get(url);},onResult:function(pEvent){var request=pEvent.target;request.removeEventListener(brightcove.player.events.Event.COMPLETE,this.onResult,this);if(this.requests.indexOf(request)>-1){this.requests.splice(this.requests.indexOf(request),1);}}});brightcove.player.events.Event=brightcove.player.core.Class.extend({constructor:function(pType,pData){this.type=pType;this.data=pData;this.target=null;this.enumerableProperties={"data":true,"type":true};}});brightcove.player.events.Event.LOAD="load";brightcove.player.events.Event.COMPLETE="complete";brightcove.player.events.Event.ERROR="error";brightcove.player.events.Event.CHANGE="change";brightcove.player.events.Event.RESIZE="resize";brightcove.player.events.Event.MOVE="move";brightcove.player.events.Event.CLICK="click";brightcove.player.events.Event.TOGGLED_CLICK="toggledclick";brightcove.player.events.Event.SELECT="select";brightcove.player.events.Event.MOUSEDOWN="mousedown";brightcove.player.events.Event.MOUSEUP="mouseup";brightcove.player.events.Event.MOUSEMOVE="mousemove";brightcove.player.events.Event.SLIDE="slide";brightcove.player.events.Event.SCRUBBING_START="scrubbingstart";brightcove.player.events.Event.SCRUBBING_END="scrubbingend";brightcove.player.BrightcovePlayer=brightcove.player.core.EventDispatcher.extend({constructor:function(pElement,pConfig){this._super();this.element=pElement;this.config=pConfig;this.ready=false;this.initialize();},initialize:function(){this.width=window.innerWidth;this.height=window.innerHeight;this.renderBackground();experienceJSON.data.layout=experienceJSON.data.layout.replace(/>\s*</g,"><");experienceJSON.data.layout=experienceJSON.data.layout.replace("]]]]><![CDATA[>","]]>");this.createPlayer(experienceJSON.data);},onContainerReady:function(pEvent){this.container.removeEventListener(brightcove.player.events.Event.COMPLETE,this.onContainerReady,this);brightcove.loadMetrics.playerRenderTime=new Date().getTime();var contentManager=brightcove.player.content.ContentManager.getInstance();contentManager.addEventListener(brightcove.player.events.ContentEvent.LOADED,this.onContentLoaded,this);contentManager.processContent();},onContentLoaded:function(pEvent){var contentManager=brightcove.player.content.ContentManager.getInstance();contentManager.removeEventListener(brightcove.player.events.ContentEvent.LOADED,this.onContentLoaded,this);this.logLoadTimes();if(window.parent.postMessage){window.parent.postMessage(brightcove.player.events.Event.COMPLETE,"*");}
var ExperienceEvent=brightcove.player.events.ExperienceEvent;this.ready=true;this.dispatchEvent(new ExperienceEvent(ExperienceEvent.TEMPLATE_READY));},logLoadTimes:function(){var startTime=brightcove.loadMetrics.startTime;var htmlLoadTime=brightcove.loadMetrics.htmlLoadTime;var playerLoadTime=brightcove.loadMetrics.playerLoadTime;var renderTime=brightcove.loadMetrics.playerRenderTime;var contentTime=new Date().getTime();var Tracer=brightcove.player.utils.Tracer;Tracer.debug(this,"Time to load primary player HTML: "+(htmlLoadTime-startTime)+"ms.",Tracer.TYPE_DEBUG);Tracer.debug(this,"Time to load primary player JS: "+(playerLoadTime-htmlLoadTime)+"ms.",Tracer.TYPE_DEBUG);Tracer.debug(this,"Time to load secondary player assets: "+(renderTime-playerLoadTime)+"ms.",Tracer.TYPE_DEBUG);Tracer.debug(this,"Time to retrieve content: "+(contentTime-renderTime)+"ms.",Tracer.TYPE_DEBUG);Tracer.debug(this,"Complete time to render: "+(contentTime-startTime)+"ms.",Tracer.TYPE_DEBUG);brightcove.player.reporting.Reporter.sendReport(brightcove.player.reporting.Goku.DATA_LOAD,null,[{name:"time",value:renderTime-startTime}]);},createPlayer:function(pData){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();playerConfig.setItem(PlayerConfig.PLAYER,this);playerConfig.setItem(PlayerConfig.TEMPLATE_DATA,pData);playerConfig.setItem(PlayerConfig.EMBED_PARAMS,this.config);if(this.configureApplication(pData)){var playerContext=brightcove.player.PlayerContext.getInstance();playerContext.setPlayerInitialized(true);this.loadLabels();this.theme.load();this.loadPlugins();}else{this.showError();}
brightcove.player.reporting.Reporter.sendReport(brightcove.player.reporting.Goku.PLAYER_LOAD);},loadPlugins:function(){var pluginManager=brightcove.player.api.PluginManager.getInstance();pluginManager.addEventListener(brightcove.player.events.Event.COMPLETE,this.onPluginsLoaded,this);pluginManager.loadPlugins();},onPluginsLoaded:function(){brightcove.player.api.PluginManager.getInstance().removeEventListener(brightcove.player.events.Event.COMPLETE,this.onPluginsLoaded,this);this.checkLoadState();},checkLoadState:function(){if(brightcove.player.api.PluginManager.getInstance().pluginManagerReady&&brightcove.player.ui.labels.LabelManager.getInstance().ready&&this.theme.ready){this.renderUI();}},loadLabels:function(){var labelManager=brightcove.player.ui.labels.LabelManager.getInstance();labelManager.addEventListener(brightcove.player.events.Event.COMPLETE,this.onLabelsReady,this);labelManager.loadLabels(this.config.labels,this.config.language);},onLabelsReady:function(){brightcove.player.ui.labels.LabelManager.getInstance().removeEventListener(brightcove.player.events.Event.COMPLETE,this.onLabelsReady,this);this.checkLoadState();},onThemeLoad:function(pEvent){var PlayerConfig=brightcove.player.PlayerConfig;var ThemeManager=brightcove.player.ui.themes.ThemeManager;var themeManager=ThemeManager.getInstance();var theme=themeManager.getThemeFromSetReference(ThemeManager.DEFAULT_THEME);var styles=PlayerConfig.getInstance().getItem(PlayerConfig.STYLES);if(styles!=null){var css=styles[ThemeManager.DEFAULT_THEME];if(css!=null){brightcove.player.ui.themes.StyleUtil.assignCSS(theme,css);}}},onThemeComplete:function(pEvent){this.theme.removeEventListener(brightcove.player.events.ThemeEvent.THEME_LOADED,this.onThemeLoad,this);this.theme.removeEventListener(brightcove.player.events.ThemeEvent.THEME_COMPLETE,this.onThemeComplete,this);this.checkLoadState();},renderUI:function(){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();this.container=new brightcove.player.ui.beml.BEMLContainer();this.container.addEventListener(brightcove.player.events.Event.COMPLETE,this.onContainerReady,this);this.container.definition=this.layout;this.container.topLevel=true;this.container.configuredProperties=playerConfig.configuredProperties;this.container.globalStyles=playerConfig.getItem(PlayerConfig.STYLES);this.container.initialize("container");this.setSize(this.width,this.height);this.stage.addChild(this.container);delete this.layout;},configureApplication:function(pData){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();playerConfig.snippetParameters=this.config;playerConfig.setItem(PlayerConfig.PAGE_URL,document.referrer);var configuredProps=pData.configuredProperties;var application=configuredProps[PlayerConfig.APPLICATION];if(playerConfig.snippetParameters.includeAPI==="true"){if(pData.layout.match(new RegExp("<VideoDisplay "))&&!pData.layout.match(new RegExp("<MediaControls "))){pData.layout=pData.layout.replace("<VideoDisplay ","<BEMLVideoDisplay ");}}
var beml=new DOMParser().parseFromString(pData.layout,"text/xml").documentElement;var children=beml.childNodes;var layout;var theme;var labels;var plugins;var Tags=brightcove.player.beml.Tags;for(var i in children){switch(children[i].tagName){case Tags.THEME:theme=children[i];break;case Tags.LAYOUT:layout=children[i];break;case Tags.LABELS:labels=children[i];break;case Tags.MODULES:plugins=children[i];break;}}
if(layout==null){return false;}
for(i in application){layout.setAttribute(i,application[i]);}
this.layout=layout;this.configureTheme(application,theme);if(labels!=null){application["labels"]=labels;}
var param,id;for(i in this.config){if(unescape(i).charAt(0)=="@"&&i.indexOf(".style.")>-1){param=unescape(i).split(".style.");id=param[0].substr(1);if(configuredProps[id]==null)configuredProps[id]={};if(configuredProps[id].style==null)configuredProps[id].style="";configuredProps[id].style+=(param[1]+":"+this.config[i]+";");}}
playerConfig.configuredProperties=configuredProps;brightcove.player.api.PluginManager.getInstance().addPlugins(plugins);playerConfig.setItem(PlayerConfig.API_MANAGER,new brightcove.player.api.APIManager());return true;},configureTheme:function(pApplication,pTheme){var Attributes=brightcove.player.beml.Attributes;var ThemeManager=brightcove.player.ui.themes.ThemeManager;var styleName;if(pApplication.hasOwnProperty(Attributes.STYLE_FILE)){styleName=pApplication[Attributes.STYLE_FILE];}
if(pTheme!=null){if(!pApplication.hasOwnProperty(Attributes.THEME)){pApplication[Attributes.THEME]=pTheme.getAttribute(Attributes.THEME_NAME)||ThemeManager.DEFAULT_THEME_NAME;var acceptedThemes=["Deluxe","Flat","Minimal"];if(acceptedThemes.indexOf(pApplication[Attributes.THEME])<0){pApplication[Attributes.THEME]=ThemeManager.DEFAULT_THEME_NAME;}}
if(styleName==null){styleName=pApplication[Attributes.STYLE]=pTheme.getAttribute(Attributes.STYLE)||ThemeManager.DEFAULT_STYLE_NAME;}
var playerStyles={};var styles=pTheme.childNodes;var numStyles=styles.length;var style;for(var i=0;i<numStyles;i++){style=styles[i];if(style.getAttribute(Attributes.STYLES_ID)){playerStyles[style.getAttribute(Attributes.STYLES_ID)]=style.childNodes[0].nodeValue;}
if(style.getAttribute(Attributes.STYLES_CLASS)){playerStyles[style.getAttribute(Attributes.STYLES_CLASS)]=style.childNodes[0].nodeValue;}}
var PlayerConfig=brightcove.player.PlayerConfig;PlayerConfig.getInstance().setItem(PlayerConfig.STYLES,playerStyles);if(styleName.substr(-4).toLowerCase()!=".css"){styleName="_"+styleName;}else{styleName=styleName.replace("{id}",PlayerConfig.APPLICATION);styleName=styleName.replace("{class}","Application");}}else{pApplication[Attributes.THEME]=ThemeManager.DEFAULT_THEME_NAME;if(styleName==null){styleName="_"+ThemeManager.DEFAULT_STYLE_NAME;pApplication[Attributes.STYLE]=ThemeManager.DEFAULT_STYLE_NAME;}else{styleName="_"+styleName;}}
var themeManager=ThemeManager.getInstance();this.theme=themeManager.getTheme(ThemeManager.DEFAULT_THEME,brightcove.player.ui.themes.PlayerTheme,ThemeManager.DEFAULT_THEME,styleName);this.theme.addEventListener(brightcove.player.events.ThemeEvent.THEME_LOADED,this.onThemeLoad,this);this.theme.addEventListener(brightcove.player.events.ThemeEvent.THEME_COMPLETE,this.onThemeComplete,this);},showError:function(){},renderBackground:function(){this.stage=new brightcove.player.core.Sprite();this.stage.setSize(this.width,this.height);this.stage.initialize("stage");this.element.appendChild(this.stage.element);if(this.config.bgcolor){this.stage.css("background",this.config.bgcolor);}},setSize:function(pWidth,pHeight){this.width=pWidth;this.height=pHeight;this.stage.setSize(pWidth,pHeight);if(this.container){this.container.setSizeAttributes("*","*");this.container.setSize(pWidth,pHeight);this.getLayoutRoot().setAttribute("width",String(pWidth));this.getLayoutRoot().setAttribute("height",String(pHeight));}},resize:function(pWidth,pHeight){this.width=pWidth;this.height=pHeight;this.stage.setSize(pWidth,pHeight);this.container.resize(pWidth,pHeight);},getLayoutRoot:function(){return this.container.getLayoutRoot();},getElement:function(pID){return this.container.getElement(pID);},setVideoPlayer:function(pPlayer){this.videoPlayer=pPlayer;var ExperienceEvent=brightcove.player.events.ExperienceEvent;this.dispatchEvent(new ExperienceEvent(ExperienceEvent.VIDEO_PLAYER_SET));}});(function(window,undefined){var extend=$.extend;brightcove.player.PlayerConfig=brightcove.player.core.Class.extend({constructor:function(){this.configuredProperties={};this.snippetParameters={};this.map=extend({},_environment);},getItem:function(pKey){return this.map[pKey];},setItem:function(pKey,pValue){this.map[pKey]=pValue;},getPropertiesForID:function(pKey){return this.configuredProperties[pKey]||{};}});brightcove.player.PlayerConfig.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.PlayerConfig();}
return this.instance;};brightcove.player.PlayerConfig.CDN="cdn";brightcove.player.PlayerConfig.UNVERSIONED_CDN="unversionedCdn";brightcove.player.PlayerConfig.SERVICES_URL="servicesURL";brightcove.player.PlayerConfig.APPLICATION="application";brightcove.player.PlayerConfig.PLAYER="player";brightcove.player.PlayerConfig.VIDEO_PLAYER="videoPlayer";brightcove.player.PlayerConfig.TEMPLATE_DATA="templateData";brightcove.player.PlayerConfig.PLAYER_DIRECTORY="playerDirectory";brightcove.player.PlayerConfig.STYLES="styles";brightcove.player.PlayerConfig.ASSETS="assets";brightcove.player.PlayerConfig.AUTOSTART="autoStart";brightcove.player.PlayerConfig.GOKU_URL="gokuURL";brightcove.player.PlayerConfig.METRICS_URL="metricsURL";brightcove.player.PlayerConfig.PAGE_URL="pageURL";brightcove.player.PlayerConfig.REFERRER_URL="refURL";brightcove.player.PlayerConfig.PLAYER_TAG="playerTag";brightcove.player.PlayerConfig.API_MANAGER="apiManager";brightcove.player.PlayerConfig.SHOW_NO_CONTENT_MESSAGE="showNoContentMessage";brightcove.player.PlayerConfig.TM_URL="tmURL";brightcove.player.PlayerConfig.TM_PLAYER_ID="tmPlayerId";brightcove.player.PlayerConfig.TM_BOOTLOADER_ID="tmBootloaderId";brightcove.player.PlayerConfig.AD_POLICY="adPolicy";brightcove.player.PlayerConfig.AD_MANAGER="adManager";brightcove.player.PlayerConfig.EMBED_PARAMS="embedParams";brightcove.player.PlayerConfig.PRIVACY_MODE="privacyMode";brightcove.player.PlayerConfig.DEFAULT_BITRATE="htmlDefaultBitrate";brightcove.player.PlayerConfig.SECUREHTML="secureHTMLConnections";brightcove.player.PlayerConfig.LINKSRC="linkSrc";})(window);brightcove.player.PlayerContext=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();this.playerInitialized=false;this.adPlaying=false;this.adPaused=false;this.adType;this.captionsEnabled=false;},setAdPlaying:function(pState){var changed=pState!=this.adPlaying;if(changed){this.adPlaying=pState;if(!pState){this.adPaused=false;}
this.dispatchChange("adPlaying");}},setAdPaused:function(pState){var changed=pState!=this.adPaused;if(changed){this.adPaused=pState;this.dispatchChange("adPaused");}},setPlayerInitialized:function(pState){var changed=pState!=this.playerInitialized;if(changed){this.playerInitialized=pState;this.dispatchChange("playerInitialized");}},setCaptionsEnabled:function(pState){var changed=pState!=this.captionsEnabled;if(changed){this.captionsEnabled=pState;this.dispatchChange("captionsEnabled");}},dispatchChange:function(pProperty){this.dispatchEvent(new brightcove.player.events.PropertyChangeEvent(brightcove.player.events.PropertyChangeEvent.CHANGE,pProperty));}});brightcove.player.PlayerContext.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.PlayerContext();}
return this.instance;};(function(undefined){var noop=$.noop,respondToModuleMessage=function(message){var module=brightcove.player.api.APIManager.modules[message.module],method,type,handler,addListener,priority;if(!module){return;}
method=module[message.method];if(!method){return;}
if(message.method.indexOf("EventListener")>-1){type=message.params[0];handler=message.params[1];addListener=message.method=="addEventListener";if(addListener){priority=0;if(message.params.length>2&&!isNaN(message.params[2])){priority=message.params[2];}
module.addEventListener(type,brightcove.player.api.APIManager.getHandler(type,handler,true),null,priority);}else{module.removeEventListener(type,brightcove.player.api.APIManager.getHandler(type,handler,false));}}else{method.apply(module,message.params);}},respondToObjectMessage=function(message){var module=brightcove.player.api.APIManager.modules[message.object];if(!module){return;}
var method=module[message.method],success=function(result){var response={handler:message.callback,data:result},messageBroker=brightcove.player.api.MessageBroker.getInstance();messageBroker.sendMessage(response,messageBroker.Types.ASYNC_GETTER);},callback=function(result){success(result);success=noop;},args=message.arguments,result;args.push(callback);result=method.apply(module,args);if(result!==undefined&&result!==null){callback(result);}},parse=window.JSON?window.JSON.parse:brightcove.json_parse;brightcove.player.api.APIManager=brightcove.player.core.Class.extend({constructor:function(){this.messageBroker=brightcove.player.api.MessageBroker.getInstance();this.instantiateModules();window.addEventListener("message",this.respondToMessages,false);var PlayerConfig=brightcove.player.PlayerConfig;var application=PlayerConfig.getInstance().getPropertiesForID("application");var enableAPI=(application.enableAPI=="true");var url=window.location.href;url=url.substr(0,url.indexOf("/",10));this.sendMessage("initializeBridge",[enableAPI,url]);},instantiateModules:function(){var APIManager=brightcove.player.api.APIManager;APIManager.modules={};var moduleClasses=brightcove.player.api.APIManager.moduleClasses;for(var key in moduleClasses){APIManager.modules[key]=new moduleClasses[key]();}},sendMessage:function(pMethod,pArguments){this.messageBroker.sendMessage(new brightcove.player.api.APIMessage(pMethod,pArguments),this.messageBroker.Types.API);},respondToMessages:function(event){var message;try{message=parse(event.data);}catch(e){return;}
if(message.module){respondToModuleMessage(message);}else{respondToObjectMessage(message);}},getModule:function(pName){return brightcove.player.api.APIManager.modules[pName];}});brightcove.player.api.APIManager.handlers={};brightcove.player.api.APIManager.moduleClasses={};brightcove.player.api.APIManager.getHandler=function(pType,pHandlerName,pCreate){if(this.handlers[pType]==undefined){this.handlers[pType]={};}
var handler=this.handlers[pType][pHandlerName];if(handler==null&&pCreate){var messageBroker=brightcove.player.api.MessageBroker.getInstance();handler=function(pEvent){var message={handler:pHandlerName,event:pEvent};messageBroker.sendMessage(message,messageBroker.Types.HANDLER);};this.handlers[pType][pHandlerName]=handler;}
return handler;};brightcove.player.api.APIManager.registerModuleClass=function(pName,pClass){brightcove.player.api.APIManager.moduleClasses[pName]=pClass;};if(brightcove.api==undefined){brightcove.api={};}
brightcove.api.events=brightcove.player.events;brightcove.api.modules=brightcove.player.api.modules;brightcove.api.registerBlockingPlugin=function(pPluginName){return brightcove.player.api.PluginManager.getInstance().registerBlockingPlugin(pPluginName);};brightcove.api.getExperience=function(){var PlayerConfig=brightcove.player.PlayerConfig;return PlayerConfig.getInstance().getItem(PlayerConfig.API_MANAGER);};})();brightcove.player.api.APIMessage=brightcove.player.core.Class.extend({constructor:function(pMethod,pArguments){this.method=pMethod;this.arguments=pArguments;}});brightcove.player.api.ErrorBroker=brightcove.player.core.Class.extend({constructor:function(){this.messageBroker=brightcove.player.api.MessageBroker.getInstance();},sendError:function(pErrorEvent){return this.messageBroker.sendMessage(pErrorEvent,this.messageBroker.Types.ERROR);}});brightcove.player.api.ErrorBroker.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.api.ErrorBroker();}
return this.instance;};brightcove.player.api.MessageBroker=brightcove.player.core.Class.extend({constructor:function(){var self=this,sendMessage=this.sendMessage,PlayerConfig=brightcove.player.PlayerConfig,toSend,queueSendMessage,flushSendMessage,filteredStringify;this._super();this.NAMESPACE="brightcove.player";queueSendMessage=function(pObject,pType){toSend.push([pObject,pType]);};flushSendMessage=function(self,sendMessage){var i;for(i in toSend){sendMessage.apply(self,toSend[i]);}};filteredStringify=function(pObject){return window.JSON.stringify(pObject,function(key,value){if(key===''){return value;}
if(this[key]instanceof Date){value=this[key].getTime();}
if(!this.enumerableProperties){return value;}
return this.enumerableProperties[key]?value:undefined;});};if(window.JSON){this.stringify=filteredStringify;}else{toSend=[];this.sendMessage=queueSendMessage;$.getScript(PlayerConfig.getInstance().getItem(PlayerConfig.PLAYER_DIRECTORY)+"/json2.min.js",function(){self.stringify=filteredStringify;self.sendMessage=sendMessage;flushSendMessage(self,sendMessage);});}},postMessage:function(pMessage){if(window.parent.postMessage){window.parent.postMessage(pMessage,"*");return true;}
return false;},sendMessage:function(pObject,pType){var jsonObject=this.prepareObject(pObject);var messageString=this.namespaceObject(jsonObject,pType);return this.postMessage(messageString);},prepareObject:function(pObject){pObject.id=brightcove.player.PlayerConfig.getInstance().snippetParameters.flashID;pObject.__srcUrl=window.location.href;return this.stringify(pObject);},namespaceObject:function(pJsonObject,pType){return this.NAMESPACE+"::"+pType+"::"+pJsonObject;},Types:{ERROR:"error",API:"api",HANDLER:"handler",ASYNC_GETTER:"asyncGetter"}});brightcove.player.api.MessageBroker.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.api.MessageBroker();}
return this.instance;};(function(){var
timedOut=false,blocking={},blockingPluginCount=0,pluginsLoadedStatus=false,blockingLength=function(){var
count=0,p;for(p in blocking){count++;}
return count;};brightcove.player.api.PluginManager=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();this.plugins=[];this.pluginManagerReady=false;},addPlugin:function(pURL){if(brightcove.player.utils.URLUtil.getExtension(pURL)=="js"){this.plugins.push(pURL);}},loadPlugins:function(){var deferred;if(blockingPluginCount>0){this.timeout=setTimeout($.proxy(this.handleTimeout,this),brightcove.player.api.PluginManager.BLOCKING_PLUGIN_TIMEOUT*1000);}
if(this.plugins.length>0){deferred=jQuery.ajax({url:this.plugins[0],dataType:'script',cache:true});jQuery.each(this.plugins.slice(1),function(_,url){deferred=deferred.pipe(function(){return jQuery.ajax({url:url,dataType:'script',cache:true});},function(){console.log("Failed to load plugin from "+url);});});deferred.done(function(){pluginsLoadedStatus=true;if(blockingLength()==0&&blockingPluginCount==0){brightcove.player.api.PluginManager.getInstance().handleCompletion();}}());}else{this.handleCompletion();}},addPlugins:function(pPlugins){var plugin,plugins,totalPlugins,files,totalFiles,paramString,i;if(pPlugins!=null){plugins=pPlugins.getElementsByTagName("Module");totalPlugins=plugins.length;for(i=0;i<totalPlugins;i++){plugin=plugins[i];if(plugin.getAttribute(brightcove.player.api.PluginManager.BLOCKING)){blockingPluginCount++;}
this.addPlugin(plugin.getAttribute(brightcove.player.api.PluginManager.FILE));}}
plugins=brightcove.player.PlayerConfig.getInstance().getPropertiesForID("plugins");if(plugins!=null&&plugins.list){files=plugins.list.split(" ");totalFiles=files.length;for(i=0;i<totalFiles;i++){paramsString=files[i].substr(files[i].indexOf("?"));if(paramsString.search(/[?\&](blocking=true)/)!=-1){blockingPluginCount++;}
this.addPlugin(files[i]);}}},handleTimeout:function(){var
Tracer=brightcove.player.utils.Tracer,tracerMessage=blockingPluginCount+" blocking plugins did not finish loading before the "+
brightcove.player.api.PluginManager.BLOCKING_PLUGIN_TIMEOUT+" second timeout.  The player "+"will not wait any longer for the blocking plugins to load.",unfinishedBlockingPlugin,blockingNames;for(unfinishedBlockingPlugin in blocking){blockingNames=tracerMessage+unfinishedBlockingPlugin+"("+blocking[unfinishedBlockingPlugin]+")";}
if(blockingNames){tracerMessage+=" Names, if known, for the blocking plugins that did not finish loading: "+blockingNames;}
Tracer.error(this,tracerMessage,Tracer.TYPE_LOADING);timedOut=true;this.handleCompletion();},handleCompletion:function(){if(this.timeout){clearTimeout(this.timeout);}
this.pluginManagerReady=true;var Event=brightcove.player.events.Event;this.dispatchEvent(new Event(Event.COMPLETE));},registerBlockingPlugin:function(pPluginName){blockingPluginCount--;if(!pPluginName){pPluginName="default";}
if(blocking[pPluginName]){blocking[pPluginName]=++blocking[pPluginName];}else{blocking[pPluginName]=1;}
return function(pPluginName){blocking[pPluginName]--;if(blocking[pPluginName]==0){delete blocking[pPluginName];}
if(blockingLength()==0&&pluginsLoadedStatus){brightcove.player.api.PluginManager.getInstance().handleCompletion();}
return timedOut;};}});brightcove.player.api.PluginManager.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.api.PluginManager();}
return this.instance;};brightcove.player.api.PluginManager.BLOCKING_PLUGIN_TIMEOUT=3;brightcove.player.api.PluginManager.BLOCKING="blocking";brightcove.player.api.PluginManager.FILE="file";}());(function(){var updateDateInMediaDTO=function(pMediaDTO){if(pMediaDTO.publishedDate){pMediaDTO.publishedDate=new Date(parseInt(pMediaDTO.publishedDate,10));}
if(pMediaDTO.startDate){pMediaDTO.startDate=new Date(parseInt(pMediaDTO.startDate.date,10));}
if(pMediaDTO.endDate){pMediaDTO.endDate=new Date(parseInt(pMediaDTO.endDate.date,10));}},extend=$.extend,noop=$.noop,ContentEvent=brightcove.player.events.ContentEvent;brightcove.player.content.ContentManager=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();this.programming={};this.contentAreas={};this.dataCache=new brightcove.player.content.DataCache();this.playerFacade=brightcove.player.services.PlayerMediaFacade.getInstance();this.experienceFacade=brightcove.player.services.ExperienceRuntimeFacade.getInstance();this.isPlaylist=false;this.automaticAdvance=false;this.isContentLoaded=false;ContentEvent=brightcove.player.events.ContentEvent;MediaEvent=brightcove.player.events.MediaEvent;},createDummyCollectionFromMediaItem:function(pMedia){var dummyID=-1;var collection=this.dataCache.getMediaCollectionBy("id",dummyID,0,1000,false,true);if(collection==null){collection={};collection.id=dummyID;collection.mediaDTOs=[];collection.recordsPerPage=0;collection.currentPageIndex=0;}else{this.dataCache.remove(dummyID);}
var mediaItems=collection.mediaDTOs;var numMediaItems=mediaItems.length;var id=pMedia.id;for(var i=0;i<numMediaItems;i++){if(mediaItems[i].id==id){mediaItems.splice(i,1);break;}}
updateDateInMediaDTO(pMedia);mediaItems.push(pMedia);collection.videoDTOs=collection.mediaDTOs;return collection;},createOverride:function(pHasProgramming){var ContentType=brightcove.player.content.ContentType;var params=brightcove.player.PlayerConfig.getInstance().snippetParameters;var override;for(var i in this.contentAreas){if(params["@"+i]!=undefined){if(this.contentAreas[i].contentType!=ContentType.MEDIA){override={key:i,value:params["@"+i]};if(this.contentAreas[i].contentType==ContentType.PLAYLIST_COLLECTION){if(params["@"+i+".featured"]!=undefined){override.featured=params["@"+i+".featured"];}else if(params.lineupID!=undefined){override.featured=params.lineupID;}}
return override;}}else if(pHasProgramming&&(params["@"+i+".featured"]!=undefined||params.lineupID!=undefined)&&this.contentAreas[i].contentType==ContentType.PLAYLIST_COLLECTION){override={key:i,value:""};if(params["@"+i+".featured"]!=undefined){override.featured=params["@"+i+".featured"];}else if(params.lineupID!=undefined){override.featured=params.lineupID;}
return override;}else if(this.contentAreas[i].contentType==ContentType.MEDIA_COLLECTION){if(params.lineupID!=undefined){return{key:i,value:params.lineupID};}}}
return null;},processContent:function(){var PlayerConfig=brightcove.player.PlayerConfig;var templateData=PlayerConfig.getInstance().getItem(PlayerConfig.TEMPLATE_DATA);var application=PlayerConfig.getInstance().getPropertiesForID("application");var programmedContent=templateData.programmedContent;if(programmedContent==null){var override=this.createOverride(templateData.hasProgramming);if(override){this.experienceFacade.getProgrammingWithOverrides(override,this.onContentLoad,this);return;}else if(templateData.hasProgramming){this.experienceFacade.getProgrammingForExperience(this.onContentLoad,this);return;}else{this.dispatchNoContentEvent();}}else if(programmedContent!=null){for(var i in programmedContent){var media=programmedContent[i].mediaDTO;if(media&&application.hasOwnProperty("tveSettings")&&application.tveSettings!=null){media.FLVFullLengthURL="UNAUTHORIZED";}
if(!brightcove.player.content.ContentUtil.isInvalidMediaItem(media)){this.dataCache.add(this.createDummyCollectionFromMediaItem(media));this.programming[i]=media;}else if(!brightcove.player.content.ContentUtil.isContentFullLengthURLAvailable(media)){this.dispatchContentNotSupportedEvent();}else{this.dispatchNoContentEvent();}}}
this.disseminateContent();},disseminateContent:function(){this.isContentLoaded=true;var Event=brightcove.player.events.Event;for(var i in this.contentAreas){this.contentAreas[i].onContentLoaded(new Event(Event.CHANGE,this.programming[i]));}
this.dispatchLoadedEvent();},initializeMediaCollection:function(pCollectionDTO){var existingCollectionDTO=this.getMediaCollectionByID(pCollectionDTO.id),i;if(existingCollectionDTO){return existingCollectionDTO;}else{if(pCollectionDTO){pCollectionDTO.mediaDTOs=pCollectionDTO.videoDTOs;pCollectionDTO.mediaIds=pCollectionDTO.videoIds;for(i in pCollectionDTO.mediaDTOs){updateDateInMediaDTO(pCollectionDTO.mediaDTOs[i]);}}
var ContentUtil=brightcove.player.content.ContentUtil;ContentUtil.filterOutInvalidInMediaCollection(pCollectionDTO,true);ContentUtil.setLineupIDsIntoMediaCollection(pCollectionDTO);this.dataCache.add(pCollectionDTO);return pCollectionDTO;}},setAutomaticAdvance:function(pAutomaticAdvance){this.automaticAdvance=pAutomaticAdvance;},getAutomaticAdvance:function(){return this.automaticAdvance;},getMediaBy:function(pProp,pValue){return this.dataCache.getMediaBy(pProp,pValue);},getMediaByID:function(pID){return this.getMediaBy("id",pID);},getMediaByReferenceID:function(pRefID){return this.getMediaBy("referenceId",pRefID);},getMediaCollectionByID:function(pID,pPage,pRecordsPerPage,pApplyFilters,pReturnIncomplete){if(pPage==undefined){pPage=0;}
if(pRecordsPerPage==undefined){pRecordsPerPage=50;}
if(pApplyFilters==undefined){pApplyFilters=true;}
return this.dataCache.getMediaCollectionBy("id",pID,pPage,pRecordsPerPage,pApplyFilters,pReturnIncomplete);},getMediaCollectionByReferenceID:function(refId,page,recordsPerPage,callback){var result;page=page||0;recordsPerPage=recordsPerPage||50;result=this.dataCache.getMediaCollectionBy("referenceId",refId,page,recordsPerPage,true);(callback||noop)(result);return result;},onContentLoad:function(pResult){var noContent=true;if(pResult.success){var programming=pResult.data;var playlist;var playlists;var numPlaylists;var collection;var j;for(var i in programming){playlist=programming[i].mediaCollectionDTO;if(playlist){playlist=this.initializeMediaCollection(playlist);this.programming[i]=playlist;noContent=false;}else{collection=programming[i].lineupListDTO;if(collection){playlists=collection.playlistDTOs;numPlaylists=playlists.length;for(j=0;j<numPlaylists;j++){playlists[i]=this.initializeMediaCollection(playlists[j]);}
this.programming[i]=collection;noContent=playlists.length<1;}}}}
if((playlist&&playlist.videoCount>1)||(playlists&&playlists.length>0)){this.isPlaylist=true;}
this.disseminateContent();if(noContent){this.dispatchNoContentEvent();}},getIsPlaylist:function(){return this.isPlaylist;},onMediaLoadByID:function(pResponse){this.handleMediaLoad(ContentEvent.MEDIA_LOAD_BY_ID,pResponse);},onMediaLoadByRef:function(pResponse){this.handleMediaLoad(ContentEvent.MEDIA_LOAD_BY_REF,pResponse);},handleMediaLoad:function(pEvent,pResponse){var media;var PlayerConfig=brightcove.player.PlayerConfig;var application=PlayerConfig.getInstance().getPropertiesForID("application");if(pResponse.success){media=pResponse.data;if(application.hasOwnProperty("tveSettings")&&application.tveSettings!=null&&!media.FLVFullLengthURL){media.FLVFullLengthURL="UNAUTHORIZED";}
if(brightcove.player.content.ContentUtil.isInvalidMediaItem(media)){media=null;}else{this.dataCache.add(this.createDummyCollectionFromMediaItem(media));}}
var ContentEvent=brightcove.player.events.ContentEvent;this.dispatchEvent(new ContentEvent(pEvent,media));},dispatchNoContentEvent:function(){var ContentEvent=brightcove.player.events.ContentEvent;this.dispatchEvent(new ContentEvent(ContentEvent.NO_CONTENT));},dispatchContentNotSupportedEvent:function(){var ContentEvent=brightcove.player.events.ContentEvent;this.dispatchEvent(new ContentEvent(ContentEvent.CONTENT_NOT_SUPPORTED));},dispatchLoadedEvent:function(){var ContentEvent=brightcove.player.events.ContentEvent;this.dispatchEvent(new ContentEvent(ContentEvent.LOADED));},getViewerExperienceDTO:function(){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();return playerConfig.getItem(PlayerConfig.TEMPLATE_DATA);},getPubID:function(){return this.getViewerExperienceDTO().publisherId;},fetchMediaByID:function(pID){return this.fetchMediaByIDWithCallback(pID,noop);},fetchMediaByIDWithCallback:function(id,callback){var media=this.getMediaByID(id),manager=this;if(media==null){this.playerFacade.findMediaByID(id,this.getPubID(),function(remoteResult){manager.handleMediaLoad(ContentEvent.MEDIA_LOAD_BY_ID,remoteResult);if(!brightcove.player.content.ContentUtil.isInvalidMediaItem(remoteResult.data)){callback(remoteResult.data);}else{manager.dispatchEvent(new brightcove.player.events.MediaEvent(brightcove.player.events.MediaEvent.ERROR));callback(null);}},this);}else if(!brightcove.player.content.ContentUtil.isInvalidMediaItem(media)){callback(media);}else{this.dispatchEvent(new MediaEvent(MediaEvent.ERROR));callback(null);}},fetchMediaByIDWithTVEToken:function(pID,pTVEToken){return this.fetchMediaByIDWithCallbackAndTVEToken(pID,pTVEToken,noop);},fetchMediaByIDWithCallbackAndTVEToken:function(id,tvetoken,callback){var media=this.getMediaByID(id),manager=this,token=encodeURIComponent(tvetoken);this.playerFacade.findMediaByIDWithTVEToken(token,id,this.getPubID(),function(remoteResult){manager.handleMediaLoad(ContentEvent.MEDIA_LOAD_BY_ID,remoteResult);if(!brightcove.player.content.ContentUtil.isInvalidMediaItem(remoteResult.data)){callback(remoteResult.data);}else{manager.dispatchEvent(new brightcove.player.events.MediaEvent(brightcove.player.events.MediaEvent.ERROR));callback(null);}},this);},fetchMediaByReferenceID:function(refId){return this.fetchMediaByReferenceIDWithCallback(refId,noop);},fetchMediaByReferenceIDWithCallback:function(refId,callback){var media=this.getMediaByReferenceID(refId),manager=this;if(media==null){this.playerFacade.findMediaByReferenceId(refId,this.getPubID(),function(remoteResult){manager.handleMediaLoad(ContentEvent.MEDIA_LOAD_BY_REF,remoteResult);if(!brightcove.player.content.ContentUtil.isInvalidMediaItem(remoteResult.data)){callback(remoteResult.data);}else{manager.dispatchEvent(new brightcove.player.events.MediaEvent(brightcove.player.events.MediaEvent.ERROR));callback(null);}},this);}else if(!brightcove.player.content.ContentUtil.isInvalidMediaItem(media)){callback(media);}else{this.dispatchEvent(new MediaEvent(MediaEvent.ERROR));callback(null);}},fetchPlaylistByIDWithCallback:function(id,callback,page,recordsPerPage){var self=this;this.playerFacade.findPlaylistByID(id,this.getPubID(),function(result){self.initializeMediaCollection(result);callback(result);},page,recordsPerPage);},fetchPlaylistByReferenceIDWithCallback:function(refID,callback,page,recordsPerPage){var self=this;this.playerFacade.findPlaylistByReferenceID(refID,this.getPubID(),function(result){self.initializeMediaCollection(result);callback(result);},page,recordsPerPage);},register:function(pContentArea){var PlayerConfig=brightcove.player.PlayerConfig;var templateData=PlayerConfig.getInstance().getItem(PlayerConfig.TEMPLATE_DATA);var id=pContentArea.getID();if(templateData.programmingComponents.indexOf(id)>-1&&this.contentAreas[id]==null){this.contentAreas[id]=pContentArea;}}});brightcove.player.content.ContentManager.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.content.ContentManager();}
return this.instance;};}());brightcove.player.content.ContentType={MEDIA:0,MEDIA_COLLECTION:1,PLAYLIST_COLLECTION:2};brightcove.player.content.ContentUtil={};brightcove.player.content.ContentUtil.isInvalidMediaItem=function(pMedia){var PlayerConfig,templateData;if(!pMedia){return true;}
if(pMedia.economics==2){return true;}
if(!pMedia.hasOwnProperty("FLVFullLengthURL")){return true;}
if(pMedia.FLVFullLengthURL===undefined){return true;}
PlayerConfig=brightcove.player.PlayerConfig;templateData=PlayerConfig.getInstance().getItem(PlayerConfig.TEMPLATE_DATA);if(!pMedia.allowViralSyndication&&templateData.isDefaultViralTemplate){return true;}
if(pMedia.geoRestricted){var userCountry=templateData.userCountry;if(userCountry&&userCountry.length>0){var countryFound=(pMedia.allowedCountries.indexOf(userCountry)>-1);var countryRestricted=false;if(pMedia.excludeListedCountries){countryRestricted=countryFound;}else{countryRestricted=!countryFound;}
if(countryRestricted){return true;}}}
return false;};brightcove.player.content.ContentUtil.isContentFullLengthURLAvailable=function(pMedia){if(pMedia&&pMedia.hasOwnProperty("FLVFullLengthURL")&&(pMedia.FLVFullLengthURL!=undefined)){return true;}
return false;};brightcove.player.content.ContentUtil.isMediaCollectionComplete=function(pMediaCollection,pPage,pRecordsPerPage){if(pMediaCollection==null||(pMediaCollection.mediaDTOs==null&&pMediaCollection.mediaCount!=0)){return false;}else if(pMediaCollection.mediaCount==0){return true;}else{var startRecord=pPage*pRecordsPerPage;var itemCount=pMediaCollection.mediaCount;if(startRecord>=itemCount&&startRecord>0){return true;}else{var mediaItems=pMediaCollection.mediaDTOs;var endRecord=Math.min(startRecord+pRecordsPerPage,itemCount);for(var i=startRecord;i<endRecord;i++){if(mediaItems[i]==null){return false;}}}}
return true;};brightcove.player.content.ContentUtil.duplicateMediaCollection=function(pMediaCollection){if(pMediaCollection==null){return null;}
var newMediaCollection={};newMediaCollection.mediaCount=newMediaCollection.videoCount=pMediaCollection.mediaCount;if(pMediaCollection.hasOwnProperty("videoDTOs")&&pMediaCollection.videoDTOs!=null){newMediaCollection.mediaDTOs=newMediaCollection.videoDTOs=pMediaCollection.videoDTOs.slice();}
if(pMediaCollection.hasOwnProperty("videoIds")&&pMediaCollection.videoIds!=null){newMediaCollection.mediaIds=newMediaCollection.videoIds=pMediaCollection.videoIds.slice();}
newMediaCollection.displayName=pMediaCollection.displayName;newMediaCollection.id=pMediaCollection.id;newMediaCollection.longDescription=pMediaCollection.longDescription;newMediaCollection.referenceId=pMediaCollection.referenceId;newMediaCollection.shortDescription=pMediaCollection.shortDescription;newMediaCollection.thumbnail=pMediaCollection.thumbnail;return newMediaCollection;};brightcove.player.content.ContentUtil.filterOutInvalidInMediaCollection=function(pMediaCollection,pChangeItemCount){var mediaItems=pMediaCollection.mediaDTOs;if(mediaItems==null)return;var mediaIds=pMediaCollection.mediaIds;for(var i=mediaItems.length-1;i>-1;i--){if(brightcove.player.content.ContentUtil.isInvalidMediaItem(mediaItems[i])){mediaItems.splice(i,1);if(mediaIds){mediaIds.splice(i,1);}
if(pChangeItemCount){pMediaCollection.videoCount--;pMediaCollection.mediaCount--;}}}};brightcove.player.content.ContentUtil.setLineupIDsIntoMediaCollection=function(pMediaCollection){if(pMediaCollection==null){return;}
var id=pMediaCollection.id;var mediaItems=pMediaCollection.mediaDTOs;if(mediaItems==null){return;}
var numItems=mediaItems.length;for(var i=0;i<numItems;i++){mediaItems[i].lineupId=id;}};brightcove.player.content.DataCache=brightcove.player.core.Class.extend({constructor:function(){this._super();this.cache=[];},add:function(pNewMediaCollection){var length=this.cache.length;var currentMediaCollection;for(var i=0;i<length;i++){currentMediaCollection=this.cache[i];if(currentMediaCollection.id==pNewMediaCollection.id){var currentItems=currentMediaCollection.mediaDTOs;if(currentItems==null){this.cache.splice(i,1,pNewMediaCollection);}else{var newItems=pNewMediaCollection.mediaDTOs;if(newItems!=null){var startingItemIndex=pNewMediaCollection.recordsPerPage*pNewMediaCollection.currentPageIndex;var newIds=pNewMediaCollection.videoIds;var currentIds=currentMediaCollection.videoIds;var insertLength=startingItemIndex+newItems.length;for(var j=startingItemIndex;j<insertLength;j++){currentItems.splice(j,0,newItems[j-startingItemIndex]);currentIds.splice(j,0,newIds[j-startingItemIndex]);}}}
return;}}
this.cache.push(pNewMediaCollection);},remove:function(pMediaCollectionID){var length=this.cache.length;for(var i=0;i<length;i++){if(this.cache[i].id==pMediaCollectionID){this.cache.splice(i,1);return true;}}
return false;},getMediaCollectionBy:function(pProp,pValue,pPage,pRecordsPerPage,pApplyFilters,pReturnIncomplete){var ContentUtil=brightcove.player.content.ContentUtil;if(pApplyFilters==undefined)pApplyFilters=true;var length=this.cache.length;for(var i=0;i<length;i++){var collection=this.cache[i];if(collection[pProp]==pValue){if(pReturnIncomplete||ContentUtil.isMediaCollectionComplete(collection,pPage,pRecordsPerPage)){if(pApplyFilters){collection=ContentUtil.duplicateMediaCollection(collection);var startIndex=pPage*pRecordsPerPage;var endIndex=startIndex+pRecordsPerPage;var collectionData=collection.mediaDTOs;if(collectionData){collectionData=collectionData.slice(startIndex,endIndex);collection.mediaDTOs=collection.videoDTOs=collectionData;}
var collectionIds=collection.mediaIds;if(collectionIds){collectionIds=collectionIds.slice(startIndex,endIndex);collection.mediaIds=collection.videoIds=collectionIds;}
ContentUtil.filterOutInvalidInMediaCollection(collection);}
return collection;}}}
return null;},getMediaBy:function(pProp,pValue){var numItems=this.cache.length;var mediaItems;var numMediaItems;var j;for(var i=0;i<numItems;i++){mediaItems=this.cache[i].mediaDTOs;if(mediaItems!=null){numMediaItems=mediaItems.length;for(j=0;j<numMediaItems;j++){if(mediaItems[j][pProp]==pValue)return mediaItems[j];}}}
return null;}});brightcove.player.core.Sprite=brightcove.player.html.Element.extend({constructor:function(pContext){this._super(null,pContext);this.children=[];this.x=0;this.y=0;this.width=1;this.height=1;this.id=undefined;this.enabled=true;this.visible=true;this.classes=["brightcove.player.core.Sprite"];},initialize:function(pID){this.setElementID(pID);this.move(this.x,this.y);this.setSize(this.width,this.height);this.initialized=true;if(!this.visible){this.setVisible(false);}},setElementID:function(pID){this.id=this.element.id=(pID||"$bc")+brightcove.player.core.Sprite.ID++;},contains:function(pChild){for(var i in this.children){if(this.children[i]==pChild){return true;}}
return false;},addChild:function(pChild){if(!pChild)return;this.addChildAt(pChild,this.children.length);},addChildAt:function(pChild,pIndex){if(pChild.parent&&pChild.parent instanceof brightcove.player.core.Sprite){pChild.parent.removeChild(pChild);}
pChild.parent=this;if(this.children.length>0&&pIndex<this.children.length){this.children[pIndex].before(pChild.element);}else{this.append(pChild.element);}
this.children.splice(pIndex,0,pChild);},removeChild:function(pChild){if(!pChild)return;var found=false;for(var i=0;i<this.children.length;i++){if(this.children[i]==pChild){this.children.splice(i,1);found=true;break;}}
if(found){pChild.parent=null;pChild.remove();}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);this.width=pWidth;this.height=pHeight;},scale:function(pWidth,pHeight,pDuration){this._super(pWidth,pHeight,pDuration);this.width=pWidth;this.height=pHeight;},getX:function(){return this.x;},setX:function(pX){this._super(pX);this.x=pX;},getY:function(){return this.y;},setY:function(pY){this._super(pY);this.y=pY;},move:function(pX,pY){this.setX(pX);this.setY(pY);},slide:function(pX,pY,pDuration){this.x=pX;this.y=pY;this._super(pX,pY,pDuration);},getVisible:function(){return this.visible;},setVisible:function(pVisible){this.visible=pVisible;pVisible?this.show():this.hide();},getAlpha:function(){var alpha=this.element.style.getPropertyValue("opacity");return(alpha==null)?1:alpha;},setAlpha:function(pAlpha){this.css({opacity:pAlpha});},getEnabled:function(){return this.enabled;},setEnabled:function(pEnabled){this.enabled=pEnabled;},getClassName:function(){return this.classes[this.classes.length-1];},clickHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.Event(brightcove.player.events.Event.CLICK,e);this.dispatchEvent(event);},mousedownHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.Event(brightcove.player.events.Event.MOUSEDOWN,e);this.dispatchEvent(event);$(this.element).bind("mousemove",$.proxy(this.mousemoveHandler,this)).bind("mouseup",$.proxy(this.mouseupHandler,this));},mouseupHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.Event(brightcove.player.events.Event.MOUSEUP,e);this.dispatchEvent(event);$(this.element).unbind("mousemove").unbind("mouseup");},mousemoveHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.Event(brightcove.player.events.Event.MOUSEMOVE,e);this.dispatchEvent(event);},touchstartHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.TouchEvent(brightcove.player.events.TouchEvent.TOUCH_START,e);this.dispatchEvent(event);},touchmoveHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.TouchEvent(brightcove.player.events.TouchEvent.TOUCH_MOVE,e);this.dispatchEvent(event);},touchendHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.TouchEvent(brightcove.player.events.TouchEvent.TOUCH_END,e);this.dispatchEvent(event);},cleanUp:function(){for(var i=this.children.length-1;i>-1;i--){if(this.children[i]&&this.children[i]instanceof com.brightcove.core.Sprite){this.children[i].cleanUp();}}}});brightcove.player.core.Sprite.ID=0;brightcove.player.data.Binding=brightcove.player.core.Class.extend({constructor:function(pSourceObj,pDestinationObj,pFormatter,pTwoWay){this.sourcePoint=pSourceObj;this.destinationPoint=pDestinationObj;this.formatter=pFormatter;this.twoWay=pTwoWay;if(!(this.sourcePoint.component instanceof brightcove.player.core.EventDispatcher))return;if(pTwoWay&&!(this.destinationPoint.component instanceof brightcove.player.core.EventDispatcher))return;this.sourcePoint.component.addEventListener(this.sourcePoint.event,this.handleSourceEvent,this);if(pTwoWay)this.destinationPoint.component.addEventListener(this.destinationPoint.event,this.handleDestinationEvent,this);},handleSourceEvent:function(pEvent){if(this.dontUpdate)return;if(pEvent.hasOwnProperty("property")){if(pEvent.property!=this.sourcePoint.singleProperty){return;}}
this.dontUpdate=true;this.execute();this.dontUpdate=false;},handleDestinationEvent:function(pEvent){if(this.dontUpdate)return;if(pEvent.hasOwnProperty("property")){if(pEvent.property!=this.destinationPoint.singleProperty){return;}}
this.dontUpdate=true;this.execute(true);this.dontUpdate=false;},format:function(pValue){if(this.formatter==null)return pValue;return this.formatter.format(pValue);},execute:function(pReverse){var component;var property;var value;if(!pReverse){component=this.destinationPoint.component;property=this.destinationPoint.property;value=this.getValue(this.sourcePoint);}else{if(this.twoWay){component=this.sourcePoint.component;property=this.sourcePoint.property;value=this.getValue(this.destinationPoint);}}
if(component){var setter="set"+property.charAt(0).toUpperCase()+property.substr(1);if(component[setter]){component[setter](value);}else{component[property]=value;}}},getValue:function(pSourcePt){var component=pSourcePt.component;if(pSourcePt.property.length>0){var props=pSourcePt.property.split(".");var prop,getter;while(props.length>0&&component!=null){prop=props.shift();getter="get"+prop.charAt(0).toUpperCase()+prop.substr(1);if(prop&&prop.length>0&&(component.hasOwnProperty(prop)||component[getter]))
{if(component[getter]){component=component[getter]();}else{component=component[prop];}}else if(prop!="self"){component=null;}}}
var result;if(component!=null){result=this.format(component);}
return pSourcePt.inverseBoolean?!result:result;},remove:function(){if(this.sourcePoint.component instanceof brightcove.player.core.EventDispatcher){this.sourcePoint.component.removeEventListener(this.sourcePoint.event,this.handleSourceEvent,this);}
if(this.twoWay&&this.destinationPoint.component instanceof brightcove.player.core.EventDispatcher){this.destinationPoint.component.removeEventListener(this.destinationPoint.event,this.handleDestinationEvent,this);}}});brightcove.player.data.DataProvider=brightcove.player.core.EventDispatcher.extend({constructor:function(pItems){this._super();if(pItems==null)pItems=[];this.data=pItems.slice();},dispatchChange:function(){var Event=brightcove.player.events.Event;this.dispatchEvent(new Event(Event.CHANGE));},getItemAt:function(pIndex){return this.data[pIndex];},getItemIndex:function(pItem){return this.data.indexOf(pItem);},getItemIndexByFieldValue:function(pField,pValue){var item;var numItems=this.getLength();for(var i=0;i<numItems;i++){item=this.data[i];if(item.hasOwnProperty(pField)&&item[pField]==pValue){return i;}}
return-1;},addItem:function(pItem){this.addItemAt(pItem,this.getLength());},addItemAt:function(pItem,pIndex){this.data.splice(Math.min(pIndex,this.getLength()),0,pItem);this.dispatchChange();},addItems:function(pItems){this.addItemsAt(pItems,this.getLength());},addItemsAt:function(pItems,pIndex){this.data=this.data.slice(0,pIndex).concat(pItems.slice()).concat(this.data.slice(pIndex));this.dispatchChange();},removeItem:function(pItem){return this.removeItemAt(this.getItemIndex(pItem));},removeItemAt:function(pIndex){if(pIndex>-1&&pIndex<this.getLength()&&this.data[pIndex]!=null){this.data.splice(pIndex,1);this.dispatchChange();return true;}
return false;},replaceItemAt:function(pItem,pIndex){if(pIndex<this.getLength()&&pIndex>-1){this.data[pIndex]=pItem;this.dispatchChange();return true;}
return false;},getLength:function(){return this.data.length;},getData:function(){return this.data.slice();}});brightcove.player.data.EndPoint=function(pComponent,pProperty,pEvent,pInverseBoolean){this.component=pComponent;try{var properties=pProperty.split(".");if(properties.length>1){var dispatcher=pComponent[properties.shift()];dispatcher=(dispatcher=="null")?null:dispatcher;while(properties.length&&dispatcher){if(dispatcher){this.component=dispatcher;pProperty=properties.join(".");dispatcher=this.component[properties.shift()];}}}}catch(e){}
this.event=pEvent||brightcove.player.events.PropertyChangeEvent.CHANGE;this.inverseBoolean=pInverseBoolean;this.property=this.singleProperty=pProperty;if(this.property&&this.property.indexOf(".")>-1){this.singleProperty=String(this.property.split(".")[0]);}};brightcove.player.events.AdEvent=brightcove.player.events.Event.extend({constructor:function(pType,pPosition,pDuration){this._super(pType);this.position=pPosition;this.duration=pDuration;this.enumerableProperties={"type":true,"position":true,"duration":true};}});brightcove.player.events.AdEvent.PLAY="adPlay";brightcove.player.events.AdEvent.BEGIN="adBegin";brightcove.player.events.AdEvent.STOP="adStop";brightcove.player.events.AdEvent.SEEK="adSeek";brightcove.player.events.AdEvent.PROGRESS="adProgress";brightcove.player.events.AdEvent.RESUME_PLAYER="adResumePlayer";brightcove.player.events.AdEvent.START="adStart";brightcove.player.events.AdEvent.COMPLETE="adComplete";brightcove.player.events.AdPluginEvent=brightcove.player.events.Event.extend({constructor:function(pType){this._super(pType);this.enumerableProperties={"type":true};}});brightcove.player.events.AdPluginEvent.READY_FOR_PREROLL="readyForPreroll";brightcove.player.events.AdPluginEvent.READY_FOR_POSTROLL="readyForPostroll";brightcove.player.events.AdPluginEvent.PAUSE_AD="pauseAd";brightcove.player.events.AdPluginEvent.RESUME_AD="resumeAd";brightcove.player.events.AuthEvent=brightcove.player.events.Event.extend({constructor:function(pType,pService,pRequestorId,pResourceId){var opts;this._super(pType);this.service=pService;this.requestorId=pRequestorId;this.resourceId=pResourceId;this.enumerableProperties={"type":true,"service":true,"requestorId":true,"resourceId":true};}});brightcove.player.events.AuthEvent.AUTH_NEEDED="authNeeded";brightcove.player.events.CaptionsEvent=brightcove.player.events.Event.extend({constructor:function(pType,pUrl,pError){var opts;this._super(pType);if(typeof pUrl=="object"){opts=pUrl;$.extend(true,this,opts);}else{this.url=pUrl;this.error=pError;}
this.enumerableProperties={"type":true,"url":true,"error":true};}});brightcove.player.events.CaptionsEvent.DFXP_LOAD_SUCCESS="dfxpLoadSuccess";brightcove.player.events.CaptionsEvent.DFXP_LOAD_ERROR="dfxpLoadError";brightcove.player.events.CaptionsEvent.LANGUAGES_LOADED="languagesLoaded";brightcove.player.events.ContentEvent=brightcove.player.events.Event.extend({constructor:function(pType,pMedia){this._super(pType);this.media=pMedia;this.enumerableProperties={"type":true,"media":true};}});brightcove.player.events.ContentEvent.NO_CONTENT="noContent";brightcove.player.events.ContentEvent.CONTENT_NOT_SUPPORTED="contentNotSupported";brightcove.player.events.ContentEvent.LOADED="loaded";brightcove.player.events.ContentEvent.MEDIA_LOAD_BY_REF="mediaLoadByRef";brightcove.player.events.ContentEvent.MEDIA_LOAD_BY_ID="mediaLoadByID";brightcove.player.events.ContentEvent.MEDIA_LOAD="mediaLoad";brightcove.player.events.ContentEvent.MEDIA_NOT_FOUND="mediaNotFound";brightcove.player.events.CuePointEvent=brightcove.player.events.Event.extend({constructor:function(pType,pCuePoint){this._super(pType);this.cuePoint=pCuePoint;this.enumerableProperties={"type":true,"cuePoint":true};}});brightcove.player.events.CuePointEvent.CUE="cuePoint";brightcove.player.events.ErrorEvent=brightcove.player.events.Event.extend({constructor:function(pCode){this.type="templateError";this.errorType=this.ErrorTypes[pCode];this.code=pCode;this.info="";},ErrorTypes:["unknown","domainRestricted","geoRestricted","invalidID","noContent","unavailableContent","upgradeRequiredForVideo","upgradeRequiredForPlayer","serviceUnavailable","hlsProtocolNotSupported","videoCodecPlaybackNotSupported","contentNotSupportedOnDevice","unauthorizedContent"]});brightcove.player.events.ErrorEvent.UNKNOWN=0;brightcove.player.events.ErrorEvent.DOMAIN_RESTRICTED=1;brightcove.player.events.ErrorEvent.GEO_RESTRICTED=2;brightcove.player.events.ErrorEvent.INVALID_ID=3;brightcove.player.events.ErrorEvent.NO_CONTENT=4;brightcove.player.events.ErrorEvent.UNAVAILABLE_CONTENT=5;brightcove.player.events.ErrorEvent.UPGRADE_REQUIRED_FOR_VIDEO=6;brightcove.player.events.ErrorEvent.UPGRADE_REQUIRED_FOR_PLAYER=7;brightcove.player.events.ErrorEvent.SERVICE_UNAVAILABLE=8;brightcove.player.events.ErrorEvent.HLS_NOT_SUPPORTED=9;brightcove.player.events.ErrorEvent.VIDEO_CODEC_NOT_SUPPORTED=10;brightcove.player.events.ErrorEvent.CONTENT_NOT_SUPPORTED_ON_DEVICE=11;brightcove.player.events.ErrorEvent.UNAUTHORIZED_CONTENT=12;brightcove.player.events.ExperienceEvent=brightcove.player.events.Event.extend({});brightcove.player.events.ExperienceEvent.TEMPLATE_READY="templateReady";brightcove.player.events.ExperienceEvent.VIDEO_PLAYER_SET="videoPlayerSet";brightcove.player.events.MediaEvent=brightcove.player.events.Event.extend({constructor:function(pType,pPosition,pDuration,pMedia,pRendition){this._super(pType);this.position=pPosition;this.duration=pDuration;this.media=pMedia;this.rendition=pRendition;this.enumerableProperties={"type":true,"position":true,"duration":true,"rendition":true,"media":true};}});brightcove.player.events.MediaEvent.VIDEO_CREATED="videoCreated";brightcove.player.events.MediaEvent.SEEK="seek";brightcove.player.events.MediaEvent.DO_PAUSE="dopause";brightcove.player.events.MediaEvent.DO_PLAY="doplay";brightcove.player.events.MediaEvent.BUFFERED="hasBuffered";brightcove.player.events.MediaEvent.LOAD_START="loadstart";brightcove.player.events.MediaEvent.REQUEST_PLAY="requestplay";brightcove.player.events.MediaEvent.REQUEST_PAUSE="requestpause";brightcove.player.events.MediaEvent.PLAY_ATTEMPT="playAttempt";brightcove.player.events.MediaEvent.VIDEO_PLAYBACK_AFTER_AD="videoPlaybackAfterAd";brightcove.player.events.MediaEvent.BEGIN="mediaBegin";brightcove.player.events.MediaEvent.COMPLETE="mediaComplete";brightcove.player.events.MediaEvent.CHANGE="mediaChange";brightcove.player.events.MediaEvent.RENDITION_CHANGE="renditionChange";brightcove.player.events.MediaEvent.PLAY="mediaPlay";brightcove.player.events.MediaEvent.STOP="mediaStop";brightcove.player.events.MediaEvent.PROGRESS="mediaProgress";brightcove.player.events.MediaEvent.ERROR="mediaError";brightcove.player.events.MediaEvent.SEEK_NOTIFY="mediaSeekNotify";brightcove.player.events.PropertyChangeEvent=brightcove.player.events.Event.extend({constructor:function(pType,pProperty){this._super(pType,pProperty);this.property=pProperty;}});brightcove.player.events.PropertyChangeEvent.CHANGE="propertyChange";brightcove.player.events.ThemeEvent=brightcove.player.events.Event.extend({});brightcove.player.events.ThemeEvent.THEME_LOADED="themeLoaded";brightcove.player.events.ThemeEvent.THEME_COMPLETE="themeComplete";brightcove.player.events.ThemeEvent.STYLES_LOADED="stylesLoaded";brightcove.player.events.TouchEvent=brightcove.player.events.Event.extend({constructor:function(pType,pData){this._super(pType,pData);this.originalEvent=pData.originalEvent;}});brightcove.player.events.TouchEvent.TOUCH_START="touchstart";brightcove.player.events.TouchEvent.TOUCH_MOVE="touchmove";brightcove.player.events.TouchEvent.TOUCH_END="touchend";brightcove.player.html.Canvas=brightcove.player.html.Element.extend({constructor:function(pContext){this._super("canvas",pContext);},setSize:function(pWidth,pHeight){this._element.attr("height",pHeight);this._element.attr("width",pWidth);},getContext:function(){return this._element[0].getContext("2d");}});brightcove.player.net.ServerPing=brightcove.player.core.EventDispatcher.extend({constructor:function(pPath){this._super();var image=new Image();image.addEventListener("load",function(){delete this;},false);image.src=pPath;}});brightcove.player.net.Shim=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();this.isReady=false;this.requestQueue=[];this.iframe=$("<iframe />").attr("src",brightcove.player.PlayerConfig.getInstance().getItem(brightcove.player.PlayerConfig.CDN)+"/html/shim.html").css("display","none").bind("load",$.proxy(this.setReady,this)).appendTo(document.body);this.iframeElement=this.iframe[0];var handleResponse=$.proxy(this.handleResponse,this);window.addEventListener("message",handleResponse,false);},setReady:function(){this.isReady=true;this.processQueue();},generateRequest:function(pURL){if(this.isReady){this.iframeElement.contentWindow.postMessage(pURL,"*");}else{this.requestQueue.push(pURL);}},processQueue:function(){for(var i=0;i<this.requestQueue.length;i++){this.generateRequest(this.requestQueue[i]);}
this.requestQueue=[];},handleResponse:function(pMessage){if(typeof pMessage.data!="string"){console.debug("The post message caught was not a string.");return;}
var message=pMessage.data.split("::");var key=message[1];var Event=brightcove.player.events.Event;var eventType=message[0]=="complete"?Event.COMPLETE:Event.ERROR;if(key){var responses=this.iframeElement.contentWindow.responses;if(responses){var numResponses=responses.length;for(var i=0;i<numResponses;i++){if(responses[i]["key"]==key){var data={key:key};data.responseData=responses[i]["data"];if(key.substr(0,-3).toLowerCase()=="xml"){data.responseData=this.xmlParse(data);}
var e=new Event(eventType,data);this.dispatchEvent(e);return;}}}}},xmlParse:function(pData){var parser=new DOMParser();return parser.parseFromString(pData,"text/xml");}});brightcove.player.net.Shim.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.net.Shim();}
return this.instance;};brightcove.player.net.URLLoader=brightcove.player.core.EventDispatcher.extend({constructor:function(pType){this._super();this.type=pType||"script";this.shim=null;this.key=null;},onLoad:function(pData,pType){var Event=brightcove.player.events.Event;pType=(pType=="success"?Event.COMPLETE:pType);if(this.type=="xml"){pData=new DOMParser().parseFromString(pData,"text/xml").documentElement;}
this.data=pData;this.dispatchEvent(new Event(pType||Event.COMPLETE));},load:function(pURL){this.key=pURL;if(this.type==("script"||"jsonp")){jQuery.get(pURL,$.proxy(this.onLoad,this),this.type);}else{this.shim=brightcove.player.net.Shim.getInstance();this.shim.generateRequest(pURL);this.shim.addEventListener(brightcove.player.events.Event.COMPLETE,this.handleIframeResponse,this);this.shim.addEventListener(brightcove.player.events.Event.ERROR,this.handleIframeResponse,this);}},handleIframeResponse:function(pEvent){if(pEvent.data.key==this.key){this.onLoad(pEvent.data.responseData,pEvent.type);this.shim.removeEventListener(brightcove.player.events.Event.COMPLETE,this.handleIframeResponse,this);this.shim.removeEventListener(brightcove.player.events.Event.ERROR,this.handleIframeResponse,this);}}});brightcove.player.reporting.Goku={};brightcove.player.reporting.Goku.sendEvent=function(pMap){var time=new Date();var queryArgs="";for(var i in pMap){queryArgs+=("&"+i+"="+escape(pMap[i]));}
if(queryArgs.length>1){queryArgs=queryArgs.substr(1);}
var PlayerConfig=brightcove.player.PlayerConfig;var gokuURL=PlayerConfig.getInstance().getItem(PlayerConfig.GOKU_URL);this.test=new brightcove.player.net.ServerPing(gokuURL+"?"+queryArgs);};brightcove.player.reporting.Goku.trackEvent=function(pPath,pProductIds,pPublisherIds,pNameValuePairs){var map={html5:"1",dcsuri:pPath,dcsdat:new Date().getTime()};if(pProductIds!=undefined&&String(pProductIds).length>0){map["videoId"]=pProductIds;}
if(pPublisherIds!=undefined&&String(pPublisherIds).length>0){map["publisherId"]=pPublisherIds;}
var pair;if(pNameValuePairs!=null){for(var i in pNameValuePairs){pair=pNameValuePairs[i];if(pair.name!=null&&pair.value!=null){map[pair.name]=pair.value;}}}
brightcove.player.reporting.Goku.sendEvent(map);};brightcove.player.reporting.Goku.VIDEO_START="/viewer/video_start";brightcove.player.reporting.Goku.PLAYER_LOAD="/viewer/player_load";brightcove.player.reporting.Goku.DATA_LOAD="/viewer/data_load";brightcove.player.reporting.Goku.MEDIA_ERROR="/viewer/media_error";brightcove.player.reporting.Metrics={};(function(Metrics,undefined){Metrics.PLAYER_LOAD="player_load";Metrics.VIDEO_IMPRESSION="video_impression";Metrics.DATA_LOAD="data_load";Metrics.VIDEO_VIEW="video_view";Metrics.VIDEO_COMPLETE="video_complete";Metrics.VIDEO_ENGAGEMENT="video_engagement";Metrics.PUBLISHER_ID="account";Metrics.PLAYER_NAME="player_name";Metrics.PLAYER_ID="player";Metrics.PLAYLIST_ID="playlist";Metrics.VIDEO_NAME="video_name";Metrics.VIDEO_ID="video";Metrics.VIDEO_DURATION="video_duration";Metrics.PLAYER_URL="embed";Metrics.REFERRER_URL="source";var
settings,properties,defaultSettings={enabled:false},defaultProperties={domain:"videocloud",platform:"html5"},eventQueue=[],gokuEventMap={"/viewer/player_load":Metrics.PLAYER_LOAD,"/viewer/data_load":Metrics.DATA_LOAD,"/viewer/video_start":Metrics.VIDEO_VIEW},gokuEventPropertiesMap={"lineupId":"playlist"};function reset(){eventQueue=[];}
function send(){if(!(Metrics.isInitialized()&&Metrics.isEnabled())){return;}
while(eventQueue.length>0){new brightcove.player.net.ServerPing(settings["metricsURL"]+"?"+$.param(eventQueue.shift()));}}
Metrics.init=function(metricsSettings,metricsProperties){reset();settings=$.extend({},defaultSettings,metricsSettings);properties=$.extend({},defaultProperties,metricsProperties);};Metrics.isEnabled=function(){return!!(settings&&settings.enabled);};Metrics.isInitialized=function(){return!!settings;};Metrics.trackGoku=function(gokuEvent,gokuNameValuePairs){if(!gokuEvent){return;}
var event=gokuEventMap[gokuEvent]||gokuEvent;var properties=$.extend({},properties),current;for(var i=0,len=gokuNameValuePairs.length;i<len;i++){current=gokuNameValuePairs[i];if(current.value!=null){properties[gokuEventPropertiesMap[current.name]||current.name]=current.value;}}
Metrics.track(event,properties);};Metrics.track=function(event,eventProperties){if(!event){return;}
eventQueue.push($.extend({},properties,eventProperties,{event:event,time:(new Date()).getTime()}));send();};})(brightcove.player.reporting.Metrics);brightcove.player.reporting.Reporter={};brightcove.player.reporting.Reporter.getPlayerID=function(){var PlayerConfig=brightcove.player.PlayerConfig;return PlayerConfig.getInstance().getItem(PlayerConfig.TEMPLATE_DATA).id;};brightcove.player.reporting.Reporter.getPublisherID=function(){var PlayerConfig=brightcove.player.PlayerConfig;return PlayerConfig.getInstance().getItem(PlayerConfig.TEMPLATE_DATA).publisherId;};brightcove.player.reporting.Reporter.getPlayerTag=function(){var PlayerConfig=brightcove.player.PlayerConfig;return PlayerConfig.getInstance().snippetParameters[PlayerConfig.PLAYER_TAG];};brightcove.player.reporting.Reporter.sendReport=function(pAddress,pMedia,pNameValues){var
Reporter=brightcove.player.reporting.Reporter,PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),publisherID=Reporter.getPublisherID(),playerTag=Reporter.getPlayerTag(),nameValues=pNameValues||[],mediaID;if(pMedia!=null){mediaID=pMedia.id;publisherID=pMedia.publisherId;}
var Metrics=brightcove.player.reporting.Metrics;if(!Metrics.isInitialized()){var
properties={},settings={metricsURL:playerConfig.getItem(PlayerConfig.METRICS_URL),enabled:true},referrer=playerConfig.snippetParameters[PlayerConfig.REFERRER_URL];if(referrer&&referrer!="not available"){properties[Metrics.REFERRER_URL]=playerConfig.snippetParameters[PlayerConfig.REFERRER_URL];}
properties[Metrics.PLAYER_URL]=playerConfig.getItem(PlayerConfig.PAGE_URL);Metrics.init(settings,properties);}
var metricsNameValues=nameValues.concat([{name:Metrics.PUBLISHER_ID,value:publisherID},{name:Metrics.PLAYER_ID,value:Reporter.getPlayerID()},{name:Metrics.PLAYER_NAME,value:playerConfig.getItem(PlayerConfig.TEMPLATE_DATA).name}]);if(playerTag){metricsNameValues=metricsNameValues.concat({name:"playerTag",value:playerTag});}
if(pMedia){metricsNameValues=metricsNameValues.concat([{name:Metrics.VIDEO_ID,value:mediaID},{name:Metrics.VIDEO_NAME,value:pMedia.displayName}]);var duration=0;if(playerConfig.getItem(PlayerConfig.PLAYER)&&playerConfig.getItem(PlayerConfig.PLAYER).videoPlayer&&playerConfig.getItem(PlayerConfig.PLAYER).videoPlayer.getDuration()){duration=Math.floor(playerConfig.getItem(PlayerConfig.PLAYER).videoPlayer.getDuration());}
if(!isNaN(duration)&&isFinite(duration)&&duration>0){metricsNameValues.push({name:Metrics.VIDEO_DURATION,value:duration});}}
Metrics.trackGoku(pAddress,metricsNameValues);var Goku=brightcove.player.reporting.Goku;if(pAddress!=Goku.VIDEO_START&&pAddress!=Goku.PLAYER_LOAD&&pAddress!=Goku.DATA_LOAD&&pAddress!=Goku.MEDIA_ERROR){return;}
nameValues=nameValues.concat([{name:"playerId",value:Reporter.getPlayerID()},{name:"playerTag",value:playerTag||""},{name:"affiliateId",value:""}]);Goku.trackEvent(pAddress,mediaID,publisherID,nameValues);};brightcove.player.reporting.Reporter.sendMediaReport=function(pMedia,pAddress,pNameValues){if(pMedia==null)return;if(pNameValues==null)pNameValues=[];if(pMedia.lineupId>0){var pLineupID=pMedia.lineupId;pNameValues.push({name:"lineupId",value:pLineupID});}
brightcove.player.reporting.Reporter.sendReport(pAddress,pMedia,pNameValues);};brightcove.player.reporting.TimelineReporter={};(function(TimelineReporter){var
MIN_RANGE=10,start=NaN,end=NaN,currentVideo,player,lastTime,MediaEvent=brightcove.player.events.MediaEvent;function onStart(event){updateVideo(player.video);updateProgress(player.getPosition());}
function onStop(event){updateProgress(player.getPosition());send();}
function onProgress(event){updateVideo(player.video);updateProgress(event.position);}
function onSeek(event){send();resetProgress();updateProgress(event.position);}
function onChange(event){updateVideo(player.video);}
function updateVideo(video){if(!currentVideo){currentVideo=video;}else if(currentVideo!=video){send();resetProgress();currentVideo=video;}}
function updateProgress(position){if(isNaN(position)||!player||(isFinite(player.getDuration())&&player.getDuration()>0&&position>player.getDuration())){return;}
if(isNaN(lastTime)){lastTime=new Date().getTime();}
if(isNaN(start)){start=position;}
if(position>=start){end=position;}
if(Math.round(end-start)>=MIN_RANGE){send();}}
function resetProgress(){start=end=lastTime=NaN;}
function cleanUp(){if(player){player.removeEventListener(MediaEvent.BEGIN,onStart,TimelineReporter);player.removeEventListener(MediaEvent.STOP,onStop,TimelineReporter);player.removeEventListener(MediaEvent.PROGRESS,onProgress,TimelineReporter);player.removeEventListener(MediaEvent.SEEK_NOTIFY,onSeek,TimelineReporter);player.removeEventListener(MediaEvent.CHANGE,onChange,TimelineReporter);player=null;}
resetProgress();currentVideo=null;}
function send(){if(isNaN(start)||isNaN(end)||end-start<1||isNaN(lastTime)){return;}
if(!TimelineReporter.isRangeTimeValid(start,end,lastTime)){resetTrackingProgress();return;}
var
duration=player.getDuration(),engagementData;if(isNaN(duration)||!isFinite(duration)||duration<=0){engagementData={name:"video_seconds_viewed",value:Math.round(end-start)};}else{engagementData={name:"range",value:Math.round(start)+".."+Math.round(end-1)};}
brightcove.player.reporting.Reporter.sendMediaReport(currentVideo,brightcove.player.reporting.Metrics.VIDEO_ENGAGEMENT,[engagementData]);start=end;end=NaN;lastTime=NaN;}
TimelineReporter.track=function(timelinePlayer){cleanUp();player=timelinePlayer;player.addEventListener(MediaEvent.BEGIN,onStart,TimelineReporter);player.addEventListener(MediaEvent.STOP,onStop,TimelineReporter);player.addEventListener(MediaEvent.PROGRESS,onProgress,TimelineReporter);player.addEventListener(MediaEvent.SEEK_NOTIFY,onSeek,TimelineReporter);player.addEventListener(MediaEvent.CHANGE,onChange,TimelineReporter);};TimelineReporter.reset=function(){cleanUp();};TimelineReporter.isRangeTimeValid=function(start,end,lastTime){var elapsedSeconds=Math.round((new Date().getTime()-lastTime)/1000);return(end-start<=elapsedSeconds+5);};})(brightcove.player.reporting.TimelineReporter);brightcove.player.services.ExperienceRuntimeFacade=brightcove.player.services.RemoteService.extend({constructor:function(){this._super("experience/runtime");},getProgrammingForExperience:function(pCallback,pScope){this.callRemote("get_programming_for_experience",null,pCallback,pScope);},getProgrammingWithOverrides:function(pOverride,pCallback,pScope){var keyValuePairs={overrideKey:pOverride.key,overrideValue:pOverride.value};if(pOverride.featured!=undefined){keyValuePairs.overrideFeatured=pOverride.featured;}
this.callRemote("get_programming_with_overrides",keyValuePairs,pCallback,pScope);}});brightcove.player.services.ExperienceRuntimeFacade.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.services.ExperienceRuntimeFacade();}
return this.instance;};brightcove.player.services.PlayerMediaFacade=brightcove.player.services.RemoteService.extend({constructor:function(){this._super("player/media");},findMediaByID:function(pID,pPubID,pCallback){var keyValuePairs={id:pID,pubId:pPubID};this.callRemote("find_media_by_id",keyValuePairs,pCallback);},findMediaByIDWithTVEToken:function(pToken,pID,pPubID,pCallback){var keyValuePairs={tveToken:pToken,id:pID,pubId:pPubID};this.callRemote("find_media_by_id_with_token",keyValuePairs,pCallback);},findMediaByReferenceId:function(pRef,pPubID,pCallback){var keyValuePairs={refId:pRef,pubId:pPubID};this.callRemote("find_media_by_reference_id",keyValuePairs,pCallback);},findPlaylistByID:function(id,pubId,callback,page,recordsPerPage){this.invoke("find_playlist_by_id",{id:id,pubId:pubId,page:page,recordsPerPage:recordsPerPage},callback,this);},findPlaylistByReferenceID:function(refId,pubId,callback,page,recordsPerPage){this.invoke("find_playlist_by_reference_id",{refId:refId,pubId:pubId,page:page,recordsPerPage:recordsPerPage},callback,this);}});brightcove.player.services.PlayerMediaFacade.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.services.PlayerMediaFacade();}
return this.instance;};brightcove.player.services.RemoteRequest=brightcove.player.core.EventDispatcher.extend({constructor:function(pCallback,pScope){this._super();this.callback=pCallback;this.scope=pScope;},onResult:function(pData){this.success=pData&&!pData.Error;this.data=pData;this.callback.apply(this.scope,[this]);var Event=brightcove.player.events.Event;this.dispatchEvent(new Event(Event.COMPLETE));},get:function(pURL){this.url=pURL;$.getJSON(pURL,$.proxy(this.onResult,this));}});brightcove.player.ui.Alignment={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom",LEFT:"left",CENTER:"center",RIGHT:"right"};brightcove.player.ui.GraphicSprite=brightcove.player.core.Sprite.extend({initialize:function(pID){this._super(pID);this.canvas=new brightcove.player.html.Canvas();this.canvas.setSize(this.width,this.height);this.append(this.canvas.element);},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.canvas.setSize(pWidth,pHeight);}}});brightcove.player.ui.ScaleMode={SHOW_ALL:"showAll",NO_SCALE:"noScale",SCALE_DOWN:"scaleDown",EXACT_FIT:"exactFit",NO_BORDER:"noBorder"};brightcove.player.ui.ScrollDirection={HORIZONTAL:"horizontal",VERTICAL:"vertical"};brightcove.player.ui.UIObject=brightcove.player.core.Sprite.extend({constructor:function(){this._super();this.globalStyles=null;this.skins={};this.style=undefined;this.styleSheet=undefined;this.complexThemed=false;this.themeSet="default";this.classes.push("brightcove.player.ui.UIObject");},initialize:function(pID){this._super(pID);if(!this.complexThemed&&this.definition){var StyleUtil=brightcove.player.ui.themes.StyleUtil;var css={};if(this.globalStyles!=null){StyleUtil.assignCSStoJSON(this.globalStyles[this.getClassName().split(".").pop().toString()],css);StyleUtil.assignCSStoJSON(this.globalStyles[this.getID()],css);}
if(this.style){StyleUtil.assignCSStoJSON(this.style,css);}
var Attributes=brightcove.player.beml.Attributes;if(this.definition.getAttribute(Attributes.STYLE)){StyleUtil.convertInlineCSStoJSON(this.definition.getAttribute(Attributes.STYLE),css);}
this.definition.setAttribute(Attributes.STYLE,StyleUtil.convertJSONToInlineString(css));}
brightcove.player.ui.themes.ThemeManager.getInstance().style(this);this.render();},render:function(){},resolveGraphic:function(pProp){return brightcove.player.ui.themes.ThemeManager.getInstance().getSkin(this,pProp,this.themeSet);},getGraphic:function(pProp){return(this.skins[pProp]||this.resolveGraphic(pProp));},setGraphic:function(pProp,pSkin){this.skins[pProp]=pSkin;},setSkins:function(pSkins){this.skins=pSkins;},dispatchChange:function(pProperty){this.dispatchEvent(new brightcove.player.events.PropertyChangeEvent(brightcove.player.events.PropertyChangeEvent.CHANGE,pProperty));},setProperties:function(pData){if(pData!=null){for(var i in pData){if(this.hasOwnProperty(i)){this[i]=pData[i];}}}},getAttribute:function(pName,pCascadeUp){if(!this.definition)return"";var value=this.definition.getAttribute(pName);if(value==null&&this.layoutBox!=null&&pCascadeUp){value=this.layoutBox.getAttribute(pName,true);}
if(value==null)value="";return value;},getID:function(){return this.getAttribute(brightcove.player.beml.Attributes.ID);},setID:function(pID){this.definition.setAttribute(brightcove.player.beml.Attributes.ID,pID);},getDesiredWidth:function(){return this.getAttribute(brightcove.player.beml.Attributes.WIDTH)||brightcove.player.beml.Attributes.VARIABLE;},getDesiredHeight:function(){return this.getAttribute(brightcove.player.beml.Attributes.HEIGHT)||brightcove.player.beml.Attributes.VARIABLE;},getIncludeInLayout:function(){if(this.definition==null)return true;return(this.getAttribute(brightcove.player.beml.Attributes.INCLUDE_IN_LAYOUT).toString()!="false");},setIncludeInLayout:function(pInclude){this.setVisible(pInclude);if(this.getIncludeInLayout()==pInclude)return;if(this.definition){this.definition.setAttribute(brightcove.player.beml.Attributes.INCLUDE_IN_LAYOUT,pInclude.toString());}
if(this.initialized)this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.RESIZE));},setEnabled:function(pEnabled){this._super(pEnabled);this.updateStyles();},updateStyles:function(pStyleFormat){if(pStyleFormat==null)return;if(pStyleFormat!=this.styleFormat)pStyleFormat.addListener(this);this.styleFormat=pStyleFormat;}});brightcove.player.ui.UIState={ACTIVE:"active",SELECTED:"selected",ROLLOVER:"rollover",DISABLED:"disabled"};brightcove.player.ui.media.ControlsProxy=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();},needPrerollCheck:function(){return false;},postrollsComplete:function(){return true;},respondToPlay:function(){var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.REQUEST_PLAY));},respondToPause:function(){var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.REQUEST_PAUSE));},onMediaChange:function(){}});brightcove.player.ui.media.ControlsProxy.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.ui.media.ControlsProxy();}
return this.instance;};brightcove.player.ui.media.ControlsProxy.setInstance=function(pInstance){if(this.instance){var Tracer=brightcove.player.utils.Tracer;Tracer.warn(this,"ControlsProxy was created twice.",Tracer.TYPE_DEBUG);}
this.instance=pInstance;};brightcove.player.ui.menus.OverlayMenu=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.menus.OverlayMenu");},render:function(){this._super();this.backgroundGraphic=new brightcove.player.ui.Block();this.backgroundGraphic.styleFormatName=this.styleFormat.name;this.backgroundGraphic.setGraphic("graphic",this.getGraphic("background"));this.backgroundGraphic.setSize(this.width,this.height);this.backgroundGraphic.initialize();this.addChild(this.backgroundGraphic);this.playButton=new brightcove.player.ui.controls.Button();this.playButton.setGraphic("graphic",this.getGraphic("playIcon"));this.playButton.setSize(73,80);this.playButton.move((this.width-this.playButton.width)/2,(this.height-this.playButton.height)/2);this.playButton.initialize();this.addChild(this.playButton);},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.backgroundGraphic.setSize(this.width,this.height);this.playButton.move((this.width-this.playButton.width)/2,(this.height-this.playButton.height)/2);}},reveal:function(){if(!brightcove.player.utils.PlayerUtil.isIOSSixPointZero()){this.setAlpha(0);}
this.show();this.animate({opacity:1},500);}});brightcove.player.ui.themes.PlayerTheme=brightcove.player.core.Class.extend({constructor:function(){this.defineSkins();this.defineStyles();this.defineStyleFormats();},defineSkins:function(){this.skins={"brightcove.player.ui.menus.OverlayMenu":{"background":brightcove.player.ui.themes.skins.SimpleRect,"playIcon":brightcove.player.ui.themes.skins.OverlayPlayIcon}};},defineStyles:function(){this.styles={};this.styles["_Light"]='.background { color:#FFFFFF; }';this.styles["_Light"]+='.bodyText { fontSize:"12"; active:#858586; selected:#858586; disabled:#666666; }';this.styles["_Light"]+='.linkText { fontSize:"12"; active:#858586; downState:#B0C645; disabled:#666666; }';this.styles["_Light"]+='.titleText { fontSize:"24"; active:#6BAAB1; selected:#6BAAB1; disabled:#666666; }';this.styles["_Dark"]='.background { color:#4A4949; }';this.styles["_Dark"]+='.bodyText { fontSize:"12"; active:#E8E8E8; selected:#E8E8E8; disabled:#747474; }';this.styles["_Dark"]+='.linkText { fontSize:"12"; active:#E8E8E8; downState:#ADC244; disabled:#747474; }';this.styles["_Dark"]+='.titleText { fontSize:"24"; active:#ADC244; selected:#ADC244; disabled:#747474; }';},defineStyleFormats:function(){this.styleFormats={};var StyleFormat=brightcove.player.ui.themes.StyleFormat;var format=new StyleFormat("background");format.addProperty("background","background-color");this.styleFormats[format.name]=format;format=new StyleFormat("body");format.addProperty("text","bodyText-active");format.addProperty("textSize","bodyText-fontSize");format.addProperty("selectedText","bodyText-selected");format.addProperty("disabledText","bodyText-disabled");this.styleFormats["brightcove.player.ui.controls.Label"]=format;this.styleFormats[format.name]=format;format=new StyleFormat("title");format.addProperty("text","titleText-active");format.addProperty("textSize","titleText-fontSize");format.addProperty("selectedText","titleText-selected");format.addProperty("disabledText","titleText-disabled");this.styleFormats[format.name]=format;format=new StyleFormat("link");format.addProperty("text","linkText-active");format.addProperty("textSize","linkText-fontSize");format.addProperty("selectedText","linkText-selected");format.addProperty("disabledText","linkText-disabled");this.styleFormats["brightcove.player.ui.controls.Link"]=format;format=new StyleFormat("brightcove.player.ui.menus.OverlayMenu");format.addProperty("face","#000000");format.addProperty("faceAlpha","0.0");this.styleFormats[format.name]=format;}});brightcove.player.ui.themes.StyleFormat=brightcove.player.core.Class.extend({constructor:function(pName){this.properties={};this.styleOverrides={};this.listeners=[];this.name=pName;},addListener:function(pListener){if(pListener.styleFormat!=null){pListener.styleFormat.removeListener(pListener);}
pListener.styleFormat=this;pListener.styleFormatName=this.name;for(var i in this.listeners){if(this.listeners[i]==pListener)return;}
this.listeners.push(pListener);},removeListener:function(pListener){var length=this.listeners.length;for(var i=0;i<length;i++){if(this.listeners[i]==pListener){this.listeners.splice(i,1);break;}}
pListener.styleFormat=null;},updateStyles:function(){for(var i=this.listeners.length-1;i>-1;i--){if(this.listeners[i]==undefined){this.listeners.splice(i,1);}else{this.listeners[i].updateStyles(this);}}},addProperty:function(pProperty,pValue){this.properties[pProperty]=pValue;},getProperty:function(pProperty){return this.properties[pProperty];},getValue:function(pProperty){return this.styleOverrides[pProperty]||this.getProperty(pProperty);},setValue:function(pProperty,pValue){this.styleOverrides[pProperty]=pValue;},duplicate:function(pName){var format=new brightcove.player.ui.themes.StyleFormat(pName);for(var i in this.properties){format.addProperty(i,this.getProperty(i));format.setValue(i,this.getValue(i));}
return format;}});brightcove.player.ui.themes.StyleSet=brightcove.player.core.EventDispatcher.extend({constructor:function(pStyles,pVariables){this.styles=pStyles;this.variables=pVariables;this._super();},onStylesLoaded:function(pEvent){this.loader.removeEventListener(brightcove.player.events.Event.COMPLETE,this.onStylesLoaded,this);this.parse(this.loader.data);var ThemeEvent=brightcove.player.events.ThemeEvent;this.dispatchEvent(new ThemeEvent(ThemeEvent.STYLES_LOADED));},applyCSSToStyles:function(){var format,value,properties,override;for(var i in this.styles){format=this.styles[i];properties=format.properties;for(var j in properties){value=properties[j];if(typeof(value)=="string"){override=this.variables[value.toLowerCase()]||this.variables[value];if(override!=undefined){format.setValue(j,override);}else{value=value.split("-");if(value.length>1&&this.css[value[0]]){value=this.css[value[0]][value[1]];if(value!=undefined){format.setValue(j,value);}}}}}}},load:function(pFile){if(this.loader){this.loader.removeEventListener(brightcove.player.event.Event.COMPLETE,this.onStylesLoaded,this);}
this.loader=new brightcove.player.net.URLLoader("html");this.loader.addEventListener(brightcove.player.events.Event.COMPLETE,this.onStylesLoaded,this);this.loader.load(pFile);},parse:function(pCSS){this.css=brightcove.player.ui.themes.StyleUtil.convertCSStoJSON(pCSS);this.applyCSSToStyles();},duplicateStyleWithOverrides:function(pFormat,pOverrides){var newName=pFormat.name+(brightcove.player.ui.themes.StyleSet.uniqueID++);pFormat=pFormat.duplicate(newName);var styles=pOverrides.split(" ").join("").split(";");if(styles&&styles[styles.length-1]==""){styles.pop();}
var variables={};var style;for(i in styles){style=styles[i].split(":");variables[style[0]]=style[1];}
var j,property;for(i in pFormat.properties){for(j in variables){property=pFormat.getProperty(i);if(j==property||j==property.toLowerCase()){pFormat.setValue(i,variables[j]);}}}
this.styles[pFormat.name]=pFormat;return pFormat;}});brightcove.player.ui.themes.StyleSet.uniqueID=1000;brightcove.player.ui.themes.StyleUtil={};brightcove.player.ui.themes.StyleUtil.convertCSStoJSON=function(pCSS){var css=pCSS.replace(/\s*/g,"");css=css.replace(/^\.|(\})\./gim,'$1');css=css.replace(/;/g,",");css=css.replace(/,?}/g,"},");css=css.replace(/{/g,":{");css="{"+css+"}";css=css.replace(/,}/g,"}");css=css.replace(/([,{]\s*)([A-Za-z\-]*)(\s*:)/g,"$1\"$2\":");css=css.replace(/(\"[A-Za-z\-]*|")\s*:\s*([^;,{\"\'}\d][^;,{\"\'}]+)+?(;*)/g,"$1:\"$2\"$3");return $.parseJSON(css);};brightcove.player.ui.themes.StyleUtil.assignCSStoJSON=function(pCSS,pObject){if(pCSS==undefined)return pObject;if(pObject==undefined)pObject={};var json=brightcove.player.ui.themes.StyleUtil.convertCSStoJSON(pCSS);for(var i in json){pObject[i]=json[i];}
return pObject;};brightcove.player.ui.themes.StyleUtil.convertInlineCSStoJSON=function(pCSS,pObject){if(pObject==null)pObject={};var css=pCSS.replace(/;/g,",");css="{"+css+"}";css=css.replace(/([A-Za-z\-]*)(\s*:)/g,"\"$1\":");css=css.replace(/(\"[A-Za-z\-]*|")\s*:\s*(#[0-9A-Fa-f]{1,6}|[A-Za-z\s]+)+?(;*)/g,"$1:\"$2\"$3");css=css.replace(/,}/g,"}");var json=$.parseJSON(css);for(var i in json){pObject[i]=json[i];}
return pObject;};brightcove.player.ui.themes.StyleUtil.assignCSS=function(pTheme,pCSS){if(pCSS==undefined)return;var styles=brightcove.player.ui.themes.StyleUtil.convertCSStoJSON(pCSS);var style;var value;var firstChar;var property;for(var styleName in styles){style=styles[styleName];styleName=styleName+"-";for(property in style){firstChar=property.charAt(0);value=style[property];if(firstChar=="'"||firstChar=='"'){value=value.substr(1,value.length-2);}
pTheme.setVariable(styleName+property,value);}}};brightcove.player.ui.themes.StyleUtil.convertJSONToInlineString=function(pJSON){var css="";for(var i in pJSON){css+=(i+":"+pJSON[i]+";");}
return css;};brightcove.player.ui.themes.Theme=brightcove.player.core.EventDispatcher.extend({constructor:function(pThemeName,pThemeClassOrDirectory,pStyleName){if(pThemeClassOrDirectory instanceof Function){this.themeDataClass=pThemeClassOrDirectory;}else{this.directory=pThemeClassOrDirectory;}
this.name=pThemeName;this.styleName=pStyleName;this.variables={};this.ready=false;this._super();},getThemeDataClass:function(){if(this.themeDataClass){return this.themeDataClass;}
if(this.directory){if(brightcove.player.ui.themes.components[this.directory]){return brightcove.player.ui.themes.components[this.directory][this.name];}}
return null;},onThemeLoaded:function(pEvent){this.instantiateThemeData(this.getThemeDataClass());},onStylesLoaded:function(pEvent){this.ready=true;var ThemeEvent=brightcove.player.events.ThemeEvent;this.dispatchEvent(new ThemeEvent(ThemeEvent.THEME_COMPLETE));},instantiateThemeData:function(pClass){if(pClass){if(this.styleName==undefined){return;}
var ThemeEvent=brightcove.player.events.ThemeEvent;this.dispatchEvent(new ThemeEvent(ThemeEvent.THEME_LOADED));this.themeData=new pClass();this.skins=this.themeData.skins;this.styleSet=new brightcove.player.ui.themes.StyleSet(this.themeData.styleFormats,this.variables);if(this.styleName.toLowerCase().substr(-4)==".css"){this.styleName=brightcove.player.ui.themes.ThemeManager.DEFAULT_STYLE_NAME;if(this.directory==undefined){this.styleName="_"+this.styleName;}}
if(this.styleName.charAt(0)=="_"){this.styleSet.parse(this.themeData.styles?this.themeData.styles[this.styleName]:"");this.onStylesLoaded();}else{var file;if(this.styleName.toLowerCase().substr(-4)==".css"){file=this.styleName;}else{var dir=brightcove.player.PlayerConfig.getInstance().getItem(brightcove.player.PlayerConfig.CDN);file=dir+"themes/widgets/"+this.directory+"/styles/"+this.name+"/"+this.styleName.toLowerCase()+".css";}
this.styleSet.addEventListener(ThemeEvent.STYLES_LOADED,this.onStylesLoaded,this);this.styleSet.load(file);}}else{brightcove.player.utils.Tracer.error(this,"Could not instantiate data for theme: "+this.name,brightcove.player.utils.Tracer.TYPE_DEBUG);}},load:function(){var themeDataClass=this.getThemeDataClass();if(themeDataClass){this.instantiateThemeData(themeDataClass);}else if(this.directory!=undefined){if(this.loader){this.loader.removeEventListener(brightcove.player.event.Event.COMPLETE,this.onThemeLoaded,this);}
this.loader=new brightcove.player.net.URLLoader();this.loader.addEventListener(brightcove.player.events.Event.COMPLETE,this.onThemeLoaded,this);var dir=brightcove.player.PlayerConfig.getInstance().getItem(brightcove.player.PlayerConfig.PLAYER_DIRECTORY);var file=dir+"themes/"+this.directory+"/"+this.name+".js";this.loader.load(file);}},getFromMap:function(pMap,pUIObject,pProperty){var classes=pUIObject.classes;var className;var skin;for(var j=classes.length-1;j>-1;j--){className=classes[j];for(var i in pMap){if(i==className){skin=pMap[i][pProperty];if(skin)return skin;}}}
return null;},getSkin:function(pUIObject,pProperty){var skin=this.getFromMap(this.skins,pUIObject,pProperty);return skin;},setVariable:function(pKey,pValue){this.variables[pKey.toLowerCase()]=pValue;}});brightcove.player.ui.themes.ThemeManager=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();this.themes={};},style:function(pObject,pUpdate){var styleFormat=this.getStyle(pObject);if(!styleFormat)styleFormat=new brightcove.player.ui.themes.StyleFormat("none");var styles=pObject.getAttribute(brightcove.player.beml.Attributes.STYLE);if(styles.length>0){var theme=this.getThemeFromSetReference(pObject.themeSet);styleFormat=theme.styleSet.duplicateStyleWithOverrides(styleFormat,styles);}
styleFormat.addListener(pObject);if(pUpdate)pObject.updateStyles();},getStyle:function(pObject){var styles;if(pObject.themeSet&&pObject.themeSet!=""){styles=this.getStylesForSet(pObject.themeSet);}
if(styles==null)return null;if(pObject.styleFormatName!=null){if(styles[pObject.styleFormatName]!=undefined)return styles[pObject.styleFormatName];}
var classes=pObject.classes;var length=classes.length;if(length>0){for(var i=length-1;i>-1;i--){if(styles[classes[i]]!=undefined)return styles[classes[i]];}}
return styles["default"];},getStylesForSet:function(pThemeSet){var theme=this.getThemeFromSetReference(pThemeSet);if(!theme)return null;var styleSet=theme.styleSet;if(!styleSet)return null;return styleSet.styles;},getThemeFromSetReference:function(pThemeSet){var theme=this.themes[pThemeSet];if(!theme)theme=this.themes[brightcove.player.ui.themes.ThemeManager.DEFAULT_THEME];return theme;},getTheme:function(pThemeName,pThemeClassOrDirectory,pThemeSet,pStyleFormatName){var theme=this.themes[pThemeSet];if(!theme){theme=new brightcove.player.ui.themes.Theme(pThemeName,pThemeClassOrDirectory,pStyleFormatName);this.themes[pThemeSet]=theme;}
return theme;},getSkin:function(pUIObject,pProperty,pThemeSet){var theme=this.getThemeFromSetReference(pThemeSet);if(theme==null)return null;return theme.getSkin(pUIObject,pProperty);}});brightcove.player.ui.themes.ThemeManager.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.ui.themes.ThemeManager();}
return this.instance;};brightcove.player.ui.themes.ThemeManager.DEFAULT_THEME="default";brightcove.player.ui.themes.ThemeManager.DEFAULT_THEME_NAME="Deluxe";brightcove.player.ui.themes.ThemeManager.DEFAULT_STYLE_NAME="Light";brightcove.player.ui.themes.icons.Icon=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.themes.icons.Icon");this.canvas=brightcove.createElement("canvas");this.canvas.style.display="block";this.context=this.canvas.getContext("2d");this.image=new Image();this.image.onload=$.proxy(this.setRenderable,this);this.assetPath=brightcove.player.PlayerConfig.getInstance().getItem(brightcove.player.PlayerConfig.PLAYER_DIRECTORY);this.assetPath+=brightcove.player.PlayerConfig.ASSETS;this.color="#000";this.scale=1;this.triedToRender=false;this.isRenderable=false;},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);$(this.canvas).attr("height",pHeight);$(this.canvas).attr("width",pWidth);},render:function(){if(this.isRenderable){this._super();this.setScale(this.scale);this.append(this.canvas);this.context.fillStyle=this.color;this.context.fillRect(0,0,this.width,this.height);this.context.globalCompositeOperation="destination-in";this.context.drawImage(this.image,0,0);}else{this.triedToRender=true;}},setColor:function(pColor){this.color=pColor;if(this.initialized){this.recolor();}},setScale:function(pScale){this.width=this.width*pScale;this.height=this.height*pScale;this.setSize(this.width,this.height);},recolor:function(){this.context.clearRect(0,0,this.width,this.height);this.render();},setRenderable:function(){this.isRenderable=true;if(this.triedToRender){this.render();}}});brightcove.player.utils.MediaUtil={};brightcove.player.utils.MediaUtil.addTrackingQueryArgs=function(pURL,pMedia){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var player=playerConfig.getItem(PlayerConfig.TEMPLATE_DATA);var args={playerId:player.id,lineupId:pMedia.lineupId?pMedia.lineupId:"",affiliateId:""};if(pURL.indexOf("pubId=")<0){args.pubId=pMedia.publisherId;}
if(pURL.indexOf("videoId=")<0){args.videoId=pMedia.id;}
return brightcove.player.utils.URLUtil.appendQueryArgs(pURL,args);};brightcove.player.utils.MediaUtil.formatTime=function(pSeconds,pIncludeHours){if(pSeconds<0){return"--:--";}
var padDigit=function(pDigit){return(pDigit>=10)?pDigit:"0"+pDigit;};var tString="";if(pIncludeHours){var hours=padDigit(Math.floor(pSeconds/3600));pSeconds=pSeconds%3600;tString+=hours+":";}
var minutes=padDigit(Math.floor(pSeconds/60));var seconds=padDigit(Math.floor(pSeconds%60));return tString+minutes+":"+seconds;};brightcove.player.utils.ObjectUtil={};brightcove.player.utils.ObjectUtil.clone=function(pMaster,pDeep){return jQuery.extend(pDeep,{},pMaster);};brightcove.player.utils.ObjectUtil.cloneDeep=function(pMaster){return brightcove.player.utils.ObjectUtil.clone(pMaster,true);};brightcove.player.utils.PlayerUtil={};brightcove.player.utils.PlayerUtil.isIOS=function(pUserAgent){return(/\biP(ad|hone|od)\b/i).test(pUserAgent||brightcove.userAgent);};brightcove.player.utils.PlayerUtil.isIOSSix=function(pUserAgent){if(!pUserAgent){pUserAgent=brightcove.userAgent;}
return(this.isIOS&&(pUserAgent.indexOf("OS 6_")>-1));};brightcove.player.utils.PlayerUtil.isIOSSixPointZero=function(pUserAgent){if(!pUserAgent){pUserAgent=brightcove.userAgent;}
return(this.isIOS&&(pUserAgent.indexOf("OS 6_0")>-1));};brightcove.player.utils.PlayerUtil.isIOSFivePointOne=function(pUserAgent){if(!pUserAgent){pUserAgent=brightcove.userAgent;}
return(this.isIOS&&(pUserAgent.indexOf("OS 5_1 ")>-1));};brightcove.player.utils.PlayerUtil.isIOSSeven=function(pUserAgent){if(!pUserAgent){pUserAgent=brightcove.userAgent;}
return(this.isIOS&&(pUserAgent.indexOf("OS 7_")>-1));};brightcove.player.utils.PlayerUtil.isIOSVersionOrGreater=function(minVersion,pUserAgent){if(!pUserAgent){pUserAgent=brightcove.userAgent;}
isVersionOrAbove=false;osString=(pUserAgent.match(/[0-9]+_[0-9]/)||[])[0];if(osString){isVersionOrAbove=(parseFloat(osString.replace("_","."))>=minVersion);}
return(this.isIOS()&&isVersionOrAbove);};brightcove.player.utils.PlayerUtil.canPlayHLS=function(pUserAgent){var userAgent,isIOS,isCompatibleSilkVersion,isMacintoshSafari,osString,osVer,isCompatibleMacSafari;userAgent=pUserAgent||brightcove.userAgent;isIOS=brightcove.player.utils.PlayerUtil.isIOS(userAgent);isCompatibleSilkVersion=((+(userAgent.match(/\bSilk\/(\d+\.\d+)/)||[])[1])>=2.3);isMacintoshSafari=userAgent.match(/Macintosh;(.+)Version\/([0-9\.]+)\sSafari/)&&!userAgent.match(/Silk/);isCompatibleMacSafari=false;if(isMacintoshSafari){osString=(userAgent.match(new RegExp("[0-9]+_[0-9]"))||[])[0];if(osString){osVer=(userAgent.match(/OS X (\d+)_(\d+)/));isCompatibleMacSafari=osVer[1]>=11||(osVer[1]>=10&&osVer[2]>=6);}}
return(isIOS||isCompatibleSilkVersion||isCompatibleMacSafari);};brightcove.player.utils.PlayerUtil.useHLSOnAndroid=function(renditions){if(!this.isAndroid()){return false;}
if(!brightcove.player.utils.PlayerUtil.isAndroidWithHLSSupport()){return false;}
if(brightcove.player.utils.PlayerUtil.isAndroidWithAcceptableHLSSupport()){return true;}
if(!renditions){return true;}
var renditionAvailable=false;for(var i=0,ii=renditions.length;i<ii&&!renditionAvailable;i++){var defaultURL=renditions[i].defaultURL;renditionAvailable=(/^http/).test(defaultURL)&&renditions[i].videoCodec==="H264"&&defaultURL.indexOf('.m3u8')==-1&&defaultURL.indexOf('.f4m')==-1;}
return!renditionAvailable;};brightcove.player.utils.PlayerUtil.isSmallScreenIOS=function(pUserAgent){return(/\biP(hone|od)\b/i).test(pUserAgent||brightcove.userAgent);};brightcove.player.utils.PlayerUtil.isAndroidWithInPagePlayback=function(pUserAgent){var
userAgent=pUserAgent||brightcove.userAgent,isAmazonSilk=/Silk/g.test(userAgent),androidVersion=(userAgent.match(/\bAndroid (\d+\.\d+)/)||[])[1];return+androidVersion>=3.1&&!(isAmazonSilk&&!brightcove.player.utils.PlayerUtil.isAmazonSilkWithInPagePlayback(userAgent));};brightcove.player.utils.PlayerUtil.isAmazonSilkWithInPagePlayback=function(pUserAgent){var silkVer=pUserAgent.match(/\bSilk\/(\d+)\.(\d+)/);if(silkVer===undefined){return false;}
return((silkVer[1]>3)||((silkVer[1]==3)&&(silkVer[2]>=10)));};brightcove.player.utils.PlayerUtil.isAndroidWithHLSSupport=function(pUserAgent){var
userAgent=pUserAgent||brightcove.userAgent,androidVersion=(userAgent.match(/\bAndroid (\d+\.\d+)/)||[])[1];return+androidVersion>=4.0;};brightcove.player.utils.PlayerUtil.isAndroidWithAcceptableHLSSupport=function(pUserAgent){var
userAgent=pUserAgent||brightcove.userAgent,androidChrome=(/android.*chrome/i).test(userAgent),androidVersion=(userAgent.match(/\bAndroid (\d+\.\d+)/)||[])[1];return androidChrome&&+androidVersion>=4.2;};brightcove.player.utils.PlayerUtil.isAndroid=function(pUserAgent){var
userAgent=pUserAgent||brightcove.userAgent,isIEMobile=(/\bIEMobile\b/).test(userAgent),isAndroid=(/\bAndroid\b/).test(userAgent),isAmazonSilk=/Silk/g.test(userAgent);return!isIEMobile&&(isAndroid||isAmazonSilk);};brightcove.player.utils.PlayerUtil.isChromeForAndroid=function(pUserAgent){var
userAgent=pUserAgent||brightcove.userAgent,isChromeBrowser=(/android.*chrome/i).test(userAgent),webKitVersion=(userAgent.match(/\bAppleWebKit\/(\d+\.\d+)/)||[])[1];return isChromeBrowser||(this.isAndroid()&&webKitVersion>=537.0);};brightcove.player.utils.Profile=brightcove.player.core.Class.extend({constructor:function(){this.steps=[];},startProfile:function(pClassName,pFunctionName){var index=this.steps.push({className:pClassName,method:pFunctionName,timing:new Date().getTime()});return--index;},endProfile:function(pIndex){this.steps[pIndex]["timing"]=new Date().getTime()-this.steps[pIndex]["timing"];},logProfile:function(){var numSteps=this.steps.length;var Tracer=brightcove.player.utils.Tracer;for(var i=0;i<numSteps;i++){var debugString=this.steps[i]["className"]+"#"+this.steps[i]["method"]+": "+this.steps[i]["timing"]+"ms";Tracer.debug(this,debugString,Tracer.TYPE_DEBUG);}}});brightcove.player.utils.Profile.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.utils.Profile();}
return this.instance;};brightcove.player.utils.Tracer={};brightcove.player.utils.Tracer.ERROR=1;brightcove.player.utils.Tracer.WARN=2;brightcove.player.utils.Tracer.DEBUG=3;brightcove.player.utils.Tracer.TYPE_DEBUG=0;brightcove.player.utils.Tracer.TYPE_LOADING=1;brightcove.player.utils.Tracer.TYPE_AD=2;brightcove.player.utils.Tracer.TYPE_MEDIA=3;brightcove.player.utils.Tracer.TYPE_BEML=4;brightcove.player.utils.Tracer.TYPE_API=5;brightcove.player.utils.Tracer.TYPE_REPORTING=6;brightcove.player.utils.Tracer.debug=function(pObject,pMessage,pType){var params=brightcove.player.PlayerConfig.getInstance().snippetParameters;var debug=params["debug"];if(debug=="true"){brightcove.player.utils.Tracer.log(pObject,pMessage,pType,brightcove.player.utils.Tracer.DEBUG);}};brightcove.player.utils.Tracer.warn=function(pObject,pMessage,pType){brightcove.player.utils.Tracer.log(pObject,pMessage,pType,brightcove.player.utils.Tracer.WARN);};brightcove.player.utils.Tracer.error=function(pObject,pMessage,pType){brightcove.player.utils.Tracer.log(pObject,pMessage,pType,brightcove.player.utils.Tracer.ERROR);};brightcove.player.utils.Tracer.log=function(pObject,pMessage,pType,pLevel){if(console!=undefined){console.log(pMessage);}};brightcove.player.utils.URLUtil={};brightcove.player.utils.URLUtil.appendQueryArgs=function(pURL,pArgs){if(!pURL||!pArgs){return pURL;}
pURL+=((pURL.indexOf("?")<0)?"?":"&");for(var i in pArgs){pURL+=(i+"="+pArgs[i]+"&");}
return pURL.substr(0,pURL.length-1);};brightcove.player.utils.URLUtil.removeQueryString=function(pAddress){if(pAddress!=null){var queryIndex=pAddress.indexOf("?");if(queryIndex>-1){return pAddress.substr(0,queryIndex);}}
return pAddress;};brightcove.player.utils.URLUtil.getExtension=function(pAddress){if(!pAddress){return null;}
var url=brightcove.player.utils.URLUtil.removeQueryString(pAddress);var dotIndex=url.lastIndexOf(".");if(dotIndex<0){return null;}
return url.substr(dotIndex+1,url.length).toLowerCase();};(function(){var
clone=brightcove.player.utils.ObjectUtil.clone,TTML='http://www.w3.org/ns/ttml',TTS=TTML+'#styling',styleNode=document.createElement('style'),styleNodeEl=$(styleNode),styleClasses={},defaultStyleOptions={'set':false,'show-background':true,'background-color':'#000','text-color':'#FFF'},styleOptions={},playerHeight=360,defaultFontFamily="\"Andale Mono\", \"Lucida Console\", monospace",defaultFontPX=18,fontMap={'default':defaultFontFamily,monospace:'monospace',sansSerif:'sans-serif',serif:'serif',monospaceSansSerif:"\"Andale Mono\", \"Lucida Console\", monospace",monospaceSerif:"\"Courier New\", monospace",proportionalSansSerif:'sans-serif',proportionalSerif:'serif',casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},languageDictionary={en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",ko:"Korean",es:"Spanish",th:"Thai"},getLanguage=function(lang){return languageDictionary[lang]||lang||"Default";},paragraphSpecific=['textAlign','lineHeight','origin','extent','textOutline','color','fontFamily','fontSize','fontStyle','fontWeight','lineHeight','textDecoration','textAlign','textDecoration','wrapOption'],inheritedStyles=['color','direction','fontFamily','fontSize','fontStyle','fontWeight','lineHeight','textAlign','textDecoration','textOutline','visibility','wrapOption'],nonInheritedStyles=['backgroundColor','display','extent','opacity','origin','overflow','padding','showBackground','unicodeBidi','writingMode','zIndex'],ttsStyles={backgroundColor:{css:['background-color'],tags:['body','div','p','region','span'],transform:function(value){var bgcolor=value;if(styleOptions.set&&styleOptions['show-background']&&styleOptions['background-color']){bgcolor=styleOptions['background-color'];}
return String(parseColor(bgcolor,styleOptions.set&&styleOptions['background-opacity']));}},color:{css:['color'],tags:['span','p'],transform:function(value){var color=value;if(styleOptions.set){if(styleOptions['text-color']){color=styleOptions['text-color'];}else if(styleOptions.color){color=styleOptions.color;}}
return String(parseColor(color,styleOptions.set&&styleOptions['text-opacity']));}},fontFamily:{css:['font-family'],tags:['span','p'],transform:function(value){var fonts=value.split(',').map(function(font){font=font.trim();return fontMap[font]||font+','+defaultFontFamily;}).join(',');if(styleOptions.set&&styleOptions['font-family']){fonts=styleOptions['font-family']+','+fonts;}else if(styleOptions.set&&styleOptions['font-name']){fonts=styleOptions['font-name']+','+fonts;}
if(styleOptions.set&&styleOptions['font-family']==="smallcaps"||styleOptions['font-name']==="smallcaps"){return fonts+'; font-variant: small-caps;';}
return fonts;}},fontSize:{css:['font-size'],init:'1c',tags:['span','p'],transform:function(value){var lengths,fontWidth;value=styleOptions.set&&styleOptions['font-size']||value;lengths=parseLengths(value);fontWidth=lengths[0];return fontWidth;}},fontWeight:{css:['font-weight'],values:['normal','bold'],init:'normal',tags:['span','p']},fontStyle:{css:['font-style'],values:['normal','italic','oblique'],init:'normal',tags:['span','p']},textAlign:{css:['text-align'],values:['left','center','right','start','end'],init:'start',tags:['p'],transform:function(value){return styleOptions.set&&styleOptions["text-align"]||value;}},textDecoration:{css:['text-decoration'],values:['none','underline','noUnderline','lineThrough','noLineThrough','overline','noOverline'],init:'none',tags:['span','p'],transform:function(value){var
i,decorations=value.split(','),decoration,negativeDecoration={none:1,noUnderline:1,noLineThrough:1,noOverline:1};decorations=value.split(',');for(i=0;i<decorations.length;i++){decoration=decorations[i].trim();if(negativeDecoration[decoration]){decorations=['none'];break;}
if(decoration==='lineThrough'){decorations[i]='line-through';}}
decorations=decorations.join(' ');return decorations;}},textOutline:{css:['text-shadow'],init:'none',tags:['span','p'],transform:function(value,css){var
hasColor,lengths,blur,thickness,textShadows,color=null,edgeStyle,opacity,lightGray,darkGray;if(styleOptions.set&&styleOptions['edge-style']){edgeStyle=styleOptions['edge-style'];opacity=styleOptions['text-opacity']||1;lightGray=hexToRGBA('CCC',true,opacity);darkGray=hexToRGBA('222',true,opacity);if(edgeStyle==="none"){return"none";}else if(edgeStyle==="dropshadow"){return"2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray+";";}else if(edgeStyle==="raised"){return"1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray+";";}else if(edgeStyle==="depressed"){return"1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray+";";}else if(edgeStyle==="uniform"){return"0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+";";}}
if(value==='none'){return value;}
hasColor=!(/^[\d\+\-\.]/.test(value));if(hasColor){color=parseColor(value);value=value.substring(color.originalLength).trim();color=String(color);}
if(color==null){color=css.color||0xFFFFFF;}
lengths=parseLengths(value);if(lengths.length==0){return'none';}
if(lengths.length>2){return'none';}
thickness=lengths[0];blur=lengths[1]||'2px';if(thickness.indexOf('px')<1||blur.indexOf('px')<1){return'none';}
textShadows=[];thickness=parseInt(thickness,10);while(thickness>0){textShadows.push("0px 0px "+(thickness--)+"px "+color);}
return textShadows.join(",");}},opacity:{css:['opacity'],init:'1.0',tags:['region'],transform:function(value){if(styleOptions.set&&styleOptions.opacity==undefined){return styleOptions.opacity;}
if(/^(([0]*?\.\d*)|1|0)$/.test(value)){return value;}else{return 1;}}},overflow:{css:['overflow'],values:['visible','hidden'],init:'hidden',tags:['region']},padding:{css:['padding'],init:'0px',tags:['region']},zIndex:{css:['z-index'],init:'auto',tags:['region']},origin:{css:['top','right','bottom','left'],init:['auto','auto','auto','auto'],tags:['region','div','p','body'],transform:function(value){var values=value.split(' ').map(function(el){return parseLengths(el)[0];});return[values[1],'0','auto',values[0]];}},extent:{css:['width','height'],init:['auto','auto'],tags:['region','div','p','body'],transform:function(value){var values=value.split(' ').map(function(el){return parseLengths(el)[0];});return values;}},display:{css:['display'],init:'inline-block',tags:['body','div','p','region','span'],values:['auto','none'],transform:function(value){var values={'auto':1,'none':1},init=this.init;return values[value]?(value=='none'?value:init):init;}},visibility:{css:['visibility'],init:'visible',tags:['body','div','p','region','span'],values:['visible','hidden']},lineHeight:{css:['line-height'],init:'normal',tags:['p'],transform:function(value){return value=='normal'?value:parseLengths(value)[0]||this.init;}},wrapOption:{css:['white-space'],init:'wrap',tags:['span','p'],values:['wrap','noWrap'],transform:function(value){var values={wrap:'normal',noWrap:'nowrap'};return values[value]||this.init;}},displayAlign:{css:['vertical-align'],values:['before','center','after'],init:'before',tags:['region'],transform:function(value){var values={before:'top',center:'middle',after:'bottom'};return values[value]||this.init;}}},tagsMap={body:[],div:[],p:[],region:[],span:[]},parseColor=function(value,alphaOverride){var alpha;alpha=alphaOverride!==undefined?alphaOverride||1:1;if(/^#/.test(value)){return hexToRGBA(value.slice(1),alphaOverride,alpha);}
if(/^(?:rgb|RGB)/.test(value)){return rgbToRGBA(value,alphaOverride!==undefined,alpha);}
value=value.trim();if(value.indexOf(' ')>-1){value=value.substring(0,value.indexOf(" "));}
return createColorString(value);},rgbToRGBA=function(value,alphaOverride,alpha){var rgba;rgba=value.slice(value.indexOf('('),value.indexOf(')'));rgba=rgba.split(',');if(alphaOverride){rgba[3]=alpha;}
return createColorString('rgba('+rgba.join(',')+')');},hexToRGBA=function(hex,alphaOverride,alpha){var r,g,b,rgb,rgba,l;rgb=hex;if(hex.length===8&&!alphaOverride){alpha=parseInt(hex.substring(6,8),16);alpha=alpha/255;alpha=Math.round(alpha*100)/100;l=9;}else if(hex.length===3){r=hex.charAt(0);g=hex.charAt(1);b=hex.charAt(2);rgb=r+r+g+g+b+b;l=4;}else{l=6;}
r=rgb.slice(0,2);g=rgb.slice(2,4);b=rgb.slice(4,6);rgba=[parseInt(r,16),parseInt(g,16),parseInt(b,16),alpha||1];return createColorString("rgba("+rgba.join(',')+")",l);},createColorString=function(cssColor,originalLength){var color;if(originalLength===undefined){originalLength=cssColor.length;}
color=String(cssColor);color.originalLength=originalLength;return color;},cellsToPx=function(value){if(value.indexOf('c')==-1){return value;}
return((parseFloat(value,10)/15)*playerHeight)+'px';},parseLengths=function(value){if(typeof value==="number"){return value;}
var
i,length,lengthRE=/([+-]?)\s*(\.\d+|\d+\.\d+|\d+)\s*(px|em|c|%)/gim,lengths=value.match(lengthRE);if(!lengths){return[];}
for(i=0;i<lengths.length;i++){length=lengths[i];length=length.replace(/\s/gim,'');lengths[i]=cellsToPx(length);}
return lengths;};(function(){var
i,name,prop,list,tag;for(name in ttsStyles){prop=ttsStyles[name];list=prop.tags;for(i=0;i<list.length;i++){tag=prop.tags[i];tagsMap[tag].push(name);}}}());brightcove.player.api.utils.CaptionsStyleParser=brightcove.player.core.Class.extend({ttml:TTML,tts:TTS,captionsDictionary:[],regionsDictionary:[],constructor:function(dfxpDOM,sOptions,pHeight){var styleProp,cssObj={},cssArr=[],ttsProp,styleOverride;$.extend(styleOptions,defaultStyleOptions);$.extend(true,cssObj,styleOptions);this.captionsArray=[];this.regionsDictionary=[];this.langs=["Default"];playerHeight=pHeight||playerHeight;if(sOptions.set!==false){for(styleOverride in sOptions){if(sOptions[styleOverride]){styleOptions.set=true;}}
$.extend(true,styleOptions,sOptions);$.extend(true,cssObj,styleOptions);cssObj['background-color']=ttsStyles.backgroundColor.transform(cssObj['background-color']);cssObj.color=ttsStyles.color.transform(cssObj['text-color']);if(cssObj['edge-style']){cssObj['text-shadow']=ttsStyles.textOutline.transform(cssObj['edge-style']);}
if(!cssObj['show-background']){delete cssObj["background-color"];}}else{styleOptions={};$.extend(styleOptions,defaultStyleOptions);}
for(styleProp in cssObj){if(styleProp=='show-background'){continue;}
cssArr.push(styleProp+":"+cssObj[styleProp]);}
styleNodeEl.text("");this.addRule('bc-default-style',cssArr);this.addRule('caption',['position:absolute','bottom:10%','left:2.5%','width:95%','margin:0 auto','padding:5px','box-sizing:border-box']);this.addRule('bc-default-region-style',['width:auto','height:auto','top: 10%','right: 2.5%','bottom: 10%','left: 2.5%','padding: auto']);this.setNamespaces(dfxpDOM);this.parseHead(dfxpDOM);this.parseBody(dfxpDOM);},setNamespaces:function(dom){var tt,ns,tts,attr;tt=dom.getElementsByTagName('tt');if(tt.length){tt=tt[0];ns=tt.getAttribute('xmlns');}
if(!ns){ns='http://www.w3.org/ns/ttml';}
tts=tt.getAttributeNS(ns,'tts');if(!tts){tts=ns+'#styling';}
attr=tt.getAttribute('xml:lang');if(attr){this.langs.push(attr);}
this.ttml=ns;this.tts=tts;},parseValue:function(name,node){var
prop=ttsStyles[name],value=node.getAttributeNS(this.tts,name);if(!value){return undefined;}
if(!this.validate(prop,value)){value=prop.init;}
if(prop.transform){value=prop.transform(value,node);}
node.removeAttributeNS(this.tts,name);return value;},validate:function(prop,value){var
i,values=prop.values;if(!values||!values.length){return true;}
for(i=0;i<values.length;i++){if(values[i]===value){return true;}}
return false;},parseRegion:function(region){var
id=region.getAttribute('xml:id'),inline={},nested={width:'auto',height:'auto',top:'10%',right:'2.5%',bottom:'10%',left:'2.5%',padding:'auto'},style={},declarations=[],pDeclarations=[],declaration,self=this;if(!id){return;}
inline=this.parseStyleNode(region,'region')||{};$(region).find('style').each(function(index,node){$.extend(nested,self.parseStyleNode(node,'region')||{});});style=$.extend({'text-align':'start'},nested,inline);styleClasses[id]=style;for(declaration in style){declarations.push(declaration+':'+style[declaration]);}
id='bc-ttml-region-'+id;this.addRule(id,declarations);},parseLayout:function(layout){var
self=this,parseRegionNode=function(index,node){self.parseRegion(node);};$(layout).find('region').each(parseRegionNode);},parseHead:function(dom){var
self=this,parseStyle=function(index,node){self.parseStyleNode(node,'styling');};$(dom).find('styling').find('style').each(parseStyle);this.parseLayout($(dom).find('layout').get(0));},addValue:function(cssName,name,css,node){var i,value,values;values=[].concat(this.parseValue(name,node));for(i=0;i<cssName.length;i++){value=values[i];if(value!=undefined){css[cssName[i]]=value;}}
return css;},parseStyleNode:function(node,type){var
id=node.getAttribute('xml:id'),declarations={},inline={},name,cssName,value,declaration,declarationsArray,referential={},i,j,properties,prop,styleDeclarations,regionDeclarations,regionId;for(name in ttsStyles){cssName=ttsStyles[name].css;inline=this.addValue(cssName,name,inline,node);}
referential=node.getAttribute('style');declarations=$.extend({},styleClasses[referential],styleClasses[referential+'-region'],inline);if(type=='styling'){if(!id){return undefined;}
properties=this.getPropertiesByTag('region');styleDeclarations={};regionDeclarations={};regionId=id+'-region';for(i=0;i<properties.length;i++){prop=ttsStyles[properties[i]];cssName=prop.css;if(prop.tags.length==1){for(j=0;j<cssName.length;j++){regionDeclarations[cssName[j]]=declarations[cssName[j]];delete declarations[cssName[j]];}}}
for(prop in declarations){styleDeclarations[prop]=declarations[prop];}
styleClasses[id]=styleDeclarations;styleClasses[regionId]=regionDeclarations;id='bc-ttml-'+id;declarationsArray=[];for(declaration in styleDeclarations){declarationsArray.push(declaration+':'+styleDeclarations[declaration]);}
this.addRule(id,declarationsArray);for(declaration in regionDeclarations){declarationsArray.push(declaration+':'+regionDeclarations[declaration]);}
this.addRule(regionId,declarationsArray);}
if(type=='region'){return declarations;}},parseBody:function(dom){var i,css,attr,bodyLanguage=this.langs[this.langs.length-1],body=dom.getElementsByTagName('body')[0],bodyParentNode;if(!body){return;}
this.parseStyleAttribute(body);css=this.parseNode(body);this.applyStyle(body,css);for(i=0;i<body.childNodes.length;i++){child=body.childNodes[i];bodyNode=document.createElement("div");bodyNode.setAttribute('class',body.getAttribute('class'));bodyNode.setAttribute('style',body.getAttribute('style'));bodyNode.style.position='relative';bodyNode.style.height='100%';attr=body.getAttribute('xml:lang');if(attr){this.langs.push(attr);bodyLanguage=attr;}
attr=body.getAttribute('xml:space');if(attr){preserveWhitespaces.push(attr=='preserve');}
if(child.nodeName=="div"){this.parseDivs(bodyNode,child,bodyLanguage);}
else if(child.nodeName=="p"){this.parseParagraph(child,bodyNode,bodyLanguage);}}},parseDivs:function(parentNode,currentDiv,language){var i,begin,end,divLanguage,currentDivCopy,css;if(!currentDiv){return;}
css=this.parseNode(currentDiv);this.applyStyle(currentDiv,css);divLanguage=language;this.parseStyleAttribute(currentDiv);attr=currentDiv.getAttribute('xml:lang');if(attr){this.langs.push(attr);divLanguage=attr;}
currentDivCopy=document.createElement("div");currentDivCopy.setAttribute('class',currentDiv.getAttribute('class'));currentDivCopy.setAttribute('style',currentDiv.getAttribute('style'));currentDivCopy.style.height="100%";parentNode.appendChild(currentDivCopy);for(i=0;i<currentDiv.childNodes.length;i++){child=currentDiv.childNodes[i];if(child.nodeName=="div"){this.parseDivs(currentDivCopy,child,divLanguage);}
else if(child.nodeName=="p"){this.parseParagraph(child,parentNode,divLanguage);}}},parseParagraph:function(child,parentElement,language){var
divNode=document.createElement("div"),tempParent=parentElement.cloneNode(true),attr,begin,end,defaultRegionNode,currentRegion,captionNode,regionClass="",childStyle,childEntry,regionStyle="";currentRegion=this.getRegion(child);this.parseStyleAttribute(child);var topLevelElement=this.parseCaption(child);childStyle=$(child).attr('style').split(';');for(var i=0;i<childStyle.length;i++){childEntry=childStyle[i].split(':');if(childEntry[0]=="top"||childEntry[0]=="bottom"||childEntry[0]=="width"||childEntry[0]=="height"||childEntry[0]=="left"||childEntry[0]=="right"){if(childEntry[0].replace(/\s+/g,'')=="right"&&childEntry[1].replace(/\s+/g,'')=="auto"){regionStyle+=" "+childEntry[0]+": 0;";}else{regionStyle+=" "+childEntry[0]+": "+childEntry[1]+";";}}}
if(regionStyle){regionStyle+="vertical-align:top;";}else{regionStyle+="vertical-align:bottom;";}
attr=child.getAttribute('begin');begin=this.timeExprToOffset(attr);attr=child.getAttribute('end');if(attr){end=Math.max(0,this.timeExprToOffset(attr));}else{end=begin+this.timeExprToOffset(child.getAttribute('dur'));}
if(!this.captionsArray[language]){this.captionsArray[language]=new brightcove.player.api.utils.SortedCaptionList();}
if(currentRegion){this.getEdgeNode(tempParent).appendChild(this.copyDOM(topLevelElement));defaultRegionNode=document.createElement("div");defaultRegionNode.setAttribute('class',"bc-ttml-region-"+currentRegion);defaultRegionNode.setAttribute('style',"position: absolute; "+regionStyle);defaultRegionNode.appendChild(this.getTopLevelNode(tempParent));captionNode=defaultRegionNode;}else{this.getEdgeNode(tempParent).appendChild(this.copyDOM(topLevelElement));defaultRegionNode=document.createElement("div");defaultRegionNode.setAttribute('class',"bc-default-region-style");defaultRegionNode.setAttribute('style',"position: absolute;"+regionStyle);defaultRegionNode.appendChild(this.getTopLevelNode(tempParent));captionNode=defaultRegionNode;}
this.captionsArray[language].add({begin:begin,end:end,content:$(captionNode)});},getTopLevelNode:function(element){if(element.parentElement){return this.getTopLevelNode(element.parentElement);}else{return element;}},getRegion:function(element){if(element.getAttribute('region')){return element.getAttribute('region');}else if(!element.parentElement){return null;}else{return this.getRegion(element.parentElement);}},getEdgeNode:function(element){if(element.children.length==0){return element;}else{return element.children[0];}},copyDOM:function(node){var newNode=this.copyNode(node),child,i;for(i=0;i<node.childNodes.length;i++){child=this.copyDOM(node.childNodes[i]);newNode.appendChild(child);}
return newNode;},copyNode:function(node){var newNode;if(node.nodeType==Node.ELEMENT_NODE){newNode=document.createElement(node.nodeName);newNode.setAttribute('class',node.getAttribute('class'));newNode.setAttribute('style',node.getAttribute('style'));}else if((node.nodeType==Node.TEXT_NODE)||(node.nodeType==Node.CDATA_SECTION_NODE)){newNode=document.createTextNode(node.textContent);}
return newNode;},parseNode:function(node){var
i,css,tag=node.nodeName.toLowerCase(),properties=this.getPropertiesByTag(tag),name,cssName,value,child;for(i=0;i<node.childNodes.length;i++){child=node.childNodes[i];if(child.nodeType==Node.ELEMENT_NODE&&tag!="body"&&tag!="div"){css=this.parseNode(child);this.applyStyle(child,css);}}
if(!properties){return undefined;}
this.parseStyleAttribute(node);css={};for(i=0;i<properties.length;i++){name=properties[i];cssName=ttsStyles[name].css;css=this.addValue(cssName,name,css,node);}
css=$.extend({},this.getInheritedProperties(node),css);return css;},getInheritedProperty:function(node,prop){if(node==null||!node.getAttribute){return null;}
var val=node.getAttribute('tts:'+prop);if(val){return val;}
else{return this.getInheritedProperty(node.parentNode,prop);}},getInheritedProperties:function(node,css){var i,property,inprop;css=css||{};for(i=0;i<inheritedStyles.length;i++){property=inheritedStyles[i];inprop=this.getInheritedProperty(node,property);if(inprop){css[ttsStyles[property]&&ttsStyles[property].css[0]]=inprop;}}
return css;},parseCaption:function(node){var
i,j,css,child,span=node.ownerDocument.createElement('span'),tableDiv=node.ownerDocument.createElement('div'),tableCellDiv=node.ownerDocument.createElement('div'),verticalSpan,region,style,styleAttr,padding,height,verticalAlign,cssP={},cssTable={},cssCell={},cssProp,cssVal,cssProps;this.copyChildren(node,span);node.appendChild(span);styleAttr=node.getAttribute('style');node.removeAttribute('style');region=this.getParentAttribute(node,'region');style=styleClasses[region];verticalAlign=style&&style['vertical-align'];if(!verticalAlign){if($(node).attr('tts:origin')||$(node).attr('tts:extent')){verticalAlign="top";}else{verticalAlign="bottom";}}
if(verticalAlign){region&&span.setAttribute('region',region);verticalSpan=node.ownerDocument.createElement('span');styleAttr&&verticalSpan.setAttribute('style',styleAttr);this.copyChildren(span,verticalSpan);span.appendChild(verticalSpan);}else{styleAttr&&span.setAttribute('style',styleAttr);}
css=this.parseNode(node);for(i=0;i<paragraphSpecific.length;i++){cssProps=ttsStyles[paragraphSpecific[i]].css;for(j=0;j<cssProps.length;j++){cssProp=cssProps[j];cssVal=css[cssProp];if(cssVal){cssP[cssProp]=css[cssProp];delete css[cssProp];}}}
if(verticalAlign){if(cssP['text-align']){css['text-align']=cssP['text-align'];}
cssCell['display']='table-cell';cssCell['vertical-align']=verticalAlign;cssTable['display']='table';cssTable['table-layout']='fixed';cssTable['width']='100%';cssTable['height']='100%';cssP['-webkit-margin-before']='0em';cssP['-webkit-margin-after']='0em';padding=style&&style.padding||'5px';}
this.applyStyle(tableDiv,cssTable);this.applyStyle(tableCellDiv,cssCell);tableCellDiv.appendChild(node);tableDiv.appendChild(tableCellDiv);this.applyStyle(node,cssP);return tableDiv;},applyStyle:function(node,css){var
prop,cssText='';for(prop in css){cssText+=prop+": "+css[prop]+';';}
node.setAttribute('style',cssText);return cssText;},copyChildren:function(from,to){var child;while(from.firstChild){child=from.removeChild(from.firstChild);to.appendChild(child);}
return to;},addClass:function(elem,value){classNames=[value];if(elem.nodeType===Node.ELEMENT_NODE){if(!elem.getAttribute('class')&&classNames.length===1){elem.setAttribute('class',value);}else{setClass=" "+elem.getAttribute('class')+" ";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(" "+classNames[c]+" ")){setClass+=classNames[c]+" ";}}
elem.setAttribute('class',jQuery.trim(setClass));}}
return elem;},getParentAttribute:function(node,attribute){if(node==null||!node.getAttribute){return null;}
var region=node.getAttribute(attribute);if(region){return region;}
else{return this.getParentAttribute(node.parentNode,attribute);}},timeExprToOffset:function(pTimeExpr){var
offsetTimeRxp=/^(\d+(?:\.\d+)?)(h|m|s|ms)$/,clockTimeRxp=/^(\d{2,})(?::)(\d{2})(?::)(\d{2})(?:(\.\d+)|:(\d{2,})(?:(\.\d+))?)?$/,defaultFrameRate=30,defaultSubFrameRate=1,secondsPerMinute=60,secondsPerHour=secondsPerMinute*60,metricConversion={h:secondsPerHour,m:secondsPerMinute,s:1,ms:1/1000},offsetTimeMatch=pTimeExpr.match(offsetTimeRxp),clockTimeMatch,result,hours,minutes,seconds,fraction,frame,subframe;if(offsetTimeMatch){return parseFloat(offsetTimeMatch[1]*metricConversion[offsetTimeMatch[2]]);}
clockTimeMatch=pTimeExpr.match(clockTimeRxp);if(clockTimeMatch){hours=parseInt(clockTimeMatch[1],10);minutes=parseInt(clockTimeMatch[2],10);seconds=parseInt(clockTimeMatch[3],10);fraction=parseFloat(clockTimeMatch[4]);frame=parseInt(clockTimeMatch[5],10);subframe=parseFloat(clockTimeMatch[6]);result=(secondsPerHour*hours)+
(secondsPerMinute*minutes)+
(seconds);if(fraction){result+=fraction;}else if(frame){frame=Math.max(0,Math.min(defaultFrameRate,frame));if(subframe){subframe=Math.max(0,Math.min(defaultSubFrameRate,subframe));frame+=(subframe/defaultSubFrameRate);}
result+=(frame/defaultFrameRate);}
return result;}},parseStyleAttribute:function(node){var
style=node.getAttribute('style');if(style){node.removeAttribute('style');this.addClass(node,'bc-ttml-'+style);}
if(styleOptions.set){this.addClass(node,'bc-default-style');}
return node;},getPropertiesByTag:function(tag){return tagsMap[tag];},addRule:function(selector,decls){var rule;if(!decls||!decls.length){return;}
if(!styleNode.parentNode){document.body.appendChild(styleNode);}
rule='.'+selector+"{\n  "+decls.join(';\n  ')+';'+"\n}";rule=document.createTextNode(rule);styleNode.appendChild(rule);}});brightcove.player.api.utils.CaptionsStyleParser.defaultFontFamily=defaultFontFamily;brightcove.player.api.utils.CaptionsStyleParser.defaultFontPX=cellsToPx('1c');brightcove.player.api.utils.CaptionsStyleParser.getLanguage=getLanguage;}());brightcove.player.api.utils.SortedCaptionList=brightcove.player.core.Class.extend({constructor:function(){this.elements=[];},add:function(pElement){this.elements.splice(this.ceil(pElement),0,pElement);},ceil:function(pElement){var start=0,end=this.elements.length,i=Math.floor(end/2);while(i>=start&&i<end){if(this.startsEarlier(pElement,this.elements[i])){end=i;i=Math.floor(((i-start)/2)+start);}else{start=i;i=Math.ceil(((end-i)/2)+i);}}
return i;},startsEarlier:function(pLeft,pRight){return pLeft.begin<=pRight.begin;},get:function(pIndex){return this.elements[pIndex];},asArray:function(){return this.elements;}});brightcove.player.ui.themes.icons.CaptionsIcon=brightcove.player.ui.themes.icons.Icon.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.themes.icons.CaptionsIcon");this.image.src=this.assetPath+"/flat-light/captions.png";this.width=16;this.height=12;}});brightcove.player.ui.themes.icons.ListArrowIcon=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.themes.icon.ListArrowIcon");this.down=false;this.canvas=brightcove.createElement("canvas");this.canvas.style.position="absolute";this.context=this.canvas.getContext("2d");},render:function(){this._super();this.selectColors();this.append(this.canvas);this.refresh();},selectColors:function(){if(this.styleFormat){this.color=this.styleFormat.getValue("icons")||"#000000";}else{this.color="#000000";}},refresh:function(){if(!this.initialized)return;this.canvas.width=5;this.canvas.height=3;this.canvas.style.left=Math.floor((this.width-5)/2)+"px";this.canvas.style.top=Math.floor((this.height-3)/2)+"px";var context=this.canvas.getContext("2d");context.clearRect(0,0,this.width,this.height);context.fillStyle=this.color;if(this.down){context.fillRect(2,2,1,1);context.fillRect(1,1,3,1);context.fillRect(0,0,2,1);context.fillRect(3,0,2,1);}else{context.fillRect(2,0,1,1);context.fillRect(1,1,3,1);context.fillRect(0,2,2,1);context.fillRect(3,2,2,1);}},enable:function(){if(this.disabled){this.disabled=false;this.refresh();}},disable:function(){if(!this.disabled){this.disabled=true;this.refresh();}},pointDown:function(){this.down=true;},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);this.refresh();}});brightcove.player.ui.themes.icons.PauseIcon=brightcove.player.ui.themes.icons.Icon.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.themes.icons.PauseIcon");this.image.src=this.assetPath+"/flat-light/pause.png";this.width=12;this.height=13;}});brightcove.player.ui.themes.icons.PlayIcon=brightcove.player.ui.themes.icons.Icon.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.themes.icons.PlayIcon");this.image.src=this.assetPath+"/flat-light/play.png";this.width=12;this.height=13;}});brightcove.player.ui.themes.icons.VolumeIcon=brightcove.player.ui.themes.icons.Icon.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.themes.icons.VolumeIcon");this.image.src=this.assetPath+"/flat-light/volume.png";this.width=17;this.height=14;}});(function(){var AdEvent=brightcove.player.events.AdEvent,MediaEvent=brightcove.player.events.MediaEvent,delta=1,dispatchBegin=function(videoElement){videoElement.hasBegun=true;videoElement.dispatchedStreamStart=true;videoElement.dispatchEvent(new MediaEvent(MediaEvent.BEGIN,videoElement.getPosition(),videoElement.getDuration()));videoElement.isCueing=false;};brightcove.player.html.video.VideoElement=brightcove.player.html.Element.extend({constructor:function(pSprite){this.listeners={};this.events=this.generateEvents();this.volume=1;this.loaded=false;this.canAutoplay=false;this.hasBrowserControls=false;this.createVideo(pSprite);this.isHLSPlayback=false;this.supportsInPagePlayback=true;this.isCueing=false;this.deviceSupportsAdvertising=true;this.positionAtLastTimeUpdate=0;this.seekThreshold=0.8;var PlayerContext=brightcove.player.PlayerContext;this.playerContext=PlayerContext.getInstance();},createVideo:function(pSprite){pSprite.append($(this.createHtmlString()));this.video=this.getVideo();this._element=$(this.video);this.bindEventListeners();this.bindVideoElementDebug();this.css({position:"absolute","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_CREATED));},getVideo:function(){return document.getElementById("bcVideo");},createHtmlString:function(){var pString="<video display=\"none\" id=\"bcVideo\" ";if(this.disablePreloading()){pString+="preload=\"none\" ";}
pString+="></video>";return pString;},setSize:function(pWidth,pHeight){this.width=pWidth;this.height=pHeight;if(this._element){this._element.attr("height",pHeight);this._element.attr("width",pWidth);}},setContent:function(pUrl,pDuration){this.url=pUrl;this.duration=pDuration;this.dispatchedStreamStart=false;this.loaded=false;this.durationChanged=false;this.resetEndReached();if(!this.hasBegun){this._element.hide();}
this.hasBegun=false;this.video.src=pUrl;this.positionAtLastTimeUpdate=0;},play:function(){if(!this.loaded){this.load(true);}else{this.video.play();}},pause:function(){if(this.playerContext.adPlaying){return;}
this.video.pause();},isPaused:function(){if(this.video){return this.video.paused;}
return true;},togglePlayback:function(){if(this.playerContext.adPlaying){return;}
if(!this.hasBrowserControls&&!this.video.controls){if(this.isPaused()){this.play();}else{this.pause();}}},loadForLaterPlayback:function(){},getCurrentSrc:function(){return this.video.currentSrc;},load:function(pStartPlayback){if(this.playerContext.adPlaying){return;}
if(!this.loaded){if(this._element.attr("src")&&this._element.attr("src").length>0){setTimeout($.proxy(function(){this.completeLoad(pStartPlayback);},this),50);}}},completeLoad:function(pStartPlayback){if(this.playerContext.adPlaying){return;}
if(!this.dispatchedStreamStart){this.disableBrowserControls();}
this.loaded=true;this._element.show();if(pStartPlayback){if(this.canAutoplay){this.play();}else{this.canAutoplay=true;}}},show:function(){this._element.show();},setVolume:function(pLevel){if(this.playerContext.adPlaying){return;}
this.volume=Math.max(0,Math.min(1,pLevel));if(this.video){this.video.volume=this.volume;}},seek:function(pPos){if(pPos==undefined){return;}
if(this.playerContext.adPlaying){return;}
if(this.video&&this.video.readyState>1){try{var videoSeekableEnd=this.video.seekable.end(0);var videoSeekableStart=this.video.seekable.start(0);if(videoSeekableEnd>=pPos&&videoSeekableStart<=pPos){if(Math.floor(videoSeekableEnd)==Math.floor(pPos)){this.video.currentTime=videoSeekableEnd;}else{this.video.currentTime=pPos;}}}catch(e){var Tracer=brightcove.player.utils.Tracer;Tracer.log(this,e,Tracer.TYPE_MEDIA);}}},clickHandler:function(pEvent){if(this.playerContext.adPlaying){return;}
this.togglePlayback();},enableBrowserControls:function(){if(!this.hasBrowserControls){this.hasBrowserControls=true;if(this._element){this._element.attr("controls","controls");}}},disableBrowserControls:function(){if(this.hasBrowserControls){this.hasBrowserControls=false;if(this._element){this._element.removeAttr("controls");}}},timeupdateHandler:function(timeupdateEvent){var position=this.getPosition(),duration,EventType;if(this.playerContext.adPlaying){EventType=AdEvent;duration=this.video.duration;}else{EventType=MediaEvent;duration=this.getDuration();if(position!=this.positionAtLastTimeUpdate&&Math.abs(position-this.positionAtLastTimeUpdate)>this.seekThreshold){this.dispatchEvent(new MediaEvent(MediaEvent.SEEK_NOTIFY,position,duration));}
this.positionAtLastTimeUpdate=position;}
this.dispatchEvent(new EventType(EventType.PROGRESS,position,duration));this.calculateEndReached();},calculateEndReached:function(){if(!this.endReached){this.resetEndReached();}
this.endReached=Math.min(this.endReached,(this.video.duration-this.video.currentTime));},resetEndReached:function(pDuration){this.endReached=pDuration||3;},isComplete:function(){return(this.video.currentTime===this.video.duration);},canplaythroughHandler:function(pEvent){if(this.playerContext.adPlaying){return;}
try{if(this.video.buffered.end(0)==this.video.duration){this._element.trigger("progress");}}catch(e){}},durationchangeHandler:function(pEvent){this.resetEndReached();if(this.playerContext.adPlaying){return;}
this.durationChanged=true;this.setBuffered();this.dispatchEvent(pEvent);},setBuffered:function(){var endBuffer=0;try{endBuffer=this.video.buffered.end(0);}catch(e){}
this._element.trigger(MediaEvent.BUFFERED,[0,endBuffer]);},getFractionBuffered:function(){var Tracer=brightcove.player.utils.Tracer;var currentBuffer=0;if(this.video.buffered.length){if(this.video.duration){currentBuffer=(this.video.buffered.end(0)/this.video.duration);}else{Tracer.debug(this,"Unable to calculate the buffered percent: the video element duration is undefined.",Tracer.TYPE_DEBUG);}}else{Tracer.debug(this,"Unable to calculate the buffered percent: the video element buffered.length value is 0.",Tracer.TYPE_DEBUG);}
return currentBuffer;},playHandler:function(pEvent){var EventType;if(this.playerContext.adPlaying){EventType=AdEvent;}else{EventType=MediaEvent;this.hasBegun=true;this.dispatchedStreamStart=true;}
this.dispatchEvent(new EventType(EventType.PLAY,this.getPosition(),this.getDuration()));},loadedmetadataHandler:function(pEvent){this.loadedmetadata=true;},pauseHandler:function(pEvent){this.pauseHandlerCalled=true;var duration=this.getDuration();var position=this.getPosition();if(this.isComplete()){if(this.dispatchedStreamStart){if(this.playerContext.adPlaying){return;}
this.disableBrowserControls();position=duration;this.dispatchEvent(new MediaEvent(MediaEvent.STOP,position,duration));this.dispatchEvent(new MediaEvent(MediaEvent.COMPLETE,position,duration));$(document.body).trigger("list-advance-check");$(document.body).trigger(MediaEvent.COMPLETE);this.dispatchedStreamStart=false;return;}
return;}
this.dispatchEvent(new MediaEvent(MediaEvent.STOP,position,duration));},loadstartHandler:function(pEvent){this._element.unbind('timeupdate.loadstart-bc').bind('timeupdate.loadstart-bc',$.proxy(this.onTimeUpdate,this));if(this.playerContext.adPlaying){return;}
this.dispatchEvent(new MediaEvent(MediaEvent.LOAD_START,this.getPosition(),this.getDuration()));},onTimeUpdate:function(){if(!this.video||this.video.paused){return;}
this._element.unbind('timeupdate.loadstart-bc',$.proxy(this.onTimeUpdate,this));if(this.playerContext.adPlaying){this.isCueing=false;this.dispatchEvent(new AdEvent(AdEvent.BEGIN));}else{dispatchBegin(this);}},seekedHandler:function(event){var self=this;this._element.unbind('timeupdate.bc');if(this.video.currentTime>this.video.seekable.start(0)+delta){return;}
if(!this.video.paused){if(this.playerContext.adPlaying){this.isCueing=false;this.dispatchEvent(new AdEvent(AdEvent.BEGIN));}else{dispatchBegin(self);}
return;}
if(this.playerContext.adPlaying){this._element.one('timeupdate.bc',function(){this.isCueing=false;this.dispatchEvent(new AdEvent(AdEvent.BEGIN));});return;}
this._element.one('timeupdate.bc',function(){dispatchBegin(self);});},errorHandler:function(pEvent){this.dispatchEvent(new MediaEvent(MediaEvent.ERROR));},getDuration:function(){if(this.video&&this.durationChanged&&!isNaN(this.video.duration)){return this.video.duration;}
if(this.duration){return this.duration;}
return 0;},getPosition:function(){if(this.video&&this.video.currentTime!=undefined){return this.video.currentTime;}
return 0;},setIsHLSPlayback:function(pBool){this.isHLSPlayback=pBool;},setIsCueing:function(pBoolean){this.isCueing=pBoolean;},setCanAutoplay:function(pBoolean){this.canAutoplay=pBoolean;},bindVideoElementDebug:function(){var
debug=brightcove.player.PlayerConfig.getInstance().snippetParameters["videoElementDebug"],i;if(debug!="true"){return;}
for(i=0;i<this.elementEvents.length;i++){if(this.elementEvents[i]=="timeupdate"){continue;}
(function(element,eventName){element.bind(eventName,function(){console.log("Dispatching "+eventName);});})(this._element,this.elementEvents[i]);}},disablePreloading:function(){var linksrc=brightcove.player.PlayerConfig.getInstance().snippetParameters[brightcove.player.PlayerConfig.LINKSRC];if(linksrc==="twitter"){return true;}else{return false;}},resetVideo:function(){},elementEvents:["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"]});})();(function(undefined){var bcv=brightcove.player.html.video,VideoElement=bcv.VideoElement,IOSVideoElement={mousedownHandler:function(){this.togglePlayback();},clickHandler:function(){},loadForLaterPlayback:function(){this.video.load();}};bcv.VideoElement_iOS=VideoElement.extend(IOSVideoElement);})();brightcove.player.html.video.VideoElement_Android=brightcove.player.html.video.VideoElement.extend({constructor:function(pSprite){this._super(pSprite);this.supportsInPagePlayback=false;this.pausedDuringPlayback=false;},isComplete:function(){return this._super()||(this.video.currentTime===0&&(this.endReached<2));},createVideo:function(pSprite){this._super(pSprite);},setContent:function(pUrl,pDuration){clearTimeout(this.playingCheckTimeout);this.durationAvailable=false;if(!pUrl&&this.video&&this.video.error){this.video.preload="none";this._super(pUrl,pDuration);}else{this._super(pUrl,pDuration);if(!this.isCueing){this.play();}}},play:function(){var loaded=this.loaded;this._super();if(loaded){this.playingCheckTimeout=setTimeout($.proxy(function(){this.checkPlaying();},this),50);}},checkPlaying:function(){if(this.playerContext.adPlaying){return;}
this.video.play();},completeLoad:function(pStartPlayback){if(this.playerContext.adPlaying){return;}
if(brightcove.player.utils.PlayerUtil.isChromeForAndroid()){this.video.load();this._super(pStartPlayback);}else{if(!this.dispatchedStreamStart){this.disableBrowserControls();}
this.loaded=true;this._element.show(1,function(){if(pStartPlayback){if(this.canAutoplay){this.play();}else{this.canAutoplay=true;}}});}},pauseHandler:function(pEvent){this._super(pEvent);clearTimeout(this.playingCheckTimeout);},endedHandler:function(pEvent){this.pauseHandler(pEvent);},durationchangeHandler:function(pEvent){this.durationAvailable=this.hasBegun;this._super(pEvent);},setSize:function(pWidth,pHeight){this.width=pWidth;this.height=pHeight;if(this._element&&brightcove.player.utils.PlayerUtil.isChromeForAndroid()){this._element.attr("height",1);this._element.attr("width",1);}},getDuration:function(){if(this.durationAvailable){return this._super();}else if(this.duration){return this.duration;}
return 0;},timeupdateHandler:function(pEvent){var complete=this.isComplete();if(!complete&&this.pausedDuringPlayback){if(this.playerContext.adPlaying){var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.PLAY));}
else{var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.PLAY,this.getPosition(),this.getDuration()));}
this.pausedDuringPlayback=false;}
if(!complete){this._super(pEvent);}},pause:function(){if(this.video){this.video.pause();}},loadForLaterPlayback:function(){this.video.load();}});brightcove.player.html.video.VideoElement_Android_In_Page_Playback=brightcove.player.html.video.VideoElement_Android.extend({constructor:function(pSprite){this._super(pSprite);this.supportsInPagePlayback=true;},sizeVideo:function(){var css,probablyHls,chromeForAndroid=brightcove.player.utils.PlayerUtil.isChromeForAndroid();this._element.removeAttr('height');this._element.removeAttr('width');if(!chromeForAndroid){this._element.parent().css({'height':this.height-10,'left':5,'position':'absolute','top':5,'width':this.width-10});css={'bottom':'0','left':'0','margin':'auto','max-height':'100%','right':'0','position':'absolute','top':'0','width':'100%'};probablyHls=(/\.m3u8?/).test(this.video.src);if(probablyHls){css.height='100%';}}else{this._element.parent().css({'height':this.height,'left':0,'position':'absolute','top':0,'width':this.width});css={'bottom':'0','left':'0','margin':'auto','max-height':'100%','right':'0','position':'absolute','top':'0','width':'100%'};probablyHls=(/\.m3u8?/).test(this.video.src);if(probablyHls){css.height='100%';}}
this.css(css);},playHandler:function(pEvent){this._super(pEvent);this.sizeVideo();},setSize:function(pWidth,pHeight){if(this.isPaused()&&!this.hasBrowserControls){this._super(pWidth,pHeight);}else{this.width=pWidth;this.height=pHeight;if(this._element){this.sizeVideo();}}},isComplete:function(){return((this.video.currentTime>=this.video.duration&&this.video.duration!==0)&&this.video.currentTime!==0);}});brightcove.player.html.video.VideoElement_desktop=brightcove.player.html.video.VideoElement.extend({createVideo:function(pSprite){this.sprite=pSprite;},createVideoWithSource:function(pSrc){var element=brightcove.createElement("video"),self=this;element.id="bcVideo";element.src=pSrc;if(this.disablePreloading()){element.preload="none";}
this.sprite.append(element);this.video=this.getVideo();this.video.volume=this.volume;this._element=$(this.video);this.css({position:"absolute","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});this.bindEventListeners();this.bindVideoElementDebug();if(navigator.vendor&&navigator.vendor.indexOf("Apple")>=0){this._element.bind('ended',function(pEvent){self.pauseHandler(pEvent);});}
this.setSize(this.width,this.height);var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_CREATED));},setContent:function(pUrl,pDuration){this.url=pUrl;this.duration=pDuration;this.playWhenReady=false;this.dispatchedStreamStart=false;this.resetEndReached();if(!this.video){this.createVideoWithSource(pUrl);}else{this.pause();if(!pUrl&&this.video.error){this.video.preload="none";this.video.src=pUrl;}else{this.video.src=pUrl;this.video.load();}
this._element.hide();if(pUrl&&this.autoStart&&!this.isCueing){this.playWhenReady=true;var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.PLAY_ATTEMPT));}}
this.autoStart=true;},play:function(){if(this.video){this.video.play();}},pause:function(){if(this.video){this.playWhenReady=false;this.video.pause();}},completeLoad:function(){if(this.playerContext.adPlaying){return;}
this._element.show();if(!this.dispatchedStreamStart){this.disableBrowserControls();}},canplayHandler:function(){if(this.playerContext.adPlaying){return;}
this.completeLoad();if(this.playWhenReady){this.playWhenReady=false;this.video.play();}}});brightcove.player.html.video.VideoElement_iPad=brightcove.player.html.video.VideoElement_iOS.extend({createVideo:function(pSprite){this.sprite=pSprite;},createVideoWithSource:function(pSrc){this.sprite.append($(this.createHtmlString()));this.video=this.getVideo();if(pSrc){this.video.src=pSrc;}
this.video.volume=this.volume;this._element=$(this.video);this.css({position:"absolute","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});this.bindEventListeners();this.bindVideoElementDebug();this.setSize(this.width,this.height);var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_CREATED));},createHtmlString:function(){var osString=brightcove.userAgent.match(new RegExp("[0-9]+_[0-9]"))[0];var os=parseFloat(osString.replace("_","."));if(brightcove.airPlayEnabled&&os>=4.3){var html="<video display=\"none\" src=\"\" id=\"bcVideo\" ";html+="x-webkit-airplay=\"allow\"></video>";return html;}else{return this._super();}},setContent:function(pUrl,pDuration){if(this._element){this._element.css({opacity:1});}
this.url=pUrl;this.duration=pDuration;this.loaded=false;this.canplayCalled=false;this.playWhenReady=false;this.durationChanged=false;this.dispatchedStreamStart=false;this.resetEndReached();if(!this.video){this.createVideoWithSource(pUrl);}else{if(!pUrl){this.video.src=pUrl;this._element.css({opacity:0});}else if(this.autoStart&&this.isCueing==false){(function(){var
$v=this._element,video=this.video,hasControls=video.hasAttribute('controls'),replay=false,events='playing pause',handler,MediaEvent=brightcove.player.events.MediaEvent;if(hasControls){handler=function(e){if(e.type==='playing'&&!replay){video.pause();}else if(e.type==='pause'&&!replay){replay=true;video.play();}else if(e.type==='playing'&&replay){$v.off(events,handler);video.setAttribute('controls','controls');}};$v.on(events,handler);video.removeAttribute('controls');}
this.video.src=pUrl;this.playWhenReady=true;this.dispatchEvent(new MediaEvent(MediaEvent.PLAY_ATTEMPT));this.video.load();}).call(this);}else{this.video.src=pUrl;}}
this.autoStart=true;},durationchangeHandler:function(pEvent){this._super(pEvent);var duration=this.getDuration();if(duration>0&&!isNaN(this.lastDuration)&&this.lastDuration==duration){this.durationChanged=false;}else{this.lastDuration=duration;}},play:function(){if(this.video){this.video.play();if(!this.canplayCalled){this.playWhenReady=true;this.video.load();}}},pause:function(){if(this.video){this.playWhenReady=false;this.getVideo().pause();}},isComplete:function(){return((this.video.currentTime===this.video.duration)||(isNaN(this.video.duration)&&this.video.currentTime==0));},seek:function(pPos){this._super(pPos);if(pPos==undefined){return;}
if(this.playerContext.adPlaying){return;}
if(this.video&&this.video.readyState>1&&pPos==0){var element=this;var count=0;var checkTime=function(){if(element.getPosition()<0.5){element.timeupdateHandler(null);}else if(count++<100){setTimeout(checkTime,100);}};setTimeout(checkTime,100);}},completeLoad:function(){if(this.playerContext.adPlaying){return;}
if(!this.dispatchedStreamStart){this.disableBrowserControls();}},canplaythroughHandler:function(){if(this.playerContext.adPlaying){this.canplayCalled=true;return;}
this._super();if(!this.canplayCalled){this.canplayCalled=true;this.completeLoad();if(this.playWhenReady){this.playWhenReady=false;this.video.play();}}},pauseHandler:function(pEvent){var that=this;var fullscreenHandler;this._super(pEvent);if(this.isComplete()&&(document.fullscreenEnabled||this.video.webkitDisplayingFullscreen)){fullscreenHandler=function(){setTimeout(function(){that.enableBrowserControls();that.disableBrowserControls();that.video.removeEventListener('webkitendfullscreen',fullscreenHandler,false);},1);};this.video.addEventListener('webkitendfullscreen',fullscreenHandler,false);}}});brightcove.player.html.video.VideoElement_iPad_3_2=brightcove.player.html.video.VideoElement.extend({constructor:function(pSprite){this._super(pSprite);this.deviceSupportsAdvertising=false;},calculateEndReached:function(){this._super();if(this.playerContext.adPlaying){return;}
if(this.isHLSPlayback){if(this.endReached<=0.5){this.endedHandler();}}},isComplete:function(){if(this.isHLSPlayback){return Math.round(this.video.currentTime)===this.video.duration;}else{return this._super();}},setContent:function(pUrl,pDuration){this._super(pUrl,pDuration);this.canplayCalled=false;this.playWhenReady=false;var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.LOAD_START));},durationchangeHandler:function(pEvent){this._super(pEvent);var duration=this.getDuration();if(duration>0&&!isNaN(this.lastDuration)&&this.lastDuration==duration){this.durationChanged=false;}else{this.lastDuration=duration;}},play:function(){this.preventClickToggle=true;setTimeout($.proxy(function(){this.allowClickToggle();},this),1000);if(this.video){this.video.play();if(!this.canplayCalled){this.playWhenReady=true;this.video.load();setTimeout($.proxy(function(){this.shouldPlay();},this),1000);}}},pause:function(){if(this.playerContext.adPlaying){return;}
if(this.video){this.playWhenReady=false;this.video.pause();}},seek:function(pPos){if(pPos==0){pPos=0.1;}
this._super(pPos);},shouldPlay:function(){if(this.playerContext.adPlaying){return;}
this.canplayCalled=true;this.completeLoad();if(this.playWhenReady){this.playWhenReady=false;this.video.play();}}});brightcove.player.html.video.VideoElement_iPad_5_0=brightcove.player.html.video.VideoElement_iPad.extend({createVideoWithSource:function(pSrc){var self=this;this._super();setTimeout(function(){self.video.src=pSrc;},0);}});brightcove.player.html.video.VideoElement_iPhone=brightcove.player.html.video.VideoElement_iOS.extend({constructor:function(pSprite){this._super(pSprite);this.supportsInPagePlayback=false;},createHtmlString:function(){var osString=brightcove.userAgent.match(new RegExp("[0-9]+_[0-9]"))[0];var os=parseFloat(osString.replace("_","."));if(brightcove.airPlayEnabled&&os>=4.3){var html="<video display=\"none\" src=\"\" id=\"bcVideo\" ";html+="x-webkit-airplay=\"allow\"></video>";return html;}else{return this._super();}},setContent:function(pUrl,pDuration){if(this.isCueing){this.canAutoplay=false;}
this._super(pUrl,pDuration);this.video.load();this._element.show();if(this.autoStart&&this.isCueing==false){this.play();}
this.autoStart=true;},play:function(){this.video.play();},unload:function(){},pauseHandler:function(pEvent){var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),adManager=playerConfig.getItem(PlayerConfig.AD_MANAGER),contentManager=brightcove.player.content.ContentManager.getInstance(),shrinkFullscreen;if(this.isComplete()||this.video.duration===NaN){if((adManager&&this.playerContext.adPlaying&&adManager.insertionPoint!=brightcove.player.advertising.InsertionTypes.POSTROLL)||(contentManager.getIsPlaylist()&&contentManager.getAutomaticAdvance())){shrinkFullscreen=false;}else{shrinkFullscreen=true;}
if(brightcove.player.utils.PlayerUtil.isIOSVersionOrGreater(6.1)){shrinkFullscreen=false;}
if(shrinkFullscreen){this.video.webkitExitFullScreen();}}
this._super(pEvent);},setSize:function(pWidth,pHeight){this.width=pWidth;this.height=pHeight;if(this._element){this._element.attr("height",1);this._element.attr("width",1);}},durationchangeHandler:function(pEvent){this._super(pEvent);var duration=this.getDuration();if(duration>0&&!isNaN(this.lastDuration)&&this.lastDuration==duration){this.durationChanged=false;}else{this.lastDuration=duration;}}});brightcove.player.html.video.VideoElement_iPhone_4_1=brightcove.player.html.video.VideoElement_iPhone.extend({completeLoad:function(pStartPlayback){if(this.playerContext.adPlaying){return;}
this.canAutoplay=this.video.autoplay;this._super(pStartPlayback);}});brightcove.player.html.video.VideoElement_iPhone_5_0=brightcove.player.html.video.VideoElement_iPhone.extend({createVideo:function(pSprite){this.sprite=pSprite;},createVideoWithSource:function(pSrc){var self=this;this.sprite.append($(this.createHtmlString()));this.video=this.getVideo();setTimeout(function(){self.video.src=pSrc;},100);this.video.volume=this.volume;this._element=$(this.video);this.css({position:"absolute","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});this.bindEventListeners();this.bindVideoElementDebug();this.setSize(this.width,this.height);var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_CREATED));},setContent:function(pUrl,pDuration){clearTimeout(this.playingCheckTimeout);if(this._element){this._element.css({opacity:1});}
this.url=pUrl;this.duration=pDuration;this.loaded=false;this.canplayCalled=false;this.durationChanged=false;this.dispatchedStreamStart=false;this.resetEndReached();if(!this.video){this.createVideoWithSource(pUrl);}else{if(!this.isCueing){this.video.play();this.video.pause();}
this.video.src=pUrl;if(!pUrl){this._element.css({opacity:0});}else if(this.autoStart&&this.isCueing==false){var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.PLAY_ATTEMPT));this.video.load();this.play();}}
this.autoStart=true;},play:function(){if(this.video){this.video.play();this.playingCheckTimeout=setTimeout($.proxy(function(){this.checkPlaying();},this),50);}},checkPlaying:function(){if(this.playerContext.adPlaying){return;}
this.video.play();},pause:function(){if(this.video){this.video.pause();}},completeLoad:function(){if(this.playerContext.adPlaying){return;}
if(!this.dispatchedStreamStart){this.disableBrowserControls();}},canplaythroughHandler:function(){if(this.playerContext.adPlaying){this.canplayCalled=true;return;}
this._super();},pauseHandler:function(pEvent){clearTimeout(this.playingCheckTimeout);this._super(pEvent);}});brightcove.player.ui.ThemedWidget=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.ThemedWidget");this.complexThemed=true;this.ready=false;},initialize:function(pID){if(this.theme){this._super(pID);this.setReady();}else{this.setElementID(pID);this.superInitialize=this._super;this.themeDirectory=this.themeSet;var id=this.getID();if(id){this.themeSet+=id;}else{this.themeSet+=Math.random();}
this.loadTheme();}},onThemeLoaded:function(pEvent){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var StyleUtil=brightcove.player.ui.themes.StyleUtil;var styles=playerConfig.getItem(PlayerConfig.STYLES);if(styles!=undefined){StyleUtil.assignCSS(this.theme,styles[brightcove.player.ui.themes.ThemeManager.DEFAULT_THEME]);StyleUtil.assignCSS(this.theme,styles[this.definition.tagName]);StyleUtil.assignCSS(this.theme,styles[this.getID()]);}
if(this.styleSheet){StyleUtil.assignCSS(this.theme,this.styleSheet);}
var configProps=playerConfig.getPropertiesForID(this.getID());if(configProps&&configProps.hasOwnProperty("style")){StyleUtil.assignCSS(this.theme,configProps.style);}},onThemeComplete:function(pEvent){var ThemeEvent=brightcove.player.events.ThemeEvent;this.theme.removeEventListener(ThemeEvent.THEME_LOADED,this.onThemeLoaded,this);this.theme.removeEventListener(ThemeEvent.THEME_COMPLETE,this.onThemeComplete,this);var id=this.getID();if(this.superInitialize){this.superInitialize(id);this.setReady();delete this.superInitialize;}else{this.initialize(id);}},loadTheme:function(){var Attributes=brightcove.player.beml.Attributes;var ThemeManager=brightcove.player.ui.themes.ThemeManager;var themeName=this.getAttribute(Attributes.THEME,true);var styleName=this.getAttribute(Attributes.STYLE_FILE,true);var playerConfig=brightcove.player.PlayerConfig.getInstance();var application=playerConfig.getPropertiesForID(brightcove.player.PlayerConfig.APPLICATION);if(themeName.length<1&&application!=null){themeName=application[Attributes.THEME];}
if(styleName.length<1&&application!=null){styleName=application[Attributes.STYLE];}
var acceptedThemes=["Deluxe","Flat","Minimal"];if(acceptedThemes.indexOf(themeName)<0){themeName=ThemeManager.DEFAULT_THEME_NAME;}
this.theme=ThemeManager.getInstance().getTheme(themeName,this.themeDirectory,this.themeSet,styleName);var ThemeEvent=brightcove.player.events.ThemeEvent;this.theme.addEventListener(ThemeEvent.THEME_LOADED,this.onThemeLoaded,this);this.theme.addEventListener(ThemeEvent.THEME_COMPLETE,this.onThemeComplete,this);this.theme.load();},getReady:function(){return this.ready;},setReady:function(){this.ready=true;var Event=brightcove.player.events.Event;this.dispatchEvent(new Event(Event.COMPLETE));}});(function(undefined){var remoteAssetTracking=true;brightcove.player.ui.media.VideoWidget=brightcove.player.ui.ThemedWidget.extend({constructor:function(){remoteAssetTracking=!((self||window).location.search.match(/remoteAssetTracking=false/));this._super();this.classes.push("brightcove.player.ui.media.VideoWidget");this.video=null;this.videoURL=null;this.autoStart=false;this.privacyMode=false;this.contentType=brightcove.player.content.ContentType.MEDIA;},initialize:function(pID){this._super(pID);var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();playerConfig.setItem(PlayerConfig.VIDEO_PLAYER,this);this.autoStart=this.autoStart||playerConfig.snippetParameters[PlayerConfig.AUTOSTART];this.privacyMode=this.privacyMode||(playerConfig.snippetParameters[PlayerConfig.PRIVACY_MODE]==="true");this.preferredBitRate=this.preferredBitRate||playerConfig.snippetParameters[PlayerConfig.DEFAULT_BITRATE];var contentManager=brightcove.player.content.ContentManager.getInstance();contentManager.register(this);contentManager.addEventListener(brightcove.player.events.ContentEvent.NO_CONTENT,this.onContentError,this);contentManager.addEventListener(brightcove.player.events.ContentEvent.CONTENT_NOT_SUPPORTED,this.onContentError,this);playerConfig.getItem(PlayerConfig.PLAYER).setVideoPlayer(this);this.cuePointWatcher=new brightcove.player.ui.media.utils.CuePointWatcher(this);this.cuePointWatcher.addEventListener(brightcove.player.events.CuePointEvent.CUE,this.redispatch,this);var PlayerContext=brightcove.player.PlayerContext;this.playerContext=PlayerContext.getInstance();var PropertyChangeEvent=brightcove.player.events.PropertyChangeEvent;this.playerContext.addEventListener(PropertyChangeEvent.CHANGE,this.onPlayerContextPropertyChange,this);},render:function(){this._super();this.videoDisplay=new brightcove.player.ui.media.VideoDisplay();this.videoDisplay.setSkins({graphic:this.getGraphic("videoBackground")});this.videoDisplay.theme=this.theme;this.videoDisplay.themeSet=this.themeSet;this.videoDisplay.autoStart=this.autoStart;var MediaEvent=brightcove.player.events.MediaEvent;this.videoDisplay.addEventListener(MediaEvent.SEEK_NOTIFY,this.redispatch,this);this.videoDisplay.addEventListener(MediaEvent.BEGIN,this.onMediaBegin,this);this.videoDisplay.addEventListener(MediaEvent.COMPLETE,this.onMediaComplete,this);this.videoDisplay.addEventListener(MediaEvent.PLAY,this.onMediaPlay,this);this.videoDisplay.addEventListener(MediaEvent.STOP,this.onMediaStop,this);this.videoDisplay.addEventListener(MediaEvent.PROGRESS,this.onMediaProgress,this);this.videoDisplay.addEventListener(MediaEvent.VIDEO_CREATED,this.onVideoCreated,this);this.videoDisplay.addEventListener(MediaEvent.ERROR,this.onMediaError,this);var AdEvent=brightcove.player.events.AdEvent;this.videoDisplay.addEventListener(AdEvent.PLAY,this.onAdPlay,this);this.videoDisplay.addEventListener(AdEvent.PROGRESS,this.onAdProgress,this);this.videoDisplay.addEventListener(AdEvent.STOP,this.onAdStop,this);this.videoDisplay.addEventListener(AdEvent.BEGIN,this.redispatch,this);},onPlayerContextPropertyChange:$.noop,onVideoCreated:function(pEvent){var
MediaEvent=brightcove.player.events.MediaEvent,PlayerConfig=brightcove.player.PlayerConfig;this.videoDisplay.removeEventListener(MediaEvent.VIDEO_CREATED,this.onVideoCreated,this);this.dispatchEvent(pEvent);brightcove.player.reporting.TimelineReporter.track(this);},onContentError:function(pEvent){var ErrorEvent=brightcove.player.events.ErrorEvent;if(pEvent&&pEvent.type==brightcove.player.events.ContentEvent.CONTENT_NOT_SUPPORTED){this.handleContentError(ErrorEvent.CONTENT_NOT_SUPPORTED_ON_DEVICE);}else{this.handleContentError(ErrorEvent.NO_CONTENT);}},onContentLoaded:function(pEvent){this.video=pEvent.data;if(this.video){this.loadMediaDTO(this.video);}},onMediaError:function(pEvent){var Reporter=brightcove.player.reporting.Reporter;var MediaEvent=brightcove.player.events.MediaEvent;var mediaURL=this.videoURL||"";var mediaInfo;if(this.contentHasBeenRequested){var ErrorEvent=brightcove.player.events.ErrorEvent;this.handleContentError(ErrorEvent.UNAVAILABLE_CONTENT);type=ErrorEvent.UNAVAILABLE_CONTENT;}
mediaInfo={name:"mediaurl",value:mediaURL};Reporter.sendMediaReport(this.video,brightcove.player.reporting.Goku.MEDIA_ERROR,[mediaInfo]);},onMediaBegin:function(pEvent){if(!this.startTracked){this.startTracked=true;brightcove.player.reporting.Reporter.sendMediaReport(this.video,brightcove.player.reporting.Goku.VIDEO_START);this.dispatchEvent(pEvent);}
this.started=true;},onMediaComplete:function(pEvent){if(!this.endTracked){this.endTracked=true;brightcove.player.reporting.Reporter.sendMediaReport(this.video,brightcove.player.reporting.Metrics.VIDEO_COMPLETE);this.dispatchEvent(pEvent);}},onMediaPlay:function(pEvent){this.dispatchEvent(pEvent);},onAdPlay:$.noop,onMediaStop:function(pEvent){this.dispatchEvent(pEvent);},onAdStop:$.noop,onMediaProgress:function(pEvent){if(this.started&&!this.isPaused()){this.dispatchEvent(pEvent);}},onAdProgress:$.noop,handleContentError:function(pErrorEventType){if(this.playerContext.adPlaying){return;}
var ErrorEvent=brightcove.player.events.ErrorEvent;var ErrorBroker=brightcove.player.api.ErrorBroker.getInstance();var errorEvent=new ErrorEvent(pErrorEventType);this.videoURL=null;if(pErrorEventType!=ErrorEvent.UNAUTHORIZED_CONTENT){this.showErrorMessage(errorEvent.errorType);}else{this.videoDisplay.setContent(null,0);}
ErrorBroker.sendError(errorEvent);},loadMediaDTO:function(pMedia){this.video=pMedia;this.startTracked=false;this.endTracked=false;this.chooseRendition();this.updateCuePoints();this.dispatchChange("video");var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.CHANGE));if(this.videoURL){this.videoDisplay.loadMedia(this.videoURL,this.video.videoStillURL,this.videoDimensions,this.video.length/1000);}
brightcove.player.reporting.Reporter.sendMediaReport(this.video,brightcove.player.reporting.Metrics.VIDEO_IMPRESSION);},chooseRendition:function(){var url;this.videoDimensions={};var renditions=this.video.renditions;this.rendition=null;var ErrorEvent=brightcove.player.events.ErrorEvent;var errorEventType=ErrorEvent.UNAVAILABLE_CONTENT;var isAkamaiHD2=(this.video.controllerType==13||this.video.controllerType==14);var canPlayHLS=brightcove.player.utils.PlayerUtil.canPlayHLS();var useHLSOnAndroid=brightcove.player.utils.PlayerUtil.useHLSOnAndroid(renditions);var hasFLVFullLengthURL=this.video.FLVFullLengthURL&&this.video.FLVFullLengthURL.length!=0;var hasDefaultURL=this.video.defaultURL&&this.video.defaultURL.length!=0;var hlsURL;if(hasFLVFullLengthURL&&this.video.FLVFullLengthURL.indexOf(".m3u8")!=-1){hlsURL=this.video.FLVFullLengthURL;}
if(!hlsURL&&hasDefaultURL&&this.video.defaultURL.indexOf(".m3u8")!=-1){hlsURL=this.video.defaultURL;}
if(!hlsURL){for(var i in renditions){if(renditions[i].videoCodec=="H264"&&renditions[i].defaultURL&&renditions[i].defaultURL.indexOf(".m3u8")!=-1){hlsURL=renditions[i].defaultURL;break;}}}
if(!hlsURL&&!url&&isAkamaiHD2&&(canPlayHLS||useHLSOnAndroid)){url=this.generateAkamaiHD2RenditionURL();if(url){this.videoDisplay.video.setIsHLSPlayback(true);}}
if(!url&&hlsURL&&canPlayHLS){url=hlsURL;this.videoDisplay.video.setIsHLSPlayback(true);}
if(!url&&hlsURL){if(useHLSOnAndroid){url=hlsURL;this.videoDisplay.video.setIsHLSPlayback(true);}
else{errorEventType=ErrorEvent.HLS_NOT_SUPPORTED;}}
if(!url&&!this.video.FLVFullLengthStreamed){if(this.video.FLVFullCodec==3&&this.video.FLVFullLengthURL!=null&&this.video.FLVFullLengthURL.indexOf(".m3u8")==-1){url=this.video.FLVFullLengthURL;}
var targetEncoding=this.preferredBitRate?this.preferredBitRate:512000;var rendition;for(i in renditions){if(renditions[i].videoCodec!="H264"||!renditions[i].defaultURL||renditions[i].defaultURL.indexOf(".m3u8")!=-1){continue;}
if(!rendition||Math.abs(renditions[i].encodingRate-targetEncoding)<Math.abs(rendition.encodingRate-targetEncoding)){rendition=renditions[i];url=rendition.defaultURL;this.videoDimensions.width=rendition.frameWidth;this.videoDimensions.height=rendition.frameHeight;}}
if(rendition){this.rendition=rendition;}
if(url){errorEventType=null;}}
if(!url&&!errorEventType){errorEventType=ErrorEvent.VIDEO_CODEC_NOT_SUPPORTED;}
if(url&&url=="UNAUTHORIZED"){this.contentHasBeenRequested=true;this.handleContentError(ErrorEvent.UNAUTHORIZED_CONTENT);}
else if(url){this.contentHasBeenRequested=true;this.video.FLVFullLengthURL=url;if(remoteAssetTracking||!this.video.FLVFullLengthRemote){url=brightcove.player.utils.MediaUtil.addTrackingQueryArgs(url,this.video);}
this.videoURL=url;}else{this.contentHasBeenRequested=false;this.handleContentError(errorEventType);}},generateAkamaiHD2RenditionURL:function(){var streamArray=new Array();var k=0;var queryArgs=new Array();var urlParts=new Array();var matching=true;var prefix="";var index=0;var test="";var suffix="";var targetURL="";var splitTargetURLi="";var signature="";for(r=0;this.video.renditions&&r<this.video.renditions.length;r++){if(this.video.renditions[r].defaultURL.match(/\/i\/|\/z\//)){streamArray.push(this.video.renditions[r]);}}
if(!streamArray||streamArray.length==0||streamArray.length==1){if(streamArray&&streamArray.length==1){targetURL=streamArray[0].defaultURL;}
else{targetURL=this.video.FLVFullLengthURL;if(!targetURL||!targetURL.match(/\/i\/|\/z\//)){return null;}}
urlParts=targetURL.split("?");targetURL=urlParts[0];targetURL=targetURL.replace("/z/","/i/");if(targetURL.indexOf("/master.m3u8")<0){targetURL=targetURL.replace(/\/*$/,"/master.m3u8");}
if(urlParts[1]){targetURL=targetURL+"?"+urlParts[1];}
return targetURL;}
for(k=0;k<streamArray.length;k++){if(!streamArray[k]||!streamArray[k].defaultURL){return null;}
queryArgs[k]=streamArray[k].defaultURL.split("?")[1];streamArray[k].defaultURL=streamArray[k].defaultURL.split("?")[0];}
while(matching){prefix=test;test=(streamArray[0].defaultURL).slice(0,index+1);for(k=0;k<streamArray.length;k++){if(streamArray[k].defaultURL.slice(0,index+1)!=test){matching=false;break;}}
index++;}
index=1;matching=true;test="";while(matching){suffix=test;test=(streamArray[0].defaultURL).slice(-index);for(k=0;k<streamArray.length;k++){if(streamArray[k].defaultURL.slice(-index)!=test||streamArray[k].defaultURL.slice(prefix.length,streamArray[k].defaultURL.length-index).length<2){matching=false;break;}}
index++;}
for(k=0;k<streamArray.length;k++){signature+=(k==0?"":",")+streamArray[k].defaultURL.slice(prefix.length,streamArray[k].defaultURL.length-suffix.length);}
targetURL=prefix+","+signature+","+suffix+".csmil/master.m3u8";for(k=0;k<streamArray.length;k++){if(queryArgs[k]){targetURL=targetURL+"?"+queryArgs[k];break;}}
splitTargetURL=targetURL.split("/");splitTargetURL[3]="i";targetURL=splitTargetURL.join("/");return targetURL;},showErrorMessage:function(pMessageKey){var labelManager=brightcove.player.ui.labels.LabelManager.getInstance();this.videoDisplay.loadError(labelManager.getLabel(pMessageKey));},displayMessage:function(pMessageKey){var labelManager=brightcove.player.ui.labels.LabelManager.getInstance();this.videoDisplay.displayMessage(labelManager.getLabel(pMessageKey));},setVideo:function(pVideo){if(pVideo){this.loadMediaDTO(pVideo);}},play:function(){this.videoDisplay.play();},pause:function(){this.videoDisplay.pause();},seek:function(pTime){this.videoDisplay.seek(pTime);},isPaused:function(){return this.videoDisplay.isPaused();},getDuration:function(){var duration=this.videoDisplay.getDuration();if(duration==0&&this.video){duration=this.video.length/1000;}
return duration;},getPosition:function(){return this.videoDisplay.getPosition();},getVideoTag:function(){if(this.videoDisplay){return this.videoDisplay.getVideo();}
return null;},setIsCueing:function(pBoolean){this.videoDisplay.setIsCueing(pBoolean);},setCanAutoplay:function(pBoolean){this.videoDisplay.setCanAutoplay(pBoolean);},showOverlayMenu:function(pForceReveal){this.videoDisplay.showOverlayMenu(pForceReveal);},updateCuePoints:function(pCuePoints){if(!this.video){return;}
this.cuePointWatcher.updateCuePoints(this.video.cuePoints);},addCuePoints:function(cuePoints){this.cuePointWatcher.addCuePoints(cuePoints);}});})();var _V_={merge:function(obj1,obj2,safe){if(!obj2){obj2={};}
for(var attrname in obj2){if(obj2.hasOwnProperty(attrname)&&(!safe||!obj1.hasOwnProperty(attrname))){obj1[attrname]=obj2[attrname];}}
return obj1;},extend:function(obj){this.merge(this,obj,true);}};_V_.extend({getData:function(elem){var id=elem[_V_.expando];if(!id){id=elem[_V_.expando]=_V_.guid++;_V_.cache[id]={};}
return _V_.cache[id];},removeData:function(elem){var id=elem[_V_.expando];if(!id){return;}
delete _V_.cache[id];try{delete elem[_V_.expando];}catch(e){if(elem.removeAttribute){elem.removeAttribute(_V_.expando);}else{elem[_V_.expando]=null;}}},createElement:function(tagName,attributes){var el=document.createElement(tagName),attrname;for(attrname in attributes){if(attributes.hasOwnProperty(attrname)){if(attrname.indexOf("-")!==-1){el.setAttribute(attrname,attributes[attrname]);}else{el[attrname]=attributes[attrname];}}}
return el;},each:function(arr,fn){if(!arr||arr.length===0){return;}
for(var i=0,j=arr.length;i<j;i++){fn.call(this,arr[i],i);}},eachProp:function(obj,fn){if(!obj){return;}
for(var name in obj){if(obj.hasOwnProperty(name)){fn.call(this,name,obj[name]);}}},proxy:function(context,fn,uid){if(!fn.guid){fn.guid=_V_.guid++;}
var ret=function(){return fn.apply(context,arguments);};ret.guid=(uid)?uid+"_"+fn.guid:fn.guid;return ret;},uc:function(string){return string.charAt(0).toUpperCase()+string.slice(1);},currentTime:function(seconds){if(seconds!==undefined){this.values.lastSetCurrentTime=seconds;this.techCall("setCurrentTime",seconds);if(this.manualTimeUpdates){this.trigger("timeupdate");}
return this;}
return this.values.currentTime=(this.techGet("currentTime")||0);},round:function(num,dec){if(!dec){dec=0;}
return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);},addClass:function(element,classToAdd){if((" "+element.className+" ").indexOf(" "+classToAdd+" ")==-1){element.className=element.className===""?classToAdd:element.className+" "+classToAdd;}},removeClass:function(element,classToRemove){if(element.className.indexOf(classToRemove)==-1){return;}
var classNames=element.className.split(" ");classNames.splice(classNames.indexOf(classToRemove),1);element.className=classNames.join(" ");},formatTime:function(seconds,guide){guide=guide||seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);if(isNaN(seconds)||!isFinite(seconds)){return"--:--";}
h=(h>0||gh>0)?h+":":"";m=(((h||gm>=10)&&m<10)?"0"+m:m)+":";s=(s<10)?"0"+s:s;return h+m+s;},blockTextSelection:function(){document.body.focus();document.onselectstart=function(){return false;};},unblockTextSelection:function(){document.onselectstart=function(){return true;};},isEmpty:function(object){for(var prop in object){return false;}
return true;},isEmpty:function(object){for(var prop in object){return false;}
return true;},expando:"vdata"+(new Date).getTime(),support:{},guid:1,cache:{}});if("getBoundingClientRect"in document.documentElement){_V_.findPosX=function(el){var box;try{box=el.getBoundingClientRect();}catch(e){}
if(!box){return 0;}
var docEl=document.documentElement,body=document.body,clientLeft=docEl.clientLeft||body.clientLeft||0,scrollLeft=window.pageXOffset||body.scrollLeft,left=box.left+scrollLeft-clientLeft;return left;};}else{_V_.findPosX=function(el){var curleft=el.offsetLeft;el=obj.offsetParent;while(el){curleft+=el.offsetLeft;el=obj.offsetParent;}
return curleft;};}
brightcove.player.ui.Block=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.css("overflow","hidden");this.classes.push("brightcove.player.ui.Block");this.div=brightcove.createElement("div");this.element.appendChild(this.div);this.canvas=brightcove.createElement("canvas");this.canvas.style.position="absolute";this.div.appendChild(this.canvas);this.setDivAndCanvasDimensions();this.state="active";},initialize:function(pID){this._super(pID);},render:function(){var graphic=this.getGraphic("graphic");if(!(graphic instanceof String)&&graphic){this.skin=new graphic();this.skin.state=this.state;}
this.setSize(this.width,this.height);},draw:function(){if(this.skin instanceof brightcove.player.ui.themes.skins.Skin){this.skin.draw(this);}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.setDivAndCanvasDimensions();this.draw();}},setDivAndCanvasDimensions:function(){this.div.style.width=this.width+"px";this.div.style.height=this.height+"px";this.canvas.width=this.width;this.canvas.height=this.height;this.canvas.style.width=this.width+"px";this.canvas.style.height=this.height+"px";},scale:function(pWidth,pHeight,pDuration){this._super(pWidth,pHeight,pDuration);this.setDivAndCanvasDimensions();this.draw();},setColor:function(pColor){this.div.style.background=pColor;},setGradient:function(pFrom,pTo){this.div.style.background="-webkit-gradient(linear, 0 0, 0 100%, from("+pFrom+"), to("+pTo+"))";},setState:function(pState){if(pState==this.state)return;this.state=pState;if(this.skin instanceof brightcove.player.ui.themes.skins.Skin){this.skin.state=this.state;this.skin.draw(this);}},setEnabled:function(pEnabled){this._super(pEnabled);this.draw();}});brightcove.player.ui.beml.BEMLContainer=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.beml.BEMLContainer");this.bindableDataName="data";this.configuredProperties={};this.externalModules={};this.interpreter=brightcove.player.beml.Interpreter.getInstance();},render:function(){this._super();if(this.getAttribute(brightcove.player.beml.Attributes.SHOW_BACK).toString()!=="false"){var graphic=this.getGraphic("graphic");if(graphic){this.background=new brightcove.player.ui.Block();this.background.setSize(this.width,this.height);this.background.themeSet=this.themeSet;this.background.setSkins({graphic:graphic});this.background.styleFormatName=this.backgroundStyleName||this.styleFormat.name;this.background.initialize();this.addChild(this.background);}}
if(this.definition!=null)this.setLayout();},getContainer:function(){if(this.container){return this.container;}
var parent=this.parent;while(parent){if(parent instanceof brightcove.player.ui.beml.BEMLContainer)return parent;parent=parent.parent;}
return null;},updateBindings:function(){this.elements[this.bindableDataName]=this.bindableData;this.interpreter.updateBindings(this,this.bindings);},attachContent:function(){this.elements[this.bindableDataName]=this.bindableData;this.interpreter.removeBindings(this.bindings);this.bindings=[];this.elementsNotReady=[];this.layoutBox=this.interpreter.createRootLayoutBox(this);this.createExternalBindings();},layoutContent:function(){var contentWidth=this.setWidth||String(this.width);var contentHeight=this.setHeight||String(this.height);this.layoutBox.setSize(Number(contentWidth),Number(contentHeight));},setLayout:function(){this.removeAllContent();this.boxes={};this.elements={};for(var i in this.externalModules){this.elements[i]=this.externalModules[i];}
this.boxFills={};this.content=new brightcove.player.core.Sprite();this.content.setSize(width,height);this.content.initialize("content");this.boxContent=new brightcove.player.core.Sprite();this.boxContent.setSize(width,height);this.boxContent.initialize("boxContent");this.elementContent=new brightcove.player.core.Sprite();this.elementContent.setSize(width,height);this.elementContent.initialize("elementContent");this.content.addChild(this.boxContent);this.content.addChild(this.elementContent);this.addChild(this.content);var Attributes=brightcove.player.beml.Attributes;var width=(this.getAttribute(Attributes.WIDTH)==undefined||(Number(this.getAttribute(Attributes.WIDTH))==0))?this.width:Number(this.getAttribute(Attributes.WIDTH));var height=(this.getAttribute(Attributes.HEIGHT)==undefined||(Number(this.getAttribute(Attributes.HEIGHT))==0))?this.height:Number(this.getAttribute(Attributes.HEIGHT));this.superSetSize(width,height);this.attachContent();this.setSizeAttributes(this.getAttribute(Attributes.WIDTH),this.getAttribute(Attributes.HEIGHT));this.layoutContent();if(this.elementsNotReady.length<1){this.completeInitialization();}},removeAllContent:function(){for(var i in this.elements){if(this.elements[i].cleanUp){this.elements[i].cleanUp();}}
this.removeChild(this.content);this.containsAdContext=false;},completeInitialization:function(){this.interpreter.createBindings(this,this.bindings);this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.COMPLETE));},onElementComplete:function(pEvent){for(var i=this.elementsNotReady.length-1;i>-1;i--){if(this.elementsNotReady[i]==pEvent.target){this.elementsNotReady[i].removeEventListener(brightcove.player.events.Event.COMPLETE,this.onElementComplete,this);this.elementsNotReady.splice(i,1);if(this.getReady()){this.completeInitialization();}
break;}}},createExternalBindings:function(){if(this.externalModules&&this.externalModules.hasOwnProperty("parameters")){this.interpreter.addElementToBindings(pModule.parameters,this.bindings);}},attachElement:function(pElement,pParent){var layoutElement=this.interpreter.createElement(pElement);if(layoutElement instanceof brightcove.player.ui.UIObject){if(this.getAttribute("themeSet")){pElement.setAttribute("themeSet",getAttribute("themeSet"));}
layoutElement.definition=pElement;this.interpreter.addElementToBindings(pElement,this.bindings);this.interpreter.configurePropertiesForElement(layoutElement,this.getConfiguredPropertiesForComponent(layoutElement));layoutElement.container=this;layoutElement.layoutBox=pParent;if(layoutElement instanceof brightcove.player.ui.UIObject){layoutElement.globalStyles=this.globalStyles;if(this.passThroughTheme||this.passThroughStyles){layoutElement.themeSet=this.themeSet;}
if(this.passThroughStyles){layoutElement.styleFormatName=this.styleFormat.name;layoutElement.skins=this.skins;}}
layoutElement.initialize(layoutElement.getID());this.elementContent.addChild(layoutElement);this.interpreter.sizeElement(layoutElement);this.setElement(layoutElement.getID(),layoutElement);if(layoutElement.getReady&&!layoutElement.getReady()){this.elementsNotReady.push(layoutElement);layoutElement.addEventListener(brightcove.player.events.Event.COMPLETE,this.onElementComplete,this);}
return layoutElement;}
return null;},removeElement:function(pElement){this.interpreter.removeBindingForElement(pElement,this.bindings);if(pElement instanceof brightcove.player.beml.LayoutBox){pElement.removeAllElements();this.deleteBoxReference(pElement);var background=this.boxFills[pElement.getID()];if(background&&this.boxContent.contains(background)){this.boxContent.removeChild(background);}
pElement.removeEventListener(brightcove.player.events.Event.MOVE,this.onLayoutBoxMove,this);delete this.boxFills[pElement.getID()];}else{if(pElement.hasOwnProperty("parent")&&pElement.parent){pElement.parent.removeChild(pElement);}
if(pElement.cleanUp){pElement.cleanUp();}
this.removeElementReference(pElement.getID());}},fillBox:function(pBox,pColor,pImage){var background=this.boxFills[pBox.getID()];if(background)background.fillBox(pBox,pColor,pImage);return background;},attachBox:function(pBox){var background=new brightcove.player.ui.beml.LayoutBoxBackground();background.initialize(pBox.getID());this.boxFills[pBox.getID()]=background;this.boxContent.addChild(background);pBox.addEventListener(brightcove.player.events.Event.MOVE,this.onLayoutBoxMove,this);this.setBoxReference(pBox);this.interpreter.addElementToBindings(pBox.definition,this.bindings);},onLayoutBoxMove:function(pEvent){var target=pEvent.target;if(this.boxFills[target.getID()]){this.boxFills[target.getID()].move(target.getX(),target.getY());}},setBoxReference:function(pBox){this.boxes[pBox.getID()]=pBox;var container=this.getContainer();if(container)container.setBoxReference(pBox);},deleteBoxReference:function(pBox){delete this.boxes[pBox.getID()];var container=this.getContainer();if(container)container.deleteBoxReference(pBox);},refresh:function(){if(this.background){this.background.setSize(this.width,this.height);}
this.layoutContent();},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){if(!this.widthVariable){pWidth=Number(this.setWidth);}
if(!this.heightVariable){pHeight=Number(this.setHeight);}
this.setSizeAttributes(String(pWidth),String(pHeight));this.refresh();}},superSetSize:function(pWidth,pHeight){var wasInitialized=this.initialized;this.initialized=false;this.setSize(pWidth,pHeight);this.initialized=wasInitialized;},resize:function(pWidth,pHeight){this.superSetSize(pWidth,pHeight);this.width=pWidth;this.height=pHeight;if(this.initialized){this.element.width=pWidth;this.element.height=pHeight;if(this.widthVariable){this.setWidth=String(pWidth);}
if(this.heightVariable){this.setHeight=String(pHeight);}
this.refresh();}},setSizeAttributes:function(pWidth,pHeight){this.setWidth=pWidth;this.setHeight=pHeight;this.widthVariable=this.setWidth==""||this.setWidth==brightcove.player.beml.Attributes.VARIABLE;this.heightVariable=this.setHeight==""||this.setHeight==brightcove.player.beml.Attributes.VARIABLE;},getReady:function(){return this.elementsNotReady.length<1;},setBindableData:function(pData){this.bindableData=pData;if(this.initialized)this.updateBindings();},getBindableData:function(){return this.bindableData;},getElement:function(pID){var element=this.elements[pID]||this.boxes[pID];if(element==null){var container=this.getContainer();if(container){element=container.getElement(pID);}else{element=this.externalModules[pID];}}
return element;},setElement:function(pID,pElement){this.elements[pID]=pElement;var container=this.getContainer();if(container)container.setElement(pID,pElement);},removeElementReference:function(pID){delete this.elements[pID];var container=this.getContainer();if(container)container.removeElementReference(pID);},getLayoutRoot:function(){return this.layoutBox;},getConfiguredPropertiesForComponent:function(pLayoutElement){if(pLayoutElement instanceof brightcove.player.ui.UIObject){return this.configuredProperties[pLayoutElement.getID()];}
return null;},cleanUp:function(){this.interpreter.removeBindings(this.bindings);this._super();}});brightcove.player.ui.beml.IgnoredObject=brightcove.player.ui.UIObject.extend({initialize:function(pID){this._super(pID);this.hide();this.visible=false;},setVisible:$.noop});brightcove.player.ui.beml.LayoutBoxBackground=brightcove.player.ui.GraphicSprite.extend({fillBox:function(pBox,pColor,pImage){var context=this.canvas.getContext("2d");context.clearRect(0,0,this.width,this.height);this.layoutBox=pBox;this.setSize(pBox.width,pBox.height);if(String(pColor)!="undefined"){var alpha=(pColor>>24&255)/255||1;var colorValues=[pColor>>16&255,pColor>>8&255,pColor&255,alpha];context.fillStyle="rgba("+colorValues.join(",")+")";context.fillRect(0,0,this.width,this.height);}
if(pImage&&pImage.length>0){if(pImage!=this.image){this.imageLoaded=false;this.image=pImage;this.imageElement=brightcove.createElement("img");this.imageElement.addEventListener("load",$.proxy(this.onImageLoaded,this));this.imageElement.src=this.image;}else if(this.imageLoaded){context.drawImage(this.imageElement,0,0,this.width,this.height);}}else if(this.image||this.imageElement){this.image="";}},onImageLoaded:function(){var context=this.canvas.getContext("2d");this.imageLoaded=true;context.drawImage(this.imageElement,0,0,this.width,this.height);}});brightcove.player.ui.containers.Image=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.containers.Image");this.alpha=1;this.hAlign=brightcove.player.ui.Alignment.CENTER;this.inset=0;this.scaleMode=brightcove.player.ui.ScaleMode.EXACT_FIT;this.source=null;this.vAlign=brightcove.player.ui.Alignment.MIDDLE;this.url=undefined;this.contentWidth=0;this.contentHeight=0;},initialize:function(pID){this._super(pID);this.canvas=brightcove.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;this.element.appendChild(this.canvas);if(this.source!=null){this.loadImage(this.source);}},loadImage:function(pURL){if(!this.initialized)return;if(pURL&&pURL.length>0){this.loaded=false;this.source=pURL;if(this.imageElement==null){this.imageElement=brightcove.createElement("img");}
var outerScope=this;this.imageElement.addEventListener(brightcove.player.events.Event.LOAD,function(){outerScope.loaded=true;outerScope.contentWidth=this.width;outerScope.contentHeight=this.height;outerScope.renderImage();var Event=brightcove.player.events.Event;outerScope.dispatchEvent(new Event(Event.COMPLETE));},false);this.imageElement.src=this.source;}else{this.renderImage();}},renderImage:function(){if(!this.initialized||!this.loaded){return;}
var imageWidth=0;var imageHeight=0;var scale=1;var ScaleMode=brightcove.player.ui.ScaleMode;var proportion;switch(this.scaleMode){case ScaleMode.NO_SCALE:imageWidth=this.contentWidth;imageHeight=this.contentHeight;break;case ScaleMode.SHOW_ALL:proportion=this.findProportion(this.width,this.height,this.contentWidth,this.contentHeight);imageWidth=proportion.w;imageHeight=proportion.h;break;case ScaleMode.SCALE_DOWN:if(this.contentWidth>this.width||this.contentHeight>this.height){proportion=this.findProportion(this.width,this.height,this.contentWidth,this.contentHeight);imageWidth=proportion.w;imageHeight=proportion.h;}else{imageWidth=this.contentWidth;imageHeight=this.contentHeight;}
break;case ScaleMode.EXACT_FIT:imageWidth=this.width-this.inset*2;imageHeight=this.height-this.inset*2;break;case ScaleMode.NO_BORDER:scale=Math.max(this.width/this.contentWidth,this.height/this.contentHeight);imageWidth=(this.contentWidth-this.inset*2)*scale;imageHeight=(this.contentHeight-this.inset*2)*scale;break;}
var contentX=this.getContentPosition(this.hAlign,this.width,imageWidth);var contentY=this.getContentPosition(this.vAlign,this.height,imageHeight);var context=this.canvas.getContext("2d");context.globalAlpha=this.alpha;context.drawImage(this.imageElement,contentX,contentY,imageWidth,imageHeight);},getContentPosition:function(pAlignment,pDisplayMeasurement,pContentMeasurement){var position=0;switch(pAlignment){case brightcove.player.ui.Alignment.LEFT:case brightcove.player.ui.Alignment.TOP:position=this.inset;break;case brightcove.player.ui.Alignment.CENTER:case brightcove.player.ui.Alignment.MIDDLE:position=((pDisplayMeasurement-pContentMeasurement-this.inset*2)/2)+this.inset;break;case brightcove.player.ui.Alignment.RIGHT:case brightcove.player.ui.Alignment.BOTTOM:position=(pDisplayMeasurement-pContentMeasurement-this.inset);break;}
return position;},mousedownHandler:function(e){this._super();if(this.url){window.open(this.url);}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(!this.initialized||!this.width||!this.height){return;}
this.canvas.width=this.width;this.canvas.height=this.height;this.renderImage();},findProportion:function(pDiplayWidth,pDisplayHeight,pContentWidth,pContentHeight){var ratio=1;if(pDiplayWidth>pDisplayHeight){ratio=pDisplayHeight/pContentHeight;if(pContentHeight<pContentWidth){ratio=((pContentWidth*ratio<pDiplayWidth)?ratio:pDiplayWidth/pContentWidth);}}else{ratio=pDiplayWidth/pContentWidth;if(pContentWidth<pContentHeight){ratio=((pContentHeight*ratio<pDisplayHeight)?ratio:pDisplayHeight/pContentHeight);}}
return{w:pContentWidth*ratio,h:pContentHeight*ratio};},setAlpha:function(pAlpha){this.alpha=pAlpha;if(this.initialized){this.renderImage();}},getAlpha:function(){return this.alpha;},setHAlign:function(pHAlign){this.hAlign=pHAlign;if(this.initialized){this.renderImage();}},getHAlign:function(){return this.hAlign;},setInset:function(pInset){this.inset=pInset;if(this.initialized){this.setSize(this.width,this.height);}},getInset:function(){return this.inset;},setScaleMode:function(pScaleMode){this.scaleMode=pScaleMode;if(this.initialized){this.setSize(this.width,this.height);}},getScaleMode:function(){return this.scaleMode;},setSource:function(pURL){if(this.source==pURL)return;this.source=pURL;if(this.initialized){this.loadImage(pURL);}},getSource:function(){return this.source;},setVAlign:function(pVAlign){this.vAlign=pVAlign;if(this.initialized){this.renderImage();}},getVAlign:function(){return this.vAlign;},getUrl:function(){return this.url;},setUrl:function(pURL){if(pURL&&pURL.length>0){if(pURL.substr(0,4).toLowerCase()!="http"){pURL="http://"+pURL;}}
this.url=pURL;}});brightcove.player.ui.controls.AdvancedSlider=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.controls.AdvancedSlider");this.autoHideSlider=false;this.sliderSize=10;this.wellVerticalInset=0;this.wellHorizontalInset=0;this.useZeroWidth=false;this.currentPosition=0;this.showSliderOnInstantiation=true;this.slideDirection=brightcove.player.ui.ScrollDirection.HORIZONTAL;this.well=new brightcove.player.ui.Block();this.slider=new brightcove.player.ui.Block();this.well.addEventListener(brightcove.player.events.Event.CLICK,this.clickWell,this);this.slider.addEventListener(brightcove.player.events.Event.MOUSEDOWN,this.hookSlider,this);this.slider.addEventListener(brightcove.player.events.TouchEvent.TOUCH_START,this.hookSlider,this);},render:function(){this._super();this.initializeWell();this.initializeSlider();this.calculateMaxPosition();},initializeWell:function(){this.well.setSkins({graphic:this.getGraphic("well")});this.well.themeSet=this.themeSet;this.well.styleFormatName=this.styleFormat.name+".well";this.sizeWell();this.well.initialize();this.addChild(this.well);},sizeWell:function(){if(this.isHorizontal()){this.well.setSize(this.width,this.height-(this.wellVerticalInset*2));this.well.move(0,this.wellVerticalInset);}else{this.well.setSize(this.width-(this.wellHorizontalInset*2),this.height);this.well.move(this.wellHorizontalInset,0);}},initializeSlider:function(){this.slider.setSkins({graphic:this.getGraphic("slider")});this.slider.themeSet=this.themeSet;this.slider.styleFormatName=this.styleFormat.name+".slider";if(this.isHorizontal()){this.slider.setSize(this.sliderSize,this.height);if(this.useZeroWidth){this.slider.move(-this.sliderSize/2,0);}}else{this.slider.setSize(this.width,this.sliderSize);if(this.useZeroWidth){this.slider.move(0,-this.sliderSize/2);}}
this.slider.initialize();if(this.showSliderOnInstantiation){this.showSlider();}},showSlider:function(){if(!this.contains(this.slider)){var a=$("<a href='#'></a>").css({width:"100%",height:"100%",display:"block",cursor:"default",position:"absolute"});$(this.slider.div).append(a);this.addChild(this.slider);}
this.setEnabled(true);},setSliderPosition:function(pPos){pPos=Math.floor(Math.min(this.maxPossible,Math.max(this.minPossible,pPos)));this.currentPosition=pPos;this.currentPercent=(this.currentPosition-this.minPossible)/(this.maxPossible-this.minPossible);if(this.isHorizontal()){this.slider.move(pPos,0);}else{this.slider.move(0,pPos);}
this.dispatchSlideEvent();},dispatchSlideEvent:function(){var Event=brightcove.player.events.Event;var event=new Event(Event.SLIDE,this.currentPercent);this.dispatchEvent(event);},setSlider:function(pX,pY){var wellOffset;var clickPoint;var moveTo;if(this.isHorizontal()){wellOffset=this.well.getLeftOffset();clickPoint=pX-wellOffset;}else{wellOffset=this.well.getTopOffset();clickPoint=pY-wellOffset;}
moveTo=clickPoint-Math.floor(this.sliderSize/2);moveTo=Math.max(this.minPossible,Math.min(this.maxPossible,moveTo));this.setSliderPosition(moveTo);return moveTo;},clickWell:function(pEvent){if(!this.enabled){return;}
return this.setSlider(pEvent.data.clientX,pEvent.data.clientY);},hookSlider:function(pEvent){if(!this.enabled){return;}
TouchEvent=brightcove.player.events.TouchEvent;Event=brightcove.player.events.Event;if(pEvent.type==TouchEvent.TOUCH_START){$(window).bind(TouchEvent.TOUCH_MOVE,$.proxy(this.dragSlider,this)).bind(TouchEvent.TOUCH_END,$.proxy(this.releaseSlider,this));}else{$(window).bind(Event.MOUSEMOVE,$.proxy(this.dragSlider,this)).bind(Event.MOUSEUP,$.proxy(this.releaseSlider,this));}},dragSlider:function(pEvent){TouchEvent=brightcove.player.events.TouchEvent;pEvent.preventDefault();pEvent.stopPropagation();this.well.removeEventListener(brightcove.player.events.Event.CLICK,this.clickWell,this);var x;var y;if(pEvent.type==TouchEvent.TOUCH_MOVE){x=pEvent.originalEvent.touches[0].pageX;y=pEvent.originalEvent.touches[0].pageY;}else{if(pEvent.data==undefined){x=pEvent.clientX;y=pEvent.clientY;}else{x=pEvent.data.clientX;y=pEvent.data.clientY;}}
return this.setSlider(x,y);},releaseSlider:function(pEvent){TouchEvent=brightcove.player.events.TouchEvent;Event=brightcove.player.events.Event;$(window).unbind(Event.MOUSEMOVE).unbind(Event.MOUSEUP).unbind(TouchEvent.TOUCH_MOVE).unbind(TouchEvent.TOUCH_END);setTimeout($.proxy(this.rebindClicks,this),250);},rebindClicks:function(){this.well.addEventListener(brightcove.player.events.Event.CLICK,this.clickWell,this);},checkParents:function(pElement,pTarget){pElement=$(pElement);var parents=pElement.parents();var numParents=parents.length;for(var i=0;i<numParents;i++){if(parents[i]===pTarget){return true;}}
return false;},isHorizontal:function(){return(this.slideDirection==brightcove.player.ui.ScrollDirection.HORIZONTAL);},forward:function(){this.setSliderPosition(this.currentPosition+this.distance);},back:function(){this.setSliderPosition(this.currentPosition-this.distance);},calculateMaxPosition:function(){var size=this.isHorizontal()?this.width:this.height;this.maxPossible=size-((this.useZeroWidth)?(this.sliderSize/2):this.sliderSize);this.minPossible=(this.useZeroWidth)?-(this.sliderSize/2):0;this.distance=Math.max(1,(size-this.maxPossible)/25);},resizeSlider:function(pSize){this.sliderSize=pSize=Math.floor(pSize);this.calculateMaxPosition();if(this.isHorizontal()){this.slider.setSize(pSize,this.slider.height);}else{this.slider.setSize(this.slider.width,pSize);}},scrollToPercent:function(pPercent){var moveTo=pPercent*this.maxPossible;if(this.useZeroWidth){var percentLeft=1-pPercent;moveTo-=Math.round(percentLeft*(this.sliderSize/2));}
this.setSliderPosition(moveTo);},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.calculateMaxPosition();this.sizeWell();this.setSliderPosition(this.currentPercent*(this.maxPossible-this.minPossible));}},setEnabled:function(pEnabled){this._super(pEnabled);if(this.slider){this.enabled?this.slider.show():this.slider.hide();}}});brightcove.player.ui.controls.Button=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.controls.Button");this.clickEvent=brightcove.player.events.Event.CLICK;this.autoSize=true;this.size=12;this.iconName=null;this.iconAlignmentH=brightcove.player.ui.Alignment.CENTER;this.iconAlignmentV=brightcove.player.ui.Alignment.MIDDLE;this.iconOffsetX=0;this.iconOffsetY=0;this.iconScale=1;this.label=null;this.labelAlignmentH=brightcove.player.ui.Alignment.CENTER;this.labelAlignmentV=brightcove.player.ui.Alignment.MIDDLE;this.labelOffsetX=0;this.labelOffsetY=0;this.icon=null;this.labelObject=null;},render:function(){this._super();var face=this.getGraphic("graphic");if(face){this.face=new brightcove.player.ui.Block();this.face.setSize(this.width,this.height);this.face.styleFormatName=this.styleFormat.name;this.face.themeSet=this.themeSet;this.face.setGraphic("graphic",face);this.face.initialize();this.addChild(this.face);}
if(this.iconName){this.setIcon(this.iconName);if(this.icon){this.icon.setX(this.iconOffsetH);this.icon.setY(this.iconOffsetV);this.icon.setScale(this.iconScale);this.icon.initialize();this.addChild(this.icon);}}
if(this.styleFormat.getValue("textSize")){this.size=this.styleFormat.getValue("textSize");}
if(this.label){this.labelObject=new brightcove.player.ui.controls.Label();this.labelObject.autoSize=this.autoSize;this.labelObject.hAlign=this.labelAlignmentH;this.labelObject.vAlign=this.labelAlignmentV;this.labelObject.text=this.label;this.labelObject.size=this.size;this.labelObject.x=this.labelOffsetX;this.labelObject.y=this.labelOffsetY;this.labelObject.initialize();this.addChild(this.labelObject);}
if(this.styleFormat.getValue("text")){this.setColor(this.styleFormat.getValue("text"));}
if(this.styleFormat.getValue("icons")){this.setIconColor(this.styleFormat.getValue("icons"));}
if(this.autoSize){this.calculateSize();}},clickHandler:function(e){if(!this.enabled)return;var event=new brightcove.player.events.Event(this.clickEvent,e);this.dispatchEvent(event);},setLabel:function(pText){this.label=pText;if(this.labelObject){this.labelObject.setText(pText);}},setColor:function(pColor){if(this.labelObject){this.labelObject.setColor(pColor);}},setIconColor:function(pColor){if(this.icon){this.icon.setColor(pColor);}},setFontSize:function(pFontSize){this.labelObject.setFontSize(pFontSize);},setIcon:function(pIconName){this.iconName=pIconName;pIconName+="Icon";if(brightcove.player.ui.themes.icons[pIconName]instanceof Function){this.icon=new brightcove.player.ui.themes.icons[pIconName];}},setEnabled:function(pEnabled){this._super(pEnabled);if(!this.initialized)return;var labelColor=this.styleFormat.getValue("text");var iconColor=this.styleFormat.getValue("icons");if(!this.enabled){var disabledLabelColor=this.styleFormat.getValue("disabledText");if(disabledLabelColor!=undefined){labelColor=disabledLabelColor;}
var disabledIconColor=this.styleFormat.getValue("disabledIcons");if(disabledIconColor!=undefined){iconColor=disabledIconColor;}}
this.setColor(labelColor);this.setIconColor(iconColor);},calculateSize:function(){if(!this.labelObject&&!this.icon){return;}
var width=0;var height=0;var lGap=0;var iGap=0;if(this.icon){width+=this.icon.width;height=this.icon.height;lGap=Math.max(lGap,(this.labelOffsetX-this.icon.width));}
if(this.labelObject){width+=this.labelObject.width;height=(this.labelObject.height>height)?this.labelObject.height:height;iGap=Math.max(iGap,(this.iconOffsetX-this.labelObject.width));}
width+=(this.iconOffsetX>this.labelOffsetX)?iGap:lGap;this.setSize(width,height);if(this.icon&&this.labelObject&&this.icon.height>this.labelObject.height){this.labelObject.setSize(this.labelObject.width,this.icon.height);this.labelObject.autoSize=false;this.labelObject.render();}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.face){this.face.setSize(this.width,this.height);}}});(function(){var Alignment=brightcove.player.ui.Alignment,alignments={},isAndroid=brightcove.player.utils.PlayerUtil.isAndroid(),templateReadyEvent=brightcove.player.events.ExperienceEvent.TEMPLATE_READY,PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance();alignments[Alignment.TOP]={};alignments[Alignment.MIDDLE]={display:'table-cell','vertical-align':'middle',width:'100%'};alignments[Alignment.BOTTOM]={position:'absolute',bottom:0,width:'100%'};brightcove.player.ui.controls.Label=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();var options={style:"overflow: hidden; font-family: Arial, Helvetica, Sans"};this._element.addClass('bc-label');this.label=new brightcove.player.html.Element("div",this.element,options);this.label.insert();this.classes.push("brightcove.player.ui.controls.Label");this.autoSize=false;this.hAlign=brightcove.player.ui.Alignment.LEFT;this.color=undefined;this.size=undefined;this.text="";this.displayedText="";this.translationText="";this.type="body";this.vAlign=brightcove.player.ui.Alignment.TOP;this.underline=false;this.truncate=false;this.htmlEnabled=false;this.font="Arial";this.weight="normal";this.useCDATA=true;this.isTruncated=false;this.selectable=false;},initialize:function(){var multilineAttr,$parent=this._element,$label=this.label._element,isMultiline;if(this.definition&&this.definition.attributes){multilineAttr=this.definition.attributes['multiline'];}
isMultiline=multilineAttr&&multilineAttr.value==="true";this.setMultiline(isMultiline);if(this.type!="body"){this.styleFormatName=this.type;}
this._super();if(!(isMultiline&&this.truncate)){return;}
playerConfig.getItem(PlayerConfig.PLAYER).addEventListener(templateReadyEvent,function(){var height=$parent.outerHeight(),labelHeight=$label.outerHeight(),labelOverflows=height<labelHeight;if(labelOverflows&&!isAndroid){$label.css('-webkit-mask-image','-webkit-linear-gradient(top, rgba(0,0,0,1) '+
(height-10)+'px, rgba(0,0,0,0) '+
height+'px)');}});},render:function(){var labelManager=brightcove.player.ui.labels.LabelManager.getInstance();this._super();if(this.translationText.length>0){this.text=labelManager.getLabel(this.translationText);}else if(this.text!=null&&this.text.length>0){this.text=labelManager.getLabel(this.text);}
this.resize();this.setHAlign(this.hAlign);this.setUnderline(this.underline);this.setSelectable();if(this.size){this.setFontSize(this.size);}
if(this.color){this.setColor(this.color);}
this.refresh();},refresh:function(){this.displayText();this.setVAlign(this.vAlign);if(this.styleFormat){if(this.styleFormat.getValue("text")&&this.color==undefined){this.setColor(this.styleFormat.getValue("text"));}
if(this.styleFormat.getValue("textSize")&&!this.size){this.setFontSize(this.styleFormat.getValue("textSize"));}
if(this.styleFormat.getValue("weight")){if((this.styleFormat.getValue("weight")!=this.weight)&&this.weight=="normal"){this.setWeight(this.styleFormat.getValue("weight"));}}}},setSelectable:function(){if(!this.selectable){this.label.css("cursor","default");}},setText:function(pText){this.text=pText;if(this.text=="null"||this.text==null)this.text="";this.refresh();},setDisplayedText:function(pText){this.displayedText=pText;if(this.displayedText=="null")this.displayedText="";this.label.setHtml(this.displayedText);},setColor:function(pColor){this.color=pColor;this.label.css("color",this.color);},setHAlign:function(pAlignment){this.hAlign=pAlignment;this.label.css("text-align",this.hAlign);this.label.css("padding-left","2px");},setMultiline:function(pMulti){var isMultiline=this.isMultiline();if(pMulti===isMultiline){return;}
if(!pMulti){this.label.css("white-space","nowrap");}else{this.label.css('white-space','normal');}},isMultiline:function(){return this.label.css('white-space')!=='nowrap';},setFontSize:function(pSize){this.size=pSize;this.label.css("font-size",this.size+"px");this.label.css("line-height","1.2em");},setWeight:function(pWeight){this.weight=pWeight;this.label.css("font-weight",this.weight);},setVAlign:function(pAlignment){this.label.css(alignments[pAlignment]);},setUnderline:function(pUnderline){this.underline=pUnderline;this.label.css("text-decoration",(this.underline)?"underline":"none");},displayText:function(){var text=this.sanitizeText(this.text);if(this.truncate){this.label.css('text-overflow','ellipsis');}
this.setDisplayedText(text);},assignInnerHTML:function(pField,pText){if(this.useCDATA){text="<![CDATA["+pText+"]]>";}else{text=pText;}
pField.innerHTML=text;},sanitizeText:function(pText){if(pText==null)return"";pText=new String(pText);pText=pText.replace(/<\S[^><]*>/g,"");return pText.replace(/\\n/g,"<br />");},checkFieldWidth:function(pText){var dummy=this.createDummyField(pText);var width=dummy.offsetWidth;document.body.removeChild(dummy);return width;},createDummyField:function(pText){var dummy=this.createDummy(pText);dummy.style.cssFloat="left";dummy.style.fontFamily=this.font;return dummy;},checkNumberOfLines:function(pText){var dummy=this.createDummyFieldForHeight(pText);var numLines=Math.floor($(dummy).height()/this.size);document.body.removeChild(dummy);return numLines;},calculateTextHeight:function(pText){var lineHeight=this.label.css("line-height");if(lineHeight&&lineHeight.substr(lineHeight.length-2,2)=="em"){lineHeight=lineHeight.substring(0,lineHeight.length-2);textHeight=lineHeight*this.size;}else{textHeight=this.size;}
if(this.isMultiline()){textHeight=this.checkNumberOfLines(pText)*textHeight;}
if(this.underline){textHeight+=10;}
return textHeight;},createDummyFieldForHeight:function(pText){var dummy=this.createDummy(pText);dummy.style.width=(this.width-2)+"px";return dummy;},createDummy:function(pText){var dummy=brightcove.createElement("div");dummy.style.fontSize=this.size+"px";dummy.style.lineHeight="1.2em";dummy.style.fontWeight=this.weight;dummy.style.fontFamily="Arial, Helvetica, Sans";this.assignInnerHTML(dummy,pText);document.body.appendChild(dummy);return dummy;},resize:function(){if(this.autoSize){if(this.isMultiline()){this.setSize(this.width,this.checkNumberOfLines(this.displayedText)*this.size);}else{this.setSize(this.checkFieldWidth(this.text),this.size);}}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.refresh();}}});})();brightcove.player.ui.controls.Link=brightcove.player.ui.controls.Label.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.controls.Link");this.url=undefined;this.underline=true;},render:function(){this._super();this.label.css("cursor","pointer");},clickHandler:function(e){if(this.url){window.open(this.url);}},getUrl:function(){return this.url;},setUrl:function(pURL){this.url=pURL;}});brightcove.player.ui.controls.ScrollBar=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.controls.ScrollBar");this.autoHideSlider=false;this.sliderSize=30;this.wellVerticalInset=0;this.wellHorizontalInset=0;this.useZeroWidth=false;this.showSliderOnInstantiation=true;this.slideDirection=brightcove.player.ui.ScrollDirection.VERTICAL;this.inset=2;var Event=brightcove.player.events.Event;var TouchEvent=brightcove.player.events.TouchEvent;this.addEventListener(Event.MOUSEDOWN,this.onMouseDown,this);this.addEventListener(TouchEvent.TOUCH_START,this.onMouseDown,this);this.nextButton=new brightcove.player.ui.UIObject();this.prevButton=new brightcove.player.ui.UIObject();this.background=new brightcove.player.ui.Block();this.slider=new brightcove.player.ui.controls.AdvancedSlider();this.slider.addEventListener(Event.SLIDE,this.redispatch,this);this.nextButton.addEventListener(Event.CLICK,this.forward,this);this.prevButton.addEventListener(Event.CLICK,this.back,this);this.nextButton.addEventListener(Event.MOUSEDOWN,this.holdForward,this);this.nextButton.addEventListener(TouchEvent.TOUCH_START,this.holdForward,this);this.prevButton.addEventListener(Event.MOUSEDOWN,this.holdBack,this);this.prevButton.addEventListener(TouchEvent.TOUCH_START,this.holdBack,this);this.prevButton.addEventListener(brightcove.player.events.Event.MOUSEUP,this.cancelScroll,this);this.prevButton.addEventListener(brightcove.player.events.TouchEvent.TOUCH_END,this.cancelScroll,this);this.nextButton.addEventListener(brightcove.player.events.Event.MOUSEUP,this.cancelScroll,this);this.nextButton.addEventListener(brightcove.player.events.TouchEvent.TOUCH_END,this.cancelScroll,this);},render:function(){this._super();this.renderSkin();this.renderButtons();this.renderSlider();},renderSkin:function(){this.background.setSkins({graphic:this.getGraphic("track")});this.background.themeSet=this.themeSet;this.background.styleFormatName="brightcove.player.ui.controls.ScrollBar";this.background.setSize(this.width,this.height);this.background.initialize();this.addChild(this.background);},renderSlider:function(){this.slider.autoHideSlider=this.autoHideSlider;this.slider.sliderSize=this.sliderSize;this.slider.wellVerticalInset=this.wellVerticalInset;this.slider.wellHorizontalInset=this.wellHorizontalInset;this.slider.useZeroWidth=this.userZeroWidth;this.slider.showSliderOnInstantiation=this.showSliderOnInstantiation;this.slider.slideDirection=this.slideDirection;var sliderW;var sliderH;var sliderX;var sliderY;if(this.isHorizontal()){sliderW=this.width-(this.inset*2)-(this.buttonSize*2);sliderH=this.height-(this.inset*2);sliderX=this.inset+this.buttonSize;sliderY=this.inset;}else{sliderW=this.width-(this.inset*2);sliderH=this.height-(this.inset*2)-(this.buttonSize*2);sliderX=this.inset;sliderY=this.inset+this.buttonSize;}
this.slider.setSize(sliderW,sliderH);this.slider.move(sliderX,sliderY);this.slider.setSkins({slider:this.getGraphic("slider")});this.slider.themeSet=this.themeSet;this.slider.initialize();this.addChild(this.slider);},renderButtons:function(){var nextX;var nextY;var prevX;var prevY;if(this.isHorizontal()){this.buttonSize=this.height-(this.inset*2);nextX=this.width-this.buttonSize;nextY=this.inset;prevY=this.inset;prevX=this.inset;}else{this.buttonSize=this.width-(this.inset*2);nextY=this.height-this.buttonSize;nextX=this.inset;prevX=this.inset;prevY=this.inset;}
this.nextButton.setSize(this.buttonSize,this.buttonSize);this.nextButton.move(nextX,nextY);this.nextButton.initialize();this.addChild(this.nextButton);this.nextIcon=new brightcove.player.ui.themes.icons.ListArrowIcon();this.nextIcon.themeSet=this.themeSet;this.nextIcon.styleFormatName=this.styleFormat.name;this.nextIcon.setSize(this.buttonSize,this.buttonSize);this.nextIcon.pointDown();this.nextIcon.initialize();this.nextButton.addChild(this.nextIcon);this.prevButton.setSize(this.buttonSize,this.buttonSize);this.prevButton.move(prevX,prevY);this.prevButton.initialize();this.addChild(this.prevButton);this.prevIcon=new brightcove.player.ui.themes.icons.ListArrowIcon();this.prevIcon.themeSet=this.themeSet;this.prevIcon.styleFormatName=this.styleFormat.name;this.prevIcon.setSize(this.buttonSize,this.buttonSize);this.prevIcon.initialize();this.prevButton.addChild(this.prevIcon);},isHorizontal:function(){return(this.slideDirection==brightcove.player.ui.ScrollDirection.HORIZONTAL);},forward:function(){this.slider.forward();},holdForward:function(){this.scrollJustPressed=true;setTimeout($.proxy(this.clearScrollJustPressed,this),100);this.scrollTimeout=setTimeout($.proxy(this.startForwardScroll,this),200);},startForwardScroll:function(){this.scrollInterval=setInterval($.proxy(this.forward,this),30);},onMouseDown:function(){if(!this.scrollJustPressed){this.cancelScroll();}},cancelScroll:function(){if(this.scrollTimeout){clearTimeout(this.scrollTimeout);this.scrollTimeout=null;}
if(this.scrollInterval){clearTimeout(this.scrollInterval);this.scrollInterval=null;}},back:function(){this.slider.back();},holdBack:function(){this.scrollJustPressed=true;setTimeout($.proxy(this.clearScrollJustPressed,this),100);this.scrollTimeout=setTimeout($.proxy(this.startBackwardScroll,this),200);},clearScrollJustPressed:function(){this.scrollJustPressed=false;},startBackwardScroll:function(){this.scrollInterval=setInterval($.proxy(this.back,this),30);},sizeForPercent:function(pPercent){pPercent=Math.round(pPercent*100)-100;var pOverflow=((Math.floor(pPercent/10))/2)/10;var dimension=(this.isHorizontal())?this.slider.width:this.slider.height;var size=dimension-(dimension*pOverflow);size=Math.min(Math.floor(dimension*0.8),Math.max(30,size));this.slider.resizeSlider(size);},scrollToPercent:function(pPercent){this.slider.scrollToPercent(pPercent);}});brightcove.player.ui.controls.TitleLabel=brightcove.player.ui.controls.Label.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.controls.TitleLabel");this.styleFormatName="title";this.selected=false;},getSelected:function(){return this.selected;},setSelected:function(pSelected){this.selected=pSelected;var color="text";color+=(this.selected)?".selected":"";if(this.styleFormat.getValue(color)){this.setColor(this.styleFormat.getValue(color));}},select:function(){this.setSelected(true);},deselect:function(){this.setSelected(false);}});brightcove.player.ui.controls.ToggleButton=brightcove.player.ui.controls.Button.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.controls.ToggleButton");this.clickEvent=brightcove.player.events.Event.TOGGLED_CLICK;this.altClickEvent=brightcove.player.events.Event.CLICK;this.toggled=false;this.toggledLabel=null;this.toggledIconName=null;this.toggledLabelObject=null;this.toggledIcon=null;},render:function(){this._super();if(this.toggledIconName){this.setToggledIcon(this.toggledIconName);if(this.toggledIcon){this.toggledIcon.setX(this.iconOffsetH);this.toggledIcon.setY(this.iconOffsetV);this.toggledIcon.setScale(this.iconScale);this.toggledIcon.initialize();}}
if(this.toggledLabel){this.toggledLabelObject=new brightcove.player.ui.controls.Label();this.toggledLabelObject.autoSize=this.autoSize;this.toggledLabelObject.text=this.toggledLabel;this.toggledLabelObject.size=this.size;this.toggledLabelObject.hAlign=this.labelAlignmentH;this.toggledLabelObject.vAlign=this.labelAlignmentV;this.toggledLabelObject.x=this.labelOffsetX;this.toggledLabelObject.y=this.labelOffsetY;this.toggledLabelObject.initialize();}
if(this.styleFormat.getValue("text")){this.setColor(this.styleFormat.getValue("text"));}
if(this.styleFormat.getValue("icons")){this.setIconColor(this.styleFormat.getValue("icons"));}
if(this.autoSize==true){this.calculateSize();}},clickHandler:function(pEvent){if(!this.enabled)return;this.toggleState();this._super(pEvent);},toggleState:function(pState){if(pState==this.toggled)return;var oldEvent=this.clickEvent;this.clickEvent=this.altClickEvent;this.altClickEvent=oldEvent;if(this.toggled){this.removeChild(this.toggledIcon);this.removeChild(this.toggledLabelObject);this.addChild(this.icon);this.addChild(this.labelObject);}else{this.removeChild(this.icon);this.removeChild(this.labelObject);this.addChild(this.toggledIcon);this.addChild(this.toggledLabelObject);}
this.toggled=!this.toggled;},setToggledLabel:function(pText){this.toggledLabel=pText;},setColor:function(pColor){this._super(pColor);if(this.toggledLabelObject){this.toggledLabelObject.setColor(pColor);}},setIconColor:function(pColor){this._super(pColor);if(this.toggledIcon){this.toggledIcon.setColor(pColor);}},setFontSize:function(pFontSize){this._super(pFontSize);this.toggledLabelObject.setFontSize(pFontSize);},setToggledIcon:function(pIconName){this.toggledIconName=pIconName;pIconName+="Icon";if(brightcove.player.ui.themes.icons[pIconName]instanceof Function){this.toggledIcon=new brightcove.player.ui.themes.icons[pIconName];}},calculateSize:function(){this._super();if(!this.toggledIcon&&!this.toggledIcon)return;var width=0;var height=0;var lGap=0;var iGap=0;if(this.toggledIcon){width+=this.toggledIcon.width;height=this.toggledIcon.height;lGap=(lGap>this.labelOffsetX-this.toggledIcon.width)?lGap:this.labelOffsetX-this.toggledIcon.width;}
if(this.toggledLabelObject){width+=this.toggledLabelObject.width;height=(this.toggledLabelObject.height>height)?this.toggledLabelObject.height:height;iGap=(iGap>this.iconOffsetX-this.toggledLabelObject.width)?iGap:this.iconOffsetX-this.toggledLabelObject.width;}
width+=(this.iconOffsetX>this.labelOffsetX)?iGap:lGap;width=(this.width>width)?this.width:width;height=(this.height>height)?this.height:height;this.setSize(width,height);if(this.toggledLabelObject&&this.toggledIcon.height>this.toggledLabelObject.height){this.toggledLabelObject.setSize(this.toggledLabelObject.width,this.toggledIcon.height);this.toggledLabelObject.autoSize=false;this.toggledLabelObject.render();}}});brightcove.player.ui.labels.LabelManager=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();this.language="en";this.labels={};this.ready=false;},loadLabels:function(pLabelFile,pLanguage){if(playerLabels!=null){this.labels=playerLabels;this.setReady();return;}
pLabelFile=undefined;var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var localization=playerConfig.getPropertiesForID("localization");if(pLabelFile==undefined){if(pLanguage){this.language=pLanguage;pLabelFile=playerConfig.getItem(PlayerConfig.CDN)+"L10n/"+pLanguage+"_labels.xml";}else if(localization!=undefined&&localization.language){pLanguage=localization.language;if(pLanguage=="other"&&false){pLabelFile=localization.file;}else{if(pLanguage=="other"){pLanguage="en";}
this.language=pLanguage;pLabelFile=playerConfig.getItem(PlayerConfig.CDN)+"L10n/"+pLanguage+"_labels.xml";}}}
this.overrides=playerConfig.getPropertiesForID(PlayerConfig.APPLICATION).labels;if(pLabelFile==undefined&&this.overrides){var file=this.overrides.getAttribute("file");file=undefined;if(file){pLabelFile=file;}}
if(pLabelFile==undefined){pLabelFile=playerConfig.getItem(PlayerConfig.CDN)+"L10n/"+this.language+"_labels.xml";}
this.loadFile(pLabelFile);},loadFile:function(pLabelFile){this.file=pLabelFile;this.loader=new brightcove.player.net.URLLoader('text/xml; charset="UTF-8"');this.loader.addEventListener(brightcove.player.events.Event.COMPLETE,this.onDataLoad,this);this.loader.addEventListener(brightcove.player.events.Event.ERROR,this.onError,this);this.loader.load(pLabelFile);},onDataLoad:function(){this.loader.removeEventListener(brightcove.player.events.Event.ERROR,this.onError,this);this.loader.removeEventListener(brightcove.player.events.Event.COMPLETE,this.onDataLoad,this);this.processLabelData(this.loader.data);},processLabelData:function(pLabelData){var labels=new DOMParser().parseFromString(pLabelData,"text/xml").documentElement;this.populateLabels(labels);this.setReady();},setReady:function(){if(this.overrides){this.populateLabels(this.overrides);}
this.ready=true;var Event=brightcove.player.events.Event;this.dispatchEvent(new Event(Event.COMPLETE));},onError:function(){this.loader.removeEventListener(brightcove.player.events.Event.ERROR,this.onError,this);this.loader.removeEventListener(brightcove.player.events.Event.COMPLETE,this.onDataLoad,this);var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();this.language="en";var file=playerConfig.getItem(PlayerConfig.CDN)+"L10n/en_labels.xml";if(this.file==file){this.setReady();}else{this.loadFile(file);}},populateLabels:function(pLabelXML){var labelList=pLabelXML.getElementsByTagName("label");var currentLabel;var labelKey;var labelValue;for(var i=0;i<labelList.length;i++){currentLabel=labelList[i];labelKey=currentLabel.getAttribute("key");labelValue=(currentLabel.firstChild==null)?labelKey:currentLabel.firstChild.nodeValue;this.labels[labelKey]=labelValue;}},getLabel:function(pKey){return this.labels[pKey]||pKey;}});brightcove.player.ui.labels.LabelManager.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.ui.labels.LabelManager();}
return this.instance;};brightcove.player.ui.media.BEMLVideoDisplay=brightcove.player.ui.media.VideoWidget.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.media.VideoPlayer");this.themeSet="videoPlayer";},render:function(){this._super();this.videoDisplay.setSize(this.width,this.height);this.addChild(this.videoDisplay);this.videoDisplay.initialize();},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.videoDisplay.setSize(this.width,this.height);}}});(function(){var
CaptionsStyleParser=brightcove.player.api.utils.CaptionsStyleParser,currentLanguage="en",MediaEvent=brightcove.player.events.MediaEvent,AdEvent=brightcove.player.events.AdEvent,styleOptions={},ccButton;brightcove.player.ui.media.CaptionOverlay=brightcove.player.core.EventDispatcher.extend({constructor:function(){var context=brightcove.player.PlayerContext.getInstance(),PropertyChangeEvent=brightcove.player.events.PropertyChangeEvent,currentURL;context.addEventListener(PropertyChangeEvent.CHANGE,this.onPlayerContextPropertyChange,this,99);this._super();this.captions={};this.languages={};},setPlayer:function(pVideoPlayer){var video;this.videoPlayer=pVideoPlayer;this.captionsOptionsMenu=getCaptionOptions();this.displayArea=$('<div class="captionDisplayArea" />').css({'position':'absolute','color':'white','font-family':CaptionsStyleParser.defaultFontFamily,'font-size':CaptionsStyleParser.defaultFontPX,'text-align':'center','text-shadow':'black 1px 1px 2px','text-decoration':'inherit','height':'100%','width':'100%','pointer-events':'none','display':this.videoPlayer.playerContext.captionsEnabled?'block':'none','overflow':'auto','box-sizing':'border-box'});if(this.videoPlayer.videoDisplay){this.displayArea.appendTo(this.videoPlayer.videoDisplay.element);this.captionsOptionsMenu.appendTo(this.videoPlayer.element);this.captionsOptionsMenu=$(this.captionsOptionsMenu[2]);setupCaptionOptionsHandlers(this);}
this.visibleCaptions={};this.videoPlayer.addEventListener(MediaEvent.CHANGE,this.onMediaChange,this);this.videoPlayer.addEventListener(AdEvent.START,this.hideOptions,this);this.videoPlayer.addEventListener(AdEvent.BEGIN,this.hideOptions,this);},onURLShimComplete:function(event){var CaptionsEvent=brightcove.player.events.CaptionsEvent,video=this.videoPlayer.video;if(event.data.key==currentURL){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_SUCCESS,event.data.key));this.loadDFXP(event.data.responseData,video.id);}},onURLShimError:function(event){var CaptionsEvent=brightcove.player.events.CaptionsEvent;if(event.data.key==currentURL){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_ERROR,event.data.key,'error'));}},onPlayerContextPropertyChange:function(pEvent){if(pEvent.property=="captionsEnabled"){var captionsLoaded=false,video=this.videoPlayer.video,url;if(this.captions&&this.captions[video.id]){captionsLoaded=true;}
if(this.videoPlayer.playerContext.captionsEnabled&&video.captions&&video.captions.length>0&&!captionsLoaded){var shim=brightcove.player.net.Shim.getInstance();currentURL=video.captions[0].URL;shim.addEventListener('complete',this.onURLShimComplete,this,false);shim.addEventListener('error',this.onURLShimError,this,false);shim.generateRequest(currentURL);}
this.setCaptionsEnabled(player.videoPlayer.playerContext.captionsEnabled);}},removeCaption:function(pIndex){this.visibleCaptions[pIndex].remove();delete this.visibleCaptions[pIndex];},add:function(pVideoID,pCaptions){var lang;if(!this.captions){this.captions={};}
this.captions[pVideoID]=pCaptions;if('Default'in pCaptions){currentLanguage='Default';}else if('en'in pCaptions){currentLanguage='en';}else{for(lang in pCaptions){if(pCaptions.hasOwnProperty(lang)){currentLanguage=lang;break;}}}
this.updateHandlers();},updateHandlers:function(){var videoCaptions=(this.captions&&this.videoPlayer.video)?this.captions[this.videoPlayer.video.id]:undefined;if(videoCaptions&&videoCaptions[currentLanguage]){this.videoPlayer.addEventListener(MediaEvent.PROGRESS,this.onMediaProgress,this);this.videoPlayer.addEventListener(MediaEvent.SEEK_NOTIFY,this.onMediaProgress,this);}else{this.videoPlayer.removeEventListener(MediaEvent.PROGRESS,this.onMediaProgress,this);this.videoPlayer.removeEventListener(MediaEvent.SEEK_NOTIFY,this.onMediaProgress,this);}},resetCaptions:function(){this.updateHandlers();for(var i in this.visibleCaptions){this.removeCaption(i);}},onMediaChange:function(pEvent){var video=this.videoPlayer.video,captionsLoaded=false;this.resetCaptions();if(this.videoPlayer.playerContext.captionsEnabled&&video.captions&&video.captions.length>0&&!captionsLoaded){var shim=brightcove.player.net.Shim.getInstance();currentURL=video.captions[0].URL;shim.addEventListener('complete',this.onURLShimComplete,this,false);shim.addEventListener('error',this.onURLShimError,this,false);shim.generateRequest(currentURL);}},onMediaProgress:function(pEvent){if(!this.captions){return;}
var currentCaptions=this.captions[pEvent.target.video.id][currentLanguage],index=currentCaptions.ceil({begin:pEvent.position}),caption,i,p,span,classes;for(i in this.visibleCaptions){caption=currentCaptions.get(i);if(caption&&(caption.begin>pEvent.position||caption.end<=pEvent.position)){this.removeCaption(i);}}
for(caption=currentCaptions.get(--index);caption;caption=currentCaptions.get(--index)){if(!this.visibleCaptions[index]&&caption.end>pEvent.position){$(caption.content).appendTo(this.displayArea);this.visibleCaptions[index]=$(caption.content);}}},traverseTree:function(pElem,pVisitor){pVisitor=$.extend({enter:$.noop,leave:$.noop},pVisitor);TRAVERSAL:while(true){pVisitor.enter(pElem);if(pElem.firstElementChild){pElem=pElem.firstElementChild;continue;}
pVisitor.leave(pElem);if(pElem.nextElementSibling){pElem=pElem.nextElementSibling;continue;}
while(true){pElem=pElem.parentElement;if(!pElem){break TRAVERSAL;}
pVisitor.leave(pElem);if(pElem.nextElementSibling){pElem=pElem.nextElementSibling;continue TRAVERSAL;}}}},loadDFXP:function(pDfxp,pVideoID){var videoID=this.getVideoID(pVideoID),CaptionsEvent=brightcove.player.events.CaptionsEvent;if(!videoID){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_ERROR,"<DFXP provided>","There is no video loaded in the player.  You must pass a video ID."));return;}
this.parseDFXP("<DFXP provided>",pDfxp,videoID);},parseDFXP:function(pUrl,pData,pVideoID){this.dfxpURL=pUrl;this.dfxpData=pData;this.dfxpVideoId=pVideoID;var dom=(new DOMParser()).parseFromString((pData||""),"text/xml"),CaptionsEvent=brightcove.player.events.CaptionsEvent,videoID=this.getVideoID(pVideoID),captions={},elem,langs=['Default'],preserveWhitespaces=[false],attr,begin,end,wrapper,body,styleParser,content;$(dom).find('script').each(function(i,el){$(el).remove();});if(!videoID){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_ERROR,pUrl,"There is no video loaded in the player.  You must pass a video ID."));return;}
if(!dom||dom.getElementsByTagName('parsererror').length){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_ERROR,pUrl,"parse error"));return;}
attr=dom.documentElement.getAttribute('xml:lang');if(attr){langs.push(attr);}
body=dom.getElementsByTagName('body');if(!body.length){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_ERROR,pUrl,"Unable to locate body element of DFXP"));return;}
styleParser=new CaptionsStyleParser(dom,styleOptions,this.videoPlayer.height);captions=styleParser.captionsArray;this.add(videoID,captions);this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_SUCCESS,pUrl));this.setCaptionsEnabled(true);langs=this.getLanguages(videoID).map(function(lang){return{language:lang,label:CaptionsStyleParser.getLanguage(lang)};});this.dispatchEvent(new CaptionsEvent(CaptionsEvent.LANGUAGES_LOADED,{languages:langs,currentLanguage:currentLanguage}));},setStyleOptions:function(pValues){styleOptions=pValues;},setLanguage:function(pValue){currentLanguage=pValue;this.resetCaptions();},getCurrentLanguage:function(){return currentLanguage;},getLanguages:function(videoId){var languages=this.languages[videoId],captions,langs,videoIds;if(languages){return languages;}
if(!videoId){videoIds=Object.keys(this.languages);if(videoIds.length==1){return this.languages[videoIds[0]];}}
captions=this.captions[videoId];langs=[];for(var i in captions){if(captions.hasOwnProperty(i)){langs.push(i);}}
this.languages[videoId]=langs;return langs;},setCaptionsEnabled:function(pValue){var captionDisplayArea=$('.captionDisplayArea');this.videoPlayer.playerContext.setCaptionsEnabled(pValue);if(captionDisplayArea){captionDisplayArea.css('display',pValue?'block':'none');}},showOptions:function(load){var captionsOptions;if(!this.videoPlayer.playerContext.adPlaying){captionsOptions=this.captionsOptionsMenu||getCaptionOptions();captionsOptions.css('display','block');}},hideOptions:function(){captionsOptions=this.captionsOptionsMenu||getCaptionOptions();captionsOptions.css('display','none');},getVideoID:function(pVideoID){var currentVideo;if(pVideoID){return pVideoID;}
currentVideo=this.videoPlayer.video;return currentVideo?currentVideo.id:undefined;}});function traverseTree(pElem,pVisitor){pVisitor=$.extend({enter:$.noop,leave:$.noop},pVisitor);TRAVERSAL:while(true){pVisitor.enter(pElem);if(pElem.firstElementChild){pElem=pElem.firstElementChild;continue;}
pVisitor.leave(pElem);if(pElem.nextElementSibling){pElem=pElem.nextElementSibling;continue;}
while(true){pElem=pElem.parentElement;if(!pElem){break TRAVERSAL;}
pVisitor.leave(pElem);if(pElem.nextElementSibling){pElem=pElem.nextElementSibling;continue TRAVERSAL;}}}}
function copyNode(node){var newNode;if(node.nodeType==1){newNode=document.createElement(node.nodeName);newNode.setAttribute('class',node.getAttribute('class'));newNode.setAttribute('style',node.getAttribute('style'));}else if(node.nodeType==3){newNode=document.createTextNode(node.textContent);}
return newNode;}
function copyDOM(node){var newNode=copyNode(node),child,i;for(i=0;i<node.childNodes.length;i++){child=copyDOM(node.childNodes[i]);newNode.appendChild(child);}
return newNode;}
function captionOptionsMenuTemplate(){return'<style>'+'.caption-settings {'+'background-color: #000;'+'opacity: 0.75;'+'color: #FFF;'+'display: none;'+'margin: 15px auto;'+'min-height: 170px;'+'font-family: Arial, Helvetica, sans-serif;'+'font-size: 12px; '+'width: 450px'+'}'+'.left {'+'float: left'+'}'+'.right {'+'float: right;'+'}'+'.clear, '+'.left:after,'+'.right:after {'+'clear: both;'+'}'+'.component {'+'margin: 5px;'+'padding: 3px;'+'min-height: 40px;'+'}'+'.component > div {'+'margin-bottom: 5px;'+'min-height: 20px;'+'}'+'.component > div:last-child {'+'margin-bottom: 0;'+'padding-bottom: 0;'+'min-height: 0;'+'}'+'label > input {'+'margin-right: 10px;'+'}'+'input[type="button"] {'+'width: 40px;'+'height: 40px;'+'}'+'</style> \n'+'<div class="caption-settings">'+'<div>'+'<div class="component left">'+'<div class="fg-color">'+'<span style="width:65px;display:block">Foreground</span>'+'<select>'+'<option value="">---</option>'+'<option value="#FFF">White</option>'+'<option value="#000">Black</option>'+'<option value="#F00">Red</option>'+'<option value="#0F0">Green</option>'+'<option value="#00F">Blue</option>'+'<option value="#FF0">Yellow</option>'+'<option value="#F0F">Magenta</option>'+'<option value="#0FF">Cyan</option>'+'</select>'+'<div class="text-opacity" style="display:inline">'+'<select class="center">'+'<option value="">---</option>'+'<option value="1">Opaque</option>'+'<option value="0.5">Semi-Opaque</option>'+'</select>'+'</div>'+'</div>'+'<div class="bg-color">'+'<span style="width:65px;display:block">Background</span>'+'<select>'+'<option value="">---</option>'+'<option value="#FFF">White</option>'+'<option value="#000">Black</option>'+'<option value="#F00">Red</option>'+'<option value="#0F0">Green</option>'+'<option value="#00F">Blue</option>'+'<option value="#FF0">Yellow</option>'+'<option value="#F0F">Magenta</option>'+'<option value="#0FF">Cyan</option>'+'</select>'+'<div class="bg-opacity" style="display:inline">'+'<select class="center">'+'<option value="">---</option>'+'<option value="1">Opaque</option>'+'<option value="0.5">Semi-Transparent</option>'+'<option value="0">Transparent</option>'+'</select>'+'</div>'+'</div>'+'<div class="window-color">'+'<span style="width:65px;display:block">Window</span>'+'<select>'+'<option value="">---</option>'+'<option value="#FFF">White</option>'+'<option value="#000">Black</option>'+'<option value="#F00">Red</option>'+'<option value="#0F0">Green</option>'+'<option value="#00F">Blue</option>'+'<option value="#FF0">Yellow</option>'+'<option value="#F0F">Magenta</option>'+'<option value="#0FF">Cyan</option>'+'</select>'+'<div class="window-opacity" style="display:inline">'+'<select class="center">'+'<option value="">---</option>'+'<option value="1">Opaque</option>'+'<option value="0.5">Semi-Transparent</option>'+'<option value="0">Transparent</option>'+'</select>'+'</div>'+'</div>'+'</div>'+'<div class="component right">'+'<div class="font-size">'+'<span style="display:block">Font Size</span>'+'<input type="button" name="font-size" id="font-minus" value="-"/>'+'<input type="button" name="font-size" id="font-plus" value="+"/>'+'</div>'+'<div class="edge-style">'+'<span style="display:block">Text Edge Style</span>'+'<select>'+'<option value="none">None</option>'+'<option value="raised">Raised</option>'+'<option value="depressed">Depressed</option>'+'<option value="uniform">Uniform</option>'+'<option value="dropshadow">Dropshadow</option>'+'</select>'+'</div>'+'<div class="font-family">'+'<span style="display:block">Font Family</span>'+'<select>'+'<option value="">---</option>'+'<option value="monospaceSerif">Monospace Serif</option>'+'<option value="proportionalSerif">Proportional Serif</option>'+'<option value="monospaceSansSerif">Monospace Sans-Serif</option>'+'<option value="proportionalSansSerif">Proportional Sans-Serif</option>'+'<option value="casual">Casual</option>'+'<option value="script">Script</option>'+'<option value="smallcaps">Small Caps</option>'+'</select>'+'</div>'+'</div>'+'</div>'+'<div class="component right">'+'<button class="default-button">Defaults</button>'+'<button class="done-button">Close</button>'+'</div>'+'</div>';}
function getCaptionOptions(){var menu=$('.caption-settings'),template,str;if(menu.length!==0){return menu;}
template=captionOptionsMenuTemplate();return $(template);}
function setupCaptionOptionsHandlers(captionsOverlay){var preview,apply,reset,doneBtn,fontSize,defaultButton,lastFontSize,lastValues,captionsCookieKey,cookie;captionsCookieKey="BC_CAP_OPTS=";lastValues=$.extend({},getValues());doneBtn=$('.done-button');defaultButton=$('.default-button');fgColorCombo=$('.fg-color > select');bgColorCombo=$('.bg-color > select');winColorCombo=$('.window-color > select');fgOpacityCombo=$('.fg-opacity > select');bgOpacityCombo=$('.bg-opacity > select');winOpacityCombo=$('.window-opacity > select');edgeStyleCombo=$('.edge-style > select');fontCombo=$('.font-family > select');defaultButton.click(function(event){fontSize=lastFontSize=parseInt(CaptionsStyleParser.defaultFontPX,10);var values=getValues(true);setCookie(values);setValues(values);values.set=false;setStyleAndParse(values);});doneBtn.click(captionsOverlay.hideOptions);fontSize=lastFontSize=parseInt(CaptionsStyleParser.defaultFontPX,10);cookie=getCookie();if(cookie){lastValues=$.extend({},cookie);lastFontSize=parseInt(cookie['font-size'],10)||fontSize;setValues(lastValues);setStyleAndParse(lastValues);}else{lastValues=$.extend({},getValues(true));lastValues.set=false;setStyleAndParse(lastValues);delete lastValues.set;}
fgColorCombo.change(applyStyleChanges);fgOpacityCombo.change(applyStyleChanges);bgColorCombo.change(applyStyleChanges);bgOpacityCombo.change(applyStyleChanges);winColorCombo.change(applyStyleChanges);winOpacityCombo.change(applyStyleChanges);edgeStyleCombo.change(applyStyleChanges);fontCombo.change(applyStyleChanges);$('#font-plus').click(function(){fontSize++;applyStyleChanges();});$('#font-minus').click(function(){fontSize--;applyStyleChanges();});function applyStyleChanges(){var values=getValues();lastValues=$({},values);lastFontSize=fontSize;lastValues['font-size']=lastFontSize;setCookie(values);setStyleAndParse(values);}
function setStyleAndParse(values){captionsOverlay.setStyleOptions(values);captionsOverlay.parseDFXP(captionsOverlay.dfxpURL,captionsOverlay.dfxpData,captionsOverlay.dfxpVideoId);captionsOverlay.resetCaptions();var videoId=captionsOverlay.getVideoID();if(videoId){captionsOverlay.onMediaProgress({target:{video:{id:videoId}},position:captionsOverlay.videoPlayer.getPosition()});}}
function getSelectedOptionValue(target){target=target[0];var selectedOption;if(target.selectedOptions){selectedOption=target.selectedOptions[0];}else if(target.options){selectedOption=target.options[target.options.selectedIndex];}
return selectedOption.value;}
function setSelectedOption(target,value){target=target[0];var i,option;for(i=0;i<target.options.length;i++){option=target.options[i];if(option.value===value){break;}}
if(target.selectedOptions){target.selectedOptions[0]=option;}
target.selectedIndex=i;}
function setCookie(values){var date=new Date();date.setYear(date.getYear()+1);document.cookie=captionsCookieKey+escape(JSON.stringify(values))+"; expires="+date.toUTCString()+"; path=/";}
function getCookie(){var cookies=document.cookie.split(';'),cookie,cookieValue,i=0;for(;i<cookies.length;i++){cookie=cookies[i].trim();if(cookie.indexOf(captionsCookieKey)!==-1){cookieValue=cookie.slice(captionsCookieKey.length);return JSON.parse(unescape(cookieValue));}}
return null;}
function setValues(values){$('.edge-style > select').val(values['edge-style']);$('.font-family > select').val(values['font-family']);$('.fg-color > select').val(values['text-color']);$('.text-opacity > select').val(values['text-opacity']);$('.bg-color > select').val(values['background-color']);$('.bg-opacity > select').val(values['background-opacity']);$('.window-color > select').val(values['window-color']);$('.window-opacity > select').val(values['window-opacity']);fontSize=lastFontSize;}
function getValues(clearValues){var bgOpacity,textOpacity,windowOpacity,textEdge,fontFamily,fgColor,bgColor,windowColor,fntSize;if(clearValues){bgOpacity='';textOpacity='';windowOpacity='';textEdge='';fontFamily='';fgColor='';bgColor='';windowColor='';fntSize=parseInt(CaptionsStyleParser.defaultFontPX,10);}else{textEdge=getSelectedOptionValue($('.edge-style > select'));fontFamily=getSelectedOptionValue($('.font-family > select'));fgColor=getSelectedOptionValue($('.fg-color > select'));textOpacity=getSelectedOptionValue($('.text-opacity > select'));bgColor=getSelectedOptionValue($('.bg-color > select'));bgOpacity=getSelectedOptionValue($('.bg-opacity > select'));windowColor=getSelectedOptionValue($('.window-color > select'));windowOpacity=getSelectedOptionValue($('.window-opacity > select'));fntSize=fontSize+'px';}
return{"background-opacity":bgOpacity,"text-opacity":textOpacity,"window-opacity":windowOpacity,"font-size":fntSize,"edge-style":textEdge,"font-family":fontFamily,"text-color":fgColor,"background-color":bgColor,"window-color":windowColor};}}})();brightcove.player.ui.media.ChromelessVideoPlayer=brightcove.player.ui.media.VideoWidget.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.media.VideoPlayer");this.themeSet="videoPlayer";this.mediaChangeEventHandler=$.proxy(this.onMediaChange,this);this.addEventListener(brightcove.player.events.MediaEvent.CHANGE,this.mediaChangeEventHandler);},render:function(){this._super();this.videoDisplay.setSize(this.width,this.height);this.videoDisplay.setUsedInChromelessVideoPlayer(true);this.addChild(this.videoDisplay);this.videoDisplay.initialize();this.controlsProxy=this.videoDisplay.controlsProxy;this.isSimpleVideoDisplay=this.definition.tagName.toLowerCase()==="videodisplay";if(this.definition.nextSibling&&(this.definition.nextSibling.tagName.toLowerCase()==="mediacontrols")){this.isSimpleVideoDisplay=false;}
this.captionOverlay=new brightcove.player.ui.media.CaptionOverlay();this.captionOverlay.setPlayer(this);this.preventFullScreen=false;if(this.getAttribute('preventFullScreen').toString()=="true"){this.preventFullScreen=true;}
this.includeCaptionControls=false;if(this.getAttribute("includeCaptionControls").toString()=="true"){this.includeCaptionControls=true;}
this.showCaptionMenu=true;if(this.getAttribute("showCaptionMenu").toString()=="false"){this.showCaptionMenu=false;}
this.customControls=!!(this.preventFullScreen||(this.includeCaptionControls&&!brightcove.player.utils.PlayerUtil.isSmallScreenIOS()));this.setUpControlBar();},setUpControlBar:function(){var playerConfig=brightcove.player.PlayerConfig.getInstance(),shim=brightcove.player.net.Shim.getInstance(),cdn=playerConfig.getItem(brightcove.player.PlayerConfig.CDN),style=document.createElement('style'),url=cdn+"themes/widgets/chromelessVideoPlayer/styles/video-js.css",self=this,shimHandler;this.controlBar=new _V_.ControlBar(this);this.controlBar._el=$(this.controlBar.el);shimHandler=function(event){if(event.data.key!=url)return;if(style.sheet){style.sheet.cssText=event.data.responseData.replace(/(video-js\.png)/g,cdn+"themes/widgets/chromelessVideoPlayer/styles/$1");}else{style.innerHTML=event.data.responseData.replace(/(video-js\.png)/g,cdn+"themes/widgets/chromelessVideoPlayer/styles/$1");}
document.body.appendChild(style);shim.removeEventListener('complete',shimHandler);};shim.addEventListener('complete',shimHandler,false);shim.generateRequest(url);if(brightcove.player.utils.PlayerUtil.isChromeForAndroid()){document.addEventListener("webkitfullscreenchange",function(){if(document.webkitIsFullScreen){self.videoDisplay.enableBrowserControls();self.controlBar.disableControl();}else{if(self.customControls||self.hasCaptions()){self.videoDisplay.disableBrowserControls();self.controlBar.enableControl();}else{self.videoDisplay.enableBrowserControls();}}},false);}
this.element.appendChild(this.controlBar.el);this._element.addClass('vjs-default-skin vjs-paused');this._element.css('overflow','hidden');},onMediaBegin:function(pEvent){this._super(pEvent);if(!this.isSimpleVideoDisplay){this.toggleControls(false);}},onMediaChange:function(pEvent){var CM=brightcove.player.content.ContentManager.getInstance(),dataCache=CM.dataCache.cache,cache,media,i,j,captions;this.contentManager=CM;for(i=0;i<dataCache.length;i++){cache=dataCache[i];if(!cache||!cache.mediaDTOs){continue;}
for(j=0;j<cache.mediaDTOs.length;j++){media=cache.mediaDTOs[j];if(media.captions&&media.captions.length>0){captions=true;}}}
this.playlistCaptions=captions;this.removeEventListener(brightcove.player.events.MediaEvent.CHANGE,this.mediaChangeEventHandler);},onMediaComplete:function(pEvent){this._super(pEvent);if(!this.isSimpleVideoDisplay){this.toggleControls(true);}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.videoDisplay.setSize(this.width,this.height);}},onPlayerContextPropertyChange:function(pEvent){var
PlayerConfig,playerConfig,videoPlayer;if(pEvent.property=="adPlaying"){if(this.playerContext.adPlaying){this.toggleControls(true);}else{PlayerConfig=brightcove.player.PlayerConfig;playerConfig=PlayerConfig.getInstance();videoPlayer=playerConfig.getItem(PlayerConfig.VIDEO_PLAYER);if(!videoPlayer.videoDisplay.isPaused()){this.toggleControls(false);}else{this.toggleControls(true);}}}
if(pEvent.property=="captionsEnabled"){this.captionOverlay.setCaptionsEnabled(this.playerContext.captionsEnabled);this.controlBar.captions.toggleClass();}},hasCaptions:function(){return(this.playlistCaptions||(this.video&&this.video.captions&&this.video.captions.length>0)||this.playerContext.captionsEnabled);},toggleControls:function(turnOff){var toggle,captionsEnabled;captionsEnabled=this.hasCaptions();if(this.customControls||(captionsEnabled&&!brightcove.player.utils.PlayerUtil.isSmallScreenIOS())||(this.controlBar&&this.controlBar.isEnabled())){if(captionsEnabled){this.controlBar.captions.show();}
toggle=turnOff?this.controlBar.disableControl:this.controlBar.enableControl;toggle=$.proxy(toggle,this.controlBar);toggle();this.videoDisplay.disableBrowserControls();}else{toggle=turnOff?this.videoDisplay.disableBrowserControls:this.videoDisplay.enableBrowserControls;toggle=$.proxy(toggle,this.videoDisplay);if(brightcove.player.utils.PlayerUtil.isIOSVersionOrGreater(5.1)&&!this.playerContext.adPlaying&&!this.videoDisplay.beginEventFired){this.iOSToggleControls(turnOff,toggle);}else{toggle();}
this.controlBar&&this.controlBar.disableControl();}},iOSToggleControls:function(turnOff,toggle){(function(self,toggle,$v){var video=$v[0],handler=function(e){if(e.type==='playing'){video.pause();}else{video.play();toggle();$v.off('playing pause',handler);}};$v.on('playing pause',handler);})(this,toggle,this.videoDisplay.video._element);}});brightcove.player.ui.media.Playhead=brightcove.player.ui.controls.AdvancedSlider.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.media.Playhead");this.duration=0;this.currentTime=0;this.useZeroWidth=true;this.catchTimeUpdates=true;this.wellPlayed=new brightcove.player.ui.Block();this.showSliderOnInstantiation=false;},render:function(){this._super();this.wellPlayed.setSkins({graphic:this.getGraphic("watched")});this.wellPlayed.themeSet=this.themeSet;this.wellPlayed.styleFormatName=this.styleFormat.name+".watched";this.wellPlayed.setSize(0,this.height-this.wellVerticalInset*2);this.wellPlayed.initialize();this.well.addChild(this.wellPlayed);},setSliderPosition:function(pPos){this._super(pPos);var position=Math.round(this.currentPosition+(this.sliderSize/2));if(this.isHorizontal()){this.wellPlayed.setSize(position,this.wellPlayed.height);}else{this.wellPlayed.setSize(this.wellPlayed.width,position);}},updateTime:function(pCurrentTime){if(this.catchTimeUpdates){this.currentTime=pCurrentTime;var percent=this.currentTime/this.duration;this.scrollToPercent(percent);}},setSlider:function(pEvent){if(!this.enabled)return 0;var moveTo=this._super(pEvent);var seekToTime=this.currentPercent*this.duration+0.001;this.wellPlayed.setSize(this.currentPosition,this.wellPlayed.height);var MediaEvent=brightcove.player.events.MediaEvent;$(this.element).trigger(MediaEvent.SEEK,[seekToTime]);return moveTo;},hookSlider:function(pEvent){if(!this.enabled)return;this._super(pEvent);var MediaEvent=brightcove.player.events.MediaEvent;$(this.element).trigger(MediaEvent.DO_PAUSE);this.dispatchEvent(new Event(brightcove.player.events.Event.SCRUBBING_START));},dragSlider:function(pEvent){this._super(pEvent);this.catchTimeUpdates=false;},releaseSlider:function(pEvent){this._super(pEvent);var MediaEvent=brightcove.player.events.MediaEvent;this.catchTimeUpdates=true;$(this.element).trigger(MediaEvent.DO_PLAY);this.dispatchEvent(new Event(brightcove.player.events.Event.SCRUBBING_END));},setSize:function(pWidth,pHeight){if(this.well){var oldWidth=this.well.width;}
this._super(pWidth,pHeight);if(this.initialized){this.setSliderPosition(this.currentPosition);}}});brightcove.player.ui.media.VideoDisplay=brightcove.player.ui.UIObject.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.media.VideoDisplay");this.autostart=false;this.wasPlaying=false;this.usedInChromelessVideoPlayer=false;this.isScrubbing=false;this.inErrorState=false;this.isCueing=false;this.playRequested=false;this.useCompletePositionOverride=false;this.videoDimensions={};this.playShouldFire=true;this.savedURL=null;this.savedDuration=null;this.savedPosition=null;this.handlingMidroll=false;},render:function(){var
referrer,embedParams,PlayerConfig=brightcove.player.PlayerConfig,src,$element=this._element;this.playerConfig=PlayerConfig.getInstance();src=this.playerConfig.getItem(PlayerConfig.PLAYER_DIRECTORY)+
PlayerConfig.ASSETS+"/loader.gif";this._super();this.backgroundGraphic=new brightcove.player.ui.Block();this.backgroundGraphic.setSkins({graphic:this.getGraphic("graphic")});this.backgroundGraphic.themeSet=this.themeSet;this.backgroundGraphic.styleFormatName=this.styleFormat.name;this.backgroundGraphic.setSize(this.width,this.height);this.backgroundGraphic.initialize();this.addChild(this.backgroundGraphic);this.videoHolder=new brightcove.player.core.Sprite();this.videoHolder.initialize();this.addChild(this.videoHolder);this.video=brightcove.player.ui.media.VideoElementFactory.getVideoElement(this.videoHolder);this.video.setSize(this.width,this.height);this.supportsInPagePlayback=this.video.supportsInPagePlayback;var MediaEvent=brightcove.player.events.MediaEvent;this.video.addEventListener(MediaEvent.BEGIN,this.onMediaBegin,this);this.video.addEventListener(MediaEvent.PROGRESS,this.onMediaProgress,this);this.video.addEventListener(MediaEvent.PLAY,this.onMediaPlay,this);this.video.addEventListener(MediaEvent.STOP,this.onMediaStop,this);this.video.addEventListener(MediaEvent.COMPLETE,this.onMediaComplete,this);this.video.addEventListener(MediaEvent.SEEK_NOTIFY,this.redispatch,this);this.video.addEventListener(MediaEvent.LOAD_START,this.onLoadStart,this);this.video.addEventListener(MediaEvent.PLAY_ATTEMPT,this.onPlayAttempt,this);this.video.addEventListener(MediaEvent.ERROR,this.redispatch,this);var AdEvent=brightcove.player.events.AdEvent;this.video.addEventListener(AdEvent.PROGRESS,this.redispatch,this);this.video.addEventListener(AdEvent.PLAY,this.onAdPlay,this);this.video.addEventListener(AdEvent.STOP,this.onAdStop,this);this.video.addEventListener(AdEvent.BEGIN,this.onAdBegin,this);embedParams=this.playerConfig.getItem(PlayerConfig.EMBED_PARAMS);this.httpsStillOverride=embedParams?this.playerConfig.getItem(PlayerConfig.EMBED_PARAMS).httpsStillOverride:null;linksrc=this.playerConfig.snippetParameters[PlayerConfig.LINKSRC];referrer=this.playerConfig.snippetParameters[PlayerConfig.REFERRER_URL];if((referrer&&(referrer.indexOf('//twitter.com')!=-1||referrer.indexOf('//www.twitter.com')!=-1||referrer.indexOf('//mobile.twitter.com')!=-1))||(linksrc&&linksrc=="twitter")){var Tracer=brightcove.player.utils.Tracer;Tracer.debug(this,"Using the default HTTPS video still because we're on Twitter",Tracer.MEDIA);this.onTwitter=true;}
this.videoStill=new brightcove.player.ui.containers.Image();if(this.onTwitter){this.videoStill.setScaleMode(brightcove.player.ui.ScaleMode.EXACT_FIT);}
else{this.videoStill.setScaleMode(brightcove.player.ui.ScaleMode.SHOW_ALL);}
this.videoStill.initialize();this.addChild(this.videoStill);this.loadingAnimation=$('<img src="'+src+'" />').on('load',function(){var $loadingAnimation=$(this);$loadingAnimation.css({position:'absolute',display:'none',left:$element.width()/2-$loadingAnimation.prop('width')/2,top:$element.height()/2-$loadingAnimation.prop('height')/2}).appendTo($element);});this.overlayMenu=new brightcove.player.ui.menus.OverlayMenu();this.overlayMenu.setSize(this.width,this.height);this.overlayMenu.initialize();this.controlsProxy=brightcove.player.ui.media.ControlsProxy.getInstance();this.controlsProxy.deviceSupportsAdvertising=this.video.deviceSupportsAdvertising;this.controlsProxy.addEventListener(MediaEvent.REQUEST_PLAY,this.onRequestPlay,this);this.controlsProxy.addEventListener(MediaEvent.REQUEST_PAUSE,this.onRequestPause,this);this.playerContext=brightcove.player.PlayerContext.getInstance();var PropertyChangeEvent=brightcove.player.events.PropertyChangeEvent;this.playerContext.addEventListener(PropertyChangeEvent.CHANGE,this.onPlayerContextPropertyChange,this,99);$(document.body).bind(MediaEvent.SEEK,$.proxy(this.onPlayheadSeek,this));$(document.body).bind(MediaEvent.DO_PAUSE,$.proxy(this.pauseMomentarily,this));$(document.body).bind(MediaEvent.DO_PLAY,$.proxy(this.resume,this));if(this.getVideo()){this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_CREATED));}else{this.video.addEventListener(MediaEvent.VIDEO_CREATED,this.redispatch,this);}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.video.setSize(this.width,this.height);this.backgroundGraphic.setSize(this.width,this.height);this.overlayMenu.setSize(this.width,this.height);this.loadingAnimation.css({left:this.width/2-this.loadingAnimation.width()/2,top:this.height/2-this.loadingAnimation.height()/2});if(this.errorLabel){this.errorLabel.move(10,(this.height/2)-12);this.errorLabel.setSize(this.width-20,this.errorLabel.height);}
if(this.hasVideoStill){this.sizeVideoStill();}}},loadMedia:function(pUrl,pVideoStillUrl,pDimensions,pDuration){this.savedPosition=null;this.handlingMidroll=false;if(this.beginEventFired){this.controlsProxy.onMediaChange();this.addVideoStill(pVideoStillUrl,false);}else{this.addVideoStill(pVideoStillUrl,true);}
this.removeError();this.videoDimensions=pDimensions;this.video.setIsCueing(this.isCueing);if(this.isCueing){this.showOverlayMenu(true);}
this.resetPlayStateVariables();this.resetVideoElement();if(this.controlsProxy.needPrerollCheck()&&!this.isCueing){this.savedURL=pUrl;this.savedDuration=pDuration;this.controlsProxy.respondToPlay();}
else{if(this.playerContext.adPlaying){this.savedURL=pUrl;this.savedDuration=null;this.setContent(pUrl,pDuration);}else{this.savedURL=null;this.savedDuration=null;this.setContent(pUrl,pDuration);}}},setContent:function(pUrl,pDuration){var Tracer=brightcove.player.utils.Tracer;Tracer.debug(this,"Loading video "+pUrl,Tracer.MEDIA);this.video.setContent(pUrl,pDuration);},resetPlayStateVariables:function(){this.playRequested=false;this.playShouldFire=true;this.playCalledAfterChange=false;this.beginEventFired=false;},resetVideoElement:function(){this.video.resetVideo();},loadError:function(pMessage){this.inErrorState=true;this.playRequested=false;this.hideOverlays();this.video.setContent(null);if(!this.errorLabel){this.errorLabel=new brightcove.player.ui.controls.Label();this.errorLabel.move(10,(this.height/2)-12);this.errorLabel.setFontSize(14);this.errorLabel.setHAlign(brightcove.player.ui.Alignment.CENTER);this.errorLabel.width=this.width-20;this.errorLabel.initialize();this.errorLabel.setMultiline(true);this.errorLabel.setColor("#fff");}
this.errorLabel.setText(pMessage);var labelManager=brightcove.player.ui.labels.LabelManager.getInstance();if(!(this.playerConfig.snippetParameters[brightcove.player.PlayerConfig.SHOW_NO_CONTENT_MESSAGE]==="false"&&pMessage===labelManager.getLabel(brightcove.player.events.ContentEvent.NO_CONTENT))){this.addChild(this.errorLabel);}
this.clearLoadingAnimation();},removeError:function(){this.inErrorState=false;this.removeChild(this.errorLabel);},displayMessage:function(pMessage){this.hideOverlays();if(!this.errorLabel){this.errorLabel=new brightcove.player.ui.controls.Label();this.errorLabel.move(10,(this.height/2)-12);this.errorLabel.setFontSize(14);this.errorLabel.setHAlign(brightcove.player.ui.Alignment.CENTER);this.errorLabel.width=this.width-20;this.errorLabel.initialize();this.errorLabel.setMultiline(true);this.errorLabel.setColor("#fff");}
this.errorLabel.setText(pMessage);var labelManager=brightcove.player.ui.labels.LabelManager.getInstance();if(!(this.playerConfig.snippetParameters[brightcove.player.PlayerConfig.SHOW_NO_CONTENT_MESSAGE]==="false"&&pMessage===labelManager.getLabel(brightcove.player.events.ContentEvent.NO_CONTENT))){this.addChild(this.errorLabel);}
this.clearLoadingAnimation();},removeMessage:function(){this.removeChild(this.errorLabel);},addVideoStill:function(pVideoStillUrl,pShowStill){clearTimeout(this.videoStillTimeout);if(pVideoStillUrl!=null){this.hasVideoStill=true;this.sizeVideoStill();this.videoStill.setSource(pVideoStillUrl);if(pShowStill){this.delayVideoStillReveal();}}else{this.hasVideoStill=false;this.videoStill.hide();}},sizeVideoStill:function(){var width=this.videoDimensions.width||this.width;var height=this.videoDimensions.height||this.height;var size=this.calculateStillSize(width,height);this.videoStill.setSize(size.w,size.h);this.videoStill.move(size.l,size.t);},calculateStillSize:function(pWidth,pHeight){var ratio=1;if(this.width>this.height){ratio=this.height/pHeight;if(pHeight<pWidth){ratio=((pWidth*ratio<this.width)?ratio:this.width/pWidth);}}else{ratio=this.width/pWidth;if(pWidth<pHeight){ratio=((pHeight*ratio<this.height)?ratio:this.height/pHeight);}}
var width=Math.floor(pWidth*ratio);var height=Math.floor(pHeight*ratio);var top=Math.floor((this.height-height)/2);var left=Math.floor((this.width-width)/2);return{w:width,h:height,l:left,t:top};},enableBrowserControls:function(){this.video.enableBrowserControls();},disableBrowserControls:function(){this.video.disableBrowserControls();},seek:function(pPosition){this.video.seek(pPosition);},pause:function(){this.controlsProxy.respondToPause();},pauseImmediately:function(){this.video.pause();this.clearLoadingAnimation();},pauseMomentarily:function(){if(!this.video.isPaused()){this.wasPlaying=true;this.video.pause();}},resume:function(){if(this.wasPlaying){this.wasPlaying=false;this.play();}},play:function(){if(this.playerContext.adPlaying){this.updateUIAsIfPlaying();}
this.controlsProxy.respondToPlay();},playImmediately:function(){if(!this.playerContext.adPlaying&&this.savedURL&&this.video.getCurrentSrc()!=this.savedURL){this.setContent(this.savedURL,this.savedDuration);}
else{var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.PLAY_ATTEMPT));this.updateUIForPlay();this.video.play();}},updateUIAsIfPlaying:function(){if(this.supportsInPagePlayback||brightcove.player.utils.PlayerUtil.isSmallScreenIOS()){this.hideOverlays();}},onPlayAttempt:function(pEvent){this.dispatchEvent(pEvent);this.updateUIForPlay();},onMediaComplete:function(pEvent){if(this.controlsProxy.postrollsComplete()){this.resetForPlay();}
this.redispatch(pEvent);},resetForPlay:function(){this.useCompletePositionOverride=true;this.delayVideoStillReveal();if(this.usedInChromelessVideoPlayer){this.addOverlayListeners();}
this.delayOverlayMenuReveal();this.playShouldFire=true;},onPlayheadSeek:function(pEvent,pPosition){this.seek(pPosition);},delayVideoStillReveal:function(){if(this.hasVideoStill){clearTimeout(this.videoStillTimeout);this.videoStillTimeout=setTimeout($.proxy(function(){this.showVideoStill();},this),500);}},showVideoStill:function(){if(!this.videoStill){return;}
if(this.video.isPaused()||!this.supportsInPagePlayback){this.videoStill.show();}},setVolume:function(pLevel){this.video.setVolume(pLevel);},onLoadStart:function(pEvent){var showOverlay;if(!this.contains(this.overlayMenu)){showOverlay=this.onShowOverlayMenu();if(showOverlay===false){this.overlayMenu.hide();}
this.addChild(this.overlayMenu);this.addOverlayListeners();}},onMediaBegin:function(pEvent){this.handleBeginEvent(pEvent);if(this.controlsProxy.needPrerollCheck()){this.video.pause();this.controlsProxy.respondToPlay();return;}
else{this.redispatch(pEvent);}},onAdBegin:function(pEvent){this.isCueing=false;this.handleBeginEvent(pEvent);this.redispatch(pEvent);},handleBeginEvent:function(pEvent){this.updateUIForPlay();this.clearLoadingAnimation();this.beginEventFired=true;},showLoadingAnimation:function(){var performDefault;if(!this.inErrorState){this.hideOverlays();performDefault=this.onShowLoadingAnimation(this.loadingAnimation);if(performDefault!==false){this.loadingAnimation.show();}}},onShowLoadingAnimation:$.noop,onHideLoadingAnimation:$.noop,addLoadingAnimationOnDelay:function(){if(!this.loadingAnimationTimeout){this.loadingAnimationTimeout=setTimeout($.proxy(function(){this.showLoadingAnimation();},this),1000);}},clearLoadingAnimation:function(){if(this.handlingMidroll){return;}
clearTimeout(this.loadingAnimationTimeout);this.loadingAnimationTimeout=null;this.onHideLoadingAnimation();this.loadingAnimation.hide();},delayOverlayMenuReveal:function(){clearTimeout(this.overlayMenuTimeout);if(brightcove.player.utils.PlayerUtil.isIOSSixPointZero()){this.showOverlayMenu();}else{this.overlayMenuTimeout=setTimeout($.proxy(function(){this.showOverlayMenu();},this),500);}},showOverlayMenu:function(pForceReveal){var performDefault;if(pForceReveal||(this.video.isPaused()&&this.overlayMenu.hidden)){performDefault=this.onShowOverlayMenu();if(performDefault!==false){this.overlayMenu.reveal();}}},onShowOverlayMenu:$.noop,hideOverlays:function(){clearTimeout(this.videoStillTimeout);this.videoStill.hide();clearTimeout(this.overlayMenuTimeout);this.onHideOverlayMenu();this.overlayMenu.hide();},onHideOverlayMenu:$.noop,overlayMenuClicked:function(){if((!this.playerContext.adPlaying||this.playerContext.adPaused)&&(this.video.isPaused()||!this.supportsInPagePlayback)){this.play();}},addOverlayListeners:function(){this.removeOverlayListeners();this.overlayMenu.addEventListener(brightcove.player.events.Event.CLICK,this.overlayMenuClicked,this);},removeOverlayListeners:function(){this.overlayMenu.removeEventListener(brightcove.player.events.Event.CLICK,this.overlayMenuClicked,this);},onMediaPlay:function(pEvent){var self=this;this.savedURL=null;this.savedDuration=null;this.videoReadyForMidrollSeek=function(pEvent){self.video.removeEventListener('durationchange',self.videoReadyForMidrollSeek);self.video.pause();self.handleMidrollSeek();};if(this.savedPosition){this.addLoadingAnimationOnDelay();if(this.video.getDuration()>0){this.videoReadyForMidrollSeek();}else{this.video.addEventListener('durationchange',this.videoReadyForMidrollSeek);}}
else{if(this.handlingMidroll){this.handlingMidroll=false;this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_PLAYBACK_AFTER_AD));}
this.clearLoadingAnimation();this.useCompletePositionOverride=false;if(!this.beginEventFired&&this.playCalledAfterChange){return;}
this.updateUIForPlay();}},handleMidrollSeek:function(){var self=this;if(this.savedPosition!=null){if((brightcove.player.utils.PlayerUtil.isIOS()&&this.video.getFractionBuffered()==0)||(brightcove.player.utils.PlayerUtil.isAndroidWithInPagePlayback()&&(!this.getVideo().seekable||this.getVideo().seekable.length<1))){setTimeout(function(){self.handleMidrollSeek();},1000);}else{this.seek(this.savedPosition);this.play();this.savedPosition=null;}}
else{this.handlingMidroll=false;}},onRequestPlay:function(){this.playImmediately();},onRequestPause:function(){this.pauseImmediately();},updateUIForPlay:function(){this.updateUIAsIfPlaying();this.playCalledAfterChange=true;if(this.playShouldFire){this.playRequested=true;this.playShouldFire=false;if(this.playerContext.adPlaying){var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.PLAY));}else{var MediaEvent=brightcove.player.events.MediaEvent;this.dispatchEvent(new MediaEvent(MediaEvent.PLAY));}}
this.isCueing=false;if(!this.beginEventFired){this.addLoadingAnimationOnDelay();}},onMediaStop:function(pEvent){this.clearLoadingAnimation();if(!this.beginEventFired){this.playCalledAfterChange=false;}
if(this.handlingMidroll||!this.handleStopIfAllowed(pEvent)){return;}
this.playShouldFire=true;if(brightcove.player.utils.PlayerUtil.isSmallScreenIOS()&&!this.isScrubbing&&!this.inErrorState){this.delayOverlayMenuReveal();this.delayVideoStillReveal();}else if(!this.usedInChromelessVideoPlayer&&!this.isScrubbing&&!this.inErrorState){if(this.supportsInPagePlayback&&(this.controlsProxy.postrollsComplete()||!this.video.isComplete())){this.delayOverlayMenuReveal();}}},onAdStop:function(pEvent){if(!this.handleStopIfAllowed(pEvent)){return;}
this.playShouldFire=true;this.delayOverlayMenuReveal();},onAdPlay:function(pEvent){this.hideOverlays();},handleStopIfAllowed:function(pEvent){if(brightcove.player.utils.PlayerUtil.isAndroid()&&(!this.playCalledAfterChange||!this.beginEventFired)){return false;}
if(!this.usedInChromelessVideoPlayer){this.video.disableBrowserControls();}
this.redispatch(pEvent);return true;},onMediaProgress:function(pEvent){if(this.handlingMidroll){return;}
if(this.playCalledAfterChange&&this.beginEventFired){this.redispatch(pEvent);}},onPlayerContextPropertyChange:function(pEvent){if(pEvent.property=="adPlaying"){if(this.playerContext.adPlaying){if(this.beginEventFired){this.savedPosition=this.getPosition();}
else{this.savedPosition=null;}
if(!this.savedURL){this.savedURL=this.video.getCurrentSrc();this.savedDuration=this.video.getDuration();}else{this.savedPosition=null;}
if(this.savedPosition==0||this.savedPosition==this.savedDuration){this.savedPosition=null;}
if(this.savedPosition!=null){this.handlingMidroll=true;}
this.updateUIForPlay();this.video.show();}else{var afterAdFunc=this.controlsProxy.afterAdFunc;if(!this.controlsProxy.afterPostrollPoint){if(this.video.getCurrentSrc()!=this.savedURL){this.resetPlayStateVariables();this.addLoadingAnimationOnDelay();this.updateUIAsIfPlaying();this.setContent(this.savedURL,this.savedDuration);}else{this.playShouldFire=true;this.play();}
this.savedURL=null;this.savedDuration=null;}else{if(afterAdFunc){this.controlsProxy.afterAdFunc=null;afterAdFunc();}
this.resetPlayStateVariables();}
if(this.controlsProxy.afterPostrollPoint){this.controlsProxy.resetAdState();this.resetForPlay();}
if(!this.handlingMidroll){this.dispatchEvent(new MediaEvent(MediaEvent.VIDEO_PLAYBACK_AFTER_AD));}}}},setUsedInChromelessVideoPlayer:function(pBool){this.usedInChromelessVideoPlayer=pBool;},setIsScrubbing:function(pBool){this.isScrubbing=pBool;},isPaused:function(){if(this.playRequested&&!this.beginEventFired){return false;}
return this.video.isPaused();},getDuration:function(){return this.video.getDuration();},getPosition:function(){if(this.useCompletePositionOverride){return 0;}else{return this.video.getPosition();}},getVideo:function(){return this.video.getVideo();},setIsCueing:function(pBoolean){this.isCueing=pBoolean;},setCanAutoplay:function(pBoolean){this.video.setCanAutoplay(pBoolean);}});brightcove.player.ui.media.VideoElementFactory={getVideoElement:function(pSprite,pUserAgent){var userAgent=pUserAgent||brightcove.userAgent;if(userAgent.match(new RegExp("IEMobile","i"))){return new brightcove.player.html.video.VideoElement_desktop(pSprite);}
if(userAgent.match(new RegExp("android","i"))){return this.getAndroidVideoElement(pSprite,userAgent);}
if(userAgent.match(new RegExp("iPad","i"))){return this.getiPadVideoElement(pSprite,userAgent);}
if(brightcove.player.utils.PlayerUtil.isSmallScreenIOS(userAgent)){return this.getiPhoneVideoElement(pSprite,userAgent);}
return new brightcove.player.html.video.VideoElement_desktop(pSprite);},getiPadVideoElement:function(pSprite,pUserAgent){if(pUserAgent.indexOf("3_2")>-1){return new brightcove.player.html.video.VideoElement_iPad_3_2(pSprite);}else if(pUserAgent.indexOf("OS 4_")>-1){return new brightcove.player.html.video.VideoElement_iPad(pSprite);}else{return new brightcove.player.html.video.VideoElement_iPad_5_0(pSprite);}},getiPhoneVideoElement:function(pSprite,pUserAgent){if(pUserAgent.indexOf("4_1")>-1){return new brightcove.player.html.video.VideoElement_iPhone_4_1(pSprite);}else if(pUserAgent.indexOf("OS 4_")>-1){return new brightcove.player.html.video.VideoElement_iPhone(pSprite);}
return new brightcove.player.html.video.VideoElement_iPhone_5_0(pSprite);},getAndroidVideoElement:function(pSprite,pUserAgent){if(brightcove.player.utils.PlayerUtil.isAndroidWithInPagePlayback()){return new brightcove.player.html.video.VideoElement_Android_In_Page_Playback(pSprite);}else{return new brightcove.player.html.video.VideoElement_Android(pSprite);}}};brightcove.player.ui.media.VideoPlayer=brightcove.player.ui.media.VideoWidget.extend({constructor:function(){this._super();this.classes.push("brightcove.player.ui.media.VideoPlayer");this.themeSet="videoPlayer";this.controlsHeight=46;var PlayerConfig=brightcove.player.PlayerConfig;this.playerConfig=PlayerConfig.getInstance();this.isCueing=false;},render:function(){this._super();var Alignment=brightcove.player.ui.Alignment,MediaEvent=brightcove.player.events.MediaEvent,labelManager=brightcove.player.ui.labels.LabelManager.getInstance(),playheadBorder=62,playheadWidth=this.width-playheadBorder*2,border=10;this.includeCaptionControls=true;this.showCaptionControls=false;if(this.getAttribute("includeCaptionControls").toString()=="false"){this.includeCaptionControls=false;}
this.showCaptionMenu=true;if(this.getAttribute("showCaptionMenu").toString()=="false"){this.showCaptionMenu=false;}
this.videoDisplay.setSize(this.width,this.height-this.controlsHeight);this.addChild(this.videoDisplay);this.videoDisplay.initialize();if(this.videoDisplay.supportsInPagePlayback){this.videoDisplay.addEventListener(MediaEvent.PLAY_ATTEMPT,this.onPlayAttempt,this);}
this.videoDisplay.addEventListener(MediaEvent.VIDEO_PLAYBACK_AFTER_AD,this.onVideoPlaybackAfterAd,this);this.renderControlsChrome();this.renderCurrentTimeLabel(Alignment,playheadBorder,playheadWidth,border);this.renderDurationLabel(Alignment,border);this.renderSponsorMessageLabel(Alignment,labelManager,border);this.renderPlayhead(playheadBorder,playheadWidth);this.renderPlayButton(Alignment,labelManager,border);this.renderCaptions(Alignment,labelManager,border);},renderControlsChrome:function(){this.controlsChrome=new brightcove.player.ui.Block();this.controlsChrome.themeSet=this.themeSet;this.controlsChrome.styleFormatName=this.styleFormat.name;this.controlsChrome.setSize(this.width,this.controlsHeight);this.controlsChrome.move(0,this.height-this.controlsHeight);this.controlsChrome.setSkins({graphic:this.getGraphic("controlsChrome")});this.controlsChrome.initialize();this.addChild(this.controlsChrome);},renderCurrentTimeLabel:function(Alignment,playheadBorder,playheadWidth,border){this.currentTimeLabel=new brightcove.player.ui.controls.Label();$.extend(true,this.currentTimeLabel,{themeSet:this.themeSet,styleFormatName:"brightcove.player.ui.controls.Label.time",width:(this.width-playheadWidth)/2-border,height:17,x:border+2,y:this.height-this.controlsHeight+1,hAlign:Alignment.LEFT,vAlign:Alignment.BOTTOM});this.currentTimeLabel.initialize();this.addChild(this.currentTimeLabel);},renderDurationLabel:function(Alignment,border){this.durationLabel=new brightcove.player.ui.controls.Label();$.extend(true,this.durationLabel,{themeSet:this.themeSet,styleFormatName:"brightcove.player.ui.controls.Label.time",x:this.width-this.currentTimeLabel.width-border,y:this.currentTimeLabel.y,width:this.currentTimeLabel.width,height:this.currentTimeLabel.height,hAlign:Alignment.RIGHT,vAlign:Alignment.BOTTOM});this.durationLabel.initialize();this.addChild(this.durationLabel);},renderSponsorMessageLabel:function(Alignment,labelManager,border){this.sponsorMessageLabel=new brightcove.player.ui.controls.Label();$.extend(true,this.sponsorMessageLabel,{themeSet:this.themeSet,styleFormatName:"brightcove.player.ui.controls.Label.time",width:(this.width)/2-border,height:this.currentTimeLabel.height,x:border+2,y:this.currentTimeLabel.y,hAlign:Alignment.LEFT,vAlign:Alignment.BOTTOM});this.sponsorMessageLabel.initialize();this.sponsorMessageLabel.hide();this.addChild(this.sponsorMessageLabel);this.sponsorMessageLabel.setText(labelManager.getLabel("sponsor message"));},renderPlayhead:function(playheadBorder,playheadWidth){this.playhead=new brightcove.player.ui.media.Playhead();$.extend(true,this.playhead,{bufferEnabled:this.videoDisplay.supportsInPagePlayback,themeSet:this.themeSet,sliderSize:20,wellVerticalInset:3});this.playhead.setSkins({slider:this.getGraphic("playhead"),well:this.getGraphic("playheadWell"),watched:this.getGraphic("playheadWatched")});this.playhead.setSize(playheadWidth,11);this.playhead.move(playheadBorder,this.height-this.controlsHeight+6);this.playhead.initialize();this.playhead.setEnabled(false);this.playhead.addEventListener(brightcove.player.events.Event.SCRUBBING_START,this.scrubbingStart,this);this.playhead.addEventListener(brightcove.player.events.Event.SCRUBBING_END,this.scrubbingEnd,this);this.addChild(this.playhead);},renderPlayButton:function(Alignment,labelManager,border){this.playButton=new brightcove.player.ui.controls.ToggleButton();$.extend(true,this.playButton,{themeSet:this.themeSet,labelAlignmentH:Alignment.LEFT,labelAlignmentV:Alignment.MIDDLE,labelOffsetX:18,label:labelManager.getLabel("controls play"),iconName:"Play",toggledLabel:labelManager.getLabel("controls pause"),toggledIconName:"Pause"});this.playButton.move(border-1,this.height-18);this.playButton.addEventListener(brightcove.player.events.Event.CLICK,this.play,this);this.playButton.addEventListener(brightcove.player.events.Event.TOGGLED_CLICK,this.pause,this);this.playButton.initialize();if(labelManager.getLabel("chromeFontSize")!=="chromeFontSize"){this.playButton.setFontSize(+labelManager.getLabel("chromeFontSize"));}
this.playButton.setEnabled(false);this.addChild(this.playButton);},renderCaptions:function(Alignment,labelManager,border){var shim=brightcove.player.net.Shim.getInstance(),cdn=this.playerConfig.getItem(brightcove.player.PlayerConfig.CDN),style=document.createElement('style'),url=cdn+"themes/widgets/chromelessVideoPlayer/styles/video-js.css",shimHandler=function(event){if(event.data.key!=url)return;if(style.sheet){style.sheet.cssText=event.data.responseData.replace(/(video-js\.png)/g,cdn+"themes/widgets/chromelessVideoPlayer/styles/$1");}else{style.innerHTML=event.data.responseData.replace(/(video-js\.png)/g,cdn+"themes/widgets/chromelessVideoPlayer/styles/$1");}
document.body.appendChild(style);shim.removeEventListener('complete',shimHandler);},menu,captionsEvent=brightcove.player.events.CaptionsEvent,createItems;this.captionOverlay=new brightcove.player.ui.media.CaptionOverlay();this.captionOverlay.setPlayer(this);menu=new _V_.Menu(this);this.menu=menu;menu.el.appendChild(_V_.createElement('li',{className:'vjs-menu-title',innerHTML:_V_.uc("captions")}));shim.addEventListener('complete',shimHandler,false);shim.generateRequest(url);createItems=function(event){if(this.captionsMenuItemsCreated){return;}
var i=0,languages=event.languages||[],language,currentLanguage=event.currentLanguage,skinDiv=document.createElement('div'),nop=function(){},options,offMenuItem,themeManager=brightcove.player.ui.themes.ThemeManager.getInstance(),css=themeManager.getStylesForSet(this.themeSet),color,titleBackground,itemBackground;color=css["brightcove.player.ui.controls.Button"].styleOverrides.text;if(css["brightcove.player.ui.media.VideoPlayer"]&&css["brightcove.player.ui.media.VideoPlayer"].styleOverrides.gradientTop&&css["brightcove.player.ui.media.VideoPlayer"].styleOverrides.gradientBot){titleBackground=css["brightcove.player.ui.media.VideoPlayer"].styleOverrides.gradientBot;itemBackground=css["brightcove.player.ui.media.VideoPlayer"].styleOverrides.gradientTop;}else{css=themeManager.getStylesForSet('default');titleBackground="rgb(37, 37, 37)";itemBackground=css.background.styleOverrides.background;}
this.playerContext.currentLanguage=currentLanguage;menu.on('click',function(){menu.hide();});offMenuItem=new _V_.OffMenuItem(this,{label:"Off",onClick:nop});offMenuItem.on('click',$.proxy(function(){this.playerContext.menuCaptionsOff=false;this.menu.hide();},this));menu.addItem(offMenuItem);menu.addItem(new _V_.CaptionOptionsMenuItem(this,{label:"Options"}));for(;i<languages.length;i++){options=languages[i];options.onClick=nop;if(language==currentLanguage){options.selected=true;}
menu.addItem(new _V_.CaptionMenuItem(this,options));}
skinDiv.className="vjs-default-skin";menu._el=$(menu.el);menu._el.addClass('vjs-fade-in');menu._el.css({bottom:"5px",color:color,'background-color':itemBackground});menu._el.find('.vjs-menu-title').css({'background':titleBackground,'color':color});skinDiv.appendChild(menu.el);this.videoDisplay.element.appendChild(skinDiv);this.captionsMenuItemsCreated=true;this.menu.clickComponent(currentLanguage);};if(this.showCaptionMenu!=false){this.captionOverlay.addEventListener(captionsEvent.DFXP_LOAD_ERROR,$.proxy(createItems,this));this.captionOverlay.addEventListener(captionsEvent.LANGUAGES_LOADED,$.proxy(createItems,this));}
this.captionsButton=new brightcove.player.ui.controls.ToggleButton();$.extend(true,this.captionsButton,{themeSet:this.themeSet,labelAlignmentH:Alignment.LEFT,labelAlignmentV:Alignment.MIDDLE,labelOffsetX:18,label:"",iconName:"Captions",toggledLabel:"",toggledIconName:"Captions"});this.captionsButton.move(this.width-border-16,this.height-18);this.captionsButton.addEventListener(brightcove.player.events.Event.CLICK,this.closedCaptionsClicked,this);this.captionsButton.addEventListener(brightcove.player.events.Event.TOGGLED_CLICK,this.closedCaptionsClicked,this);this.captionsButton.initialize();this.captionsButton.setVisible(false);this.captionsButton.setEnabled(true);this.addChild(this.captionsButton);},renderVolumeToggle:function(){this.volumeToggle=new brightcove.player.ui.controls.ToggleButton();$.extend(true,this.volumeToggle,{themeSet:this.themeSet,iconName:"Volume",toggledIconName:"Volume"});this.volumeToggle.move(390,this.height-18);this.volumeToggle.addEventListener(brightcove.player.events.Event.CLICK,this.mute,this);this.volumeToggle.addEventListener(brightcove.player.events.Event.TOGGLED_CLICK,this.unmute,this);this.volumeToggle.initialize();this.addChild(this.volumeToggle);},onMediaBegin:function(pEvent){this._super(pEvent);if(this.videoDisplay.supportsInPagePlayback){this.playhead.setEnabled(true);this.playhead.showSlider();}},setSize:function(pWidth,pHeight){this._super(pWidth,pHeight);if(this.initialized){this.videoDisplay.setSize(this.width,this.height-this.controlsHeight);this.controlsChrome.setSize(this.width,this.controlsHeight);this.controlsChrome.move(0,this.height-this.controlsHeight);var playheadBorder=62;var playheadWidth=this.width-playheadBorder*2;var border=10;this.currentTimeLabel.setY(this.height-this.controlsHeight-2);this.durationLabel.move(this.width-this.currentTimeLabel.width-border,this.currentTimeLabel.y);this.playhead.setSize(playheadWidth,11);this.playhead.move(playheadBorder,this.height-this.controlsHeight+6);this.playButton.setY(this.height-18);this.captionsButton.move(this.width-border-16,this.height-18);}},loadMediaDTO:function(pMedia){this.playButton.toggleState(false);this.playhead.setEnabled(false);this._super(pMedia);var formatTime=brightcove.player.utils.MediaUtil.formatTime;this.currentTimeLabel.setText(formatTime(0));this.durationLabel.setText(formatTime(this.video.length/1000));this.playhead.duration=this.video.length/1000;this.playhead.updateTime(0);if(!this.videoDisplay.inErrorState){this.playButton.setEnabled(true);}
if(this.includeCaptionControls&&pMedia.captions&&pMedia.captions.length>0){this.showCaptionControls=true;this.captionsButton.show();}else{this.showCaptionControls=false;this.captionsButton.hide();}},onMediaProgress:function(pEvent){if(this.videoDisplay.supportsInPagePlayback){if(!this.videoURL){return;}
this.updateTimeDisplay(pEvent.position);}
this._super(pEvent);},onAdProgress:function(pEvent){if(this.videoDisplay.supportsInPagePlayback){this.updateTimeDisplayDuringAd(pEvent.position,pEvent.duration);}
this._super(pEvent);},onPlayAttempt:function(pEvent){if(this.videoDisplay.supportsInPagePlayback){this.playButton.toggleState(true);}},updateTimeDisplay:function(pTime){if(this.videoDisplay.supportsInPagePlayback){this.currentTimeLabel.setText(brightcove.player.utils.MediaUtil.formatTime(pTime));this.playhead.updateTime(pTime);}},updateTimeDisplayDuringAd:function(pTime,pDuration){var remainingTime=pDuration-pTime;this.durationLabel.setText(brightcove.player.utils.MediaUtil.formatTime((remainingTime>=0?remainingTime:0)));},play:function(){if(!this.videoDisplay.supportsInPagePlayback){this.playButton.toggleState(false);}
this._super();},showErrorMessage:function(pMessageKey){this._super(pMessageKey);this.playButton.toggleState(false);this.playButton.setEnabled(false);this.playhead.setEnabled(false);},onMediaPlay:function(pEvent){this.updateUIForPlay();if(this.videoDisplay.supportsInPagePlayback){this.playhead.setEnabled(true);}
this._super(pEvent);},onAdPlay:function(pEvent){this.updateUIForPlay();this._super(pEvent);},updateUIForPlay:function(){if(this.videoDisplay.supportsInPagePlayback){this.videoDisplay.disableBrowserControls();this.playButton.toggleState(true);}},onMediaStop:function(pEvent){this.updateUIForStop();this._super(pEvent);},onAdStop:function(pEvent){this.updateUIForStop();this._super(pEvent);},updateUIForStop:function(){if(this.videoDisplay.supportsInPagePlayback){this.playButton.toggleState(false);}},onMediaComplete:function(pEvent){if(this.videoDisplay.supportsInPagePlayback){this.updateTimeDisplay(0);this.playButton.toggleState(false);}
this._super(pEvent);},pause:function(){if(this.videoDisplay.supportsInPagePlayback){this.playButton.toggleState(false);}
this._super();},closedCaptionsClicked:function(){var playerContext=this.playerContext;if(!this.showCaptionMenu){playerContext.setCaptionsEnabled(!playerContext.captionsEnabled);}else if(playerContext.menuCaptions){if(this.menu.isHidden()){this.menu.show();}else{this.menu.hide();}}else if(!playerContext.menuCaptionsOff){playerContext.menuCaptions=true;playerContext.setCaptionsEnabled(true);this.menu.clickComponent(playerContext.currentLanguage);}},closedCaptionsOn:function(){this.captionsButton.toggleState(true);if(this.captionsButton.styleFormat.getValue("toggledIcons")){this.captionsButton.setIconColor(this.captionsButton.styleFormat.getValue("toggledIcons"));}
this.playerContext.setCaptionsEnabled(true);},closedCaptionsOff:function(){this.captionsButton.toggleState(false);if(this.captionsButton.styleFormat.getValue("icons")){this.captionsButton.setIconColor(this.captionsButton.styleFormat.getValue("icons"));}
this.playerContext.setCaptionsEnabled(false);},mute:function(){this.volumeToggle.toggleState(true);this.videoDisplay.setVolume(0);},unmute:function(){this.volumeToggle.toggleState(false);this.videoDisplay.setVolume(1);},scrubbingStart:function(pEvent){this.videoDisplay.setIsScrubbing(true);},scrubbingEnd:function(pEvent){this.videoDisplay.setIsScrubbing(false);},onVideoPlaybackAfterAd:function(pEvent){this.playhead.show();this.sponsorMessageLabel.hide();this.currentTimeLabel.show();this.durationLabel.setText(brightcove.player.utils.MediaUtil.formatTime(this.video.length/1000));if(this.showCaptionControls){this.captionsButton.show();}},onPlayerContextPropertyChange:function(pEvent){if(pEvent.property=="adPlaying"){if(this.playerContext.adPlaying){this.playhead.hide();this.currentTimeLabel.hide();this.sponsorMessageLabel.show();this.captionsButton.hide();if(!this.videoDisplay.supportsInPagePlayback){this.durationLabel.setText("");}}}
else if(pEvent.property=="captionsEnabled"){this.captionsButton.toggleState(this.playerContext.captionsEnabled);if(this.captionsButton.toggled){if(this.captionsButton.styleFormat.getValue("toggledIcons")){this.captionsButton.setIconColor(this.captionsButton.styleFormat.getValue("toggledIcons"));}}else{if(this.captionsButton.styleFormat.getValue("icons")){this.captionsButton.setIconColor(this.captionsButton.styleFormat.getValue("icons"));}}}}});(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?(/\b_super\b/):(/.*/);_V_.Class=function(){};_V_.Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}
function Class(){if(!initializing&&this.init){return this.init.apply(this,arguments);}else if(!initializing){return arguments.callee.prototype.init();}}
Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class;};})();_V_.Component=_V_.Class.extend({init:function(player,options){this.player=player;options=this.options=_V_.merge(this.options||{},options);if(options.el){this.el=options.el;}else{this.el=this.createElement();}
this.initComponents();},destroy:function(){},createElement:function(type,attrs){return _V_.createElement(type||"div",attrs);},buildCSSClass:function(){return"";},initComponents:function(){var options=this.options;if(options&&options.components){this.eachProp(options.components,function(name,opts){if(opts===false)return;var tempAdd=this.proxy(function(){this[name]=this.addComponent(name,opts);});if(opts.loadEvent){this.one(opts.loadEvent,tempAdd);}else{tempAdd();}});}},addComponent:function(name,options){var component,componentClass;if(typeof name=="string"){options=options||{};componentClass=options.componentClass||_V_.uc(name);component=new _V_[componentClass](this.player||this,options);}else{component=name;}
this.el.appendChild(component.el);return component;},removeComponent:function(component){this.el.removeChild(component.el);},show:function(){this.el.style.display="block";},hide:function(){this.el.style.display="none";},isHidden:function(){return this.el.style.display!="block";},fadeIn:function(){this.removeClass("vjs-fade-out");this.addClass("vjs-fade-in");},fadeOut:function(){this.removeClass("vjs-fade-in");this.addClass("vjs-fade-out");},lockShowing:function(){var style=this.el.style;this.show();style.opacity=1;style.visiblity="visible";},unlockShowing:function(){var style=this.el.style;this.hidden=null;style.display="";style.opacity="";style.visiblity="";},addClass:function(classToAdd){_V_.addClass(this.el,classToAdd);},removeClass:function(classToRemove){_V_.removeClass(this.el,classToRemove);},on:function(type,fn,uid){_V_.on(this.el,type,_V_.proxy(this,fn));return this;},addEvent:function(){return this.on.apply(this,arguments);},off:function(type,fn){_V_.off(this.el,type,fn);return this;},removeEvent:function(){return this.off.apply(this,arguments);},trigger:function(type,e){_V_.trigger(this.el,type,e);return this;},triggerEvent:function(){return this.trigger.apply(this,arguments);},one:function(type,fn){_V_.one(this.el,type,_V_.proxy(this,fn));return this;},ready:function(fn){if(!fn)return this;if(this.isReady){fn.call(this);}else{if(this.readyQueue===undefined){this.readyQueue=[];}
this.readyQueue.push(fn);}
return this;},triggerReady:function(){this.isReady=true;if(this.readyQueue&&this.readyQueue.length>0){this.each(this.readyQueue,function(fn){fn.call(this);});this.readyQueue=[];this.trigger("ready");}},each:function(arr,fn){_V_.each.call(this,arr,fn);},eachProp:function(obj,fn){_V_.eachProp.call(this,obj,fn);},extend:function(obj){_V_.merge(this,obj);},proxy:function(fn,uid){return _V_.proxy(this,fn,uid);}});MediaEvent=brightcove.player.events.MediaEvent;_V_.Control=_V_.Component.extend({buildCSSClass:function(){return"vjs-control "+this._super();}});_V_.ControlBar=_V_.Component.extend({options:{components:{"playToggle":{},"fullscreenToggle":{},"currentTimeDisplay":{},"timeDivider":{},"durationDisplay":{},"remainingTimeDisplay":{},"progressControl":{},"captions":{}}},init:function(player,options){var firstTime=true;this._super(player,options);this._mouseover=this.proxy(this.fadeIn);this._mouseout=this.proxy(this.fadeOut);this._toggleFade=this.proxy(this.toggleFade);this._play=this.proxy(function(){if(firstTime){this.fadeIn();firstTime=false;}
this.player.element.addEventListener("mouseover",this._mouseover,false);this.player.element.addEventListener("mouseout",this._mouseout,false);this.player.videoDisplay.element.addEventListener("touchstart",this._toggleFade,false);});this._enabled=false;if(player.preventFullScreen){this.fullscreenToggle.hide();}
if(!player.includeCaptionControls||!(player.playerContext.captionsEnabled||player.playlistCaptions||(player.video&&player.video.captions&&player.video.captions.length>0))){this.captions.hide();}},enableControl:function(){this._play();this._enabled=true;},isEnabled:function(){return this._enabled;},disableControl:function(){this.fadeOut();this.player.removeEventListener(MediaEvent.PLAY,this._play,false);this.player.element.removeEventListener('mouseover',this._mouseover,false);this.player.element.removeEventListener('mouseout',this._mouseout,false);this.player.videoDisplay.element.removeEventListener('touchstart',this._toggleFade,false);this._enabled=false;},createElement:function(){return _V_.createElement("div",{className:"vjs-controls"});},toggleFade:function(event){var idx=this.el.className.search('fade-in');if(idx!=-1){this.fadeOut();}else{this.fadeIn();}
event.preventDefault();},fadeIn:function(){this._super();this.player.dispatchEvent("controlsvisible");},fadeOut:function(){this._super();this.player.dispatchEvent("controlshidden");},lockShowing:function(){this.el.style.opacity="1";}});_V_.Button=_V_.Control.extend({init:function(player,options){this._super(player,options);this.on("click",this.onClick);this.on("focus",this.onFocus);this.on("blur",this.onBlur);},createElement:function(type,attrs){attrs=_V_.merge({className:this.buildCSSClass(),innerHTML:'<div><span class="vjs-control-text">'+(this.buttonText||"Need Text")+'</span></div>',role:"button",tabIndex:0},attrs);return this._super(type,attrs);},onClick:function(){},onFocus:function(){_V_.on(document,"keyup",_V_.proxy(this,this.onKeyPress));},onKeyPress:function(event){if(event.which==32||event.which==13){event.preventDefault();this.onClick();}},onBlur:function(){_V_.off(document,"keyup",_V_.proxy(this,this.onKeyPress));}});_V_.PlayButton=_V_.Button.extend({buttonText:"Play",buildCSSClass:function(){return"vjs-play-button "+this._super();},onClick:function(){this.player.play();}});_V_.PauseButton=_V_.Button.extend({buttonText:"Pause",buildCSSClass:function(){return"vjs-pause-button "+this._super();},onClick:function(){this.player.pause();}});_V_.PlayToggle=_V_.Button.extend({buttonText:"Play",init:function(player,options){this._super(player,options);player.addEventListener(MediaEvent.PLAY,_V_.proxy(this,this.onPlay),false);player.addEventListener(MediaEvent.STOP,_V_.proxy(this,this.onPause),false);},buildCSSClass:function(){return"vjs-play-control "+this._super();},onClick:function(event){if(this.player.isPaused()){this.player.play();}else{this.player.pause();}
event.preventDefault();},onPlay:function(){_V_.removeClass(this.player.element,"vjs-paused");_V_.addClass(this.player.element,"vjs-playing");},onPause:function(){_V_.removeClass(this.player.element,"vjs-playing");_V_.addClass(this.player.element,"vjs-paused");}});_V_.FullscreenToggle=_V_.Button.extend({buttonText:"Fullscreen",buildCSSClass:function(){return"vjs-fullscreen-control "+this._super();},onClick:function(){this.toggleFullscreen(this.player.videoDisplay.video.video);},toggleFullscreen:function(el){if((document.fullScreenElement&&document.fullScreenElement!==null)||(!document.mozFullScreen&&!document.webkitIsFullScreen)){if(el.requestFullScreen){el.requestFullScreen();}else if(el.mozRequestFullScreen){el.mozRequestFullScreen();}else if(el.webkitEnterFullScreen){el.webkitEnterFullScreen();}else if(el.webkitRequestFullScreen){el.webkitRequestFullScreen();if(document.fullscreenEnabled){this.toggleFullscreen(el);}}}else{if(document.cancelFullScreen){document.cancelFullScreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.webkitExitFullScreen){document.webkitExitFullScreen();}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}}}});_V_.BigPlayButton=_V_.Button.extend({init:function(player,options){this._super(player,options);player.addEventLlistener("play",_V_.proxy(this,this.hide),false);player.addEventLlistener("ended",_V_.proxy(this,this.show),false);},createElement:function(){return this._super("div",{className:"vjs-big-play-button",innerHTML:"<span></span>"});},onClick:function(){this.player.play();}});_V_.LoadingSpinner=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEventListener("canplay",_V_.proxy(this,this.hide),false);player.addEventListener("canplaythrough",_V_.proxy(this,this.hide),false);player.addEventListener("playing",_V_.proxy(this,this.hide),false);player.addEventListener("seeked",_V_.proxy(this,this.hide),false);player.addEventListener("seeking",_V_.proxy(this,this.show),false);player.addEventListener("error",_V_.proxy(this,this.show),false);player.addEventLlistener("waiting",_V_.proxy(this,this.show),false);},createElement:function(){var classNameSpinner,innerHtmlSpinner;if(typeof this.player.el.style.WebkitBorderRadius=="string"||typeof this.player.el.style.MozBorderRadius=="string"||typeof this.player.el.style.KhtmlBorderRadius=="string"||typeof this.player.el.style.borderRadius=="string")
{classNameSpinner="vjs-loading-spinner";innerHtmlSpinner="<div class='ball1'></div><div class='ball2'></div><div class='ball3'></div><div class='ball4'></div><div class='ball5'></div><div class='ball6'></div><div class='ball7'></div><div class='ball8'></div>";}else{classNameSpinner="vjs-loading-spinner-fallback";innerHtmlSpinner="";}
return this._super("div",{className:classNameSpinner,innerHTML:innerHtmlSpinner});}});_V_.CurrentTimeDisplay=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEventListener(MediaEvent.PROGRESS,_V_.proxy(this,this.updateContent),false);},createElement:function(){var el=this._super("div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=_V_.createElement("div",{className:"vjs-current-time-display",innerHTML:'0:00'});el.appendChild(_V_.createElement("div").appendChild(this.content));return el;},updateContent:function(newTime){var time=typeof newTime=='number'?newTime:this.player.getPosition();this.content.innerHTML=_V_.formatTime(time,this.player.getDuration());}});_V_.DurationDisplay=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEventListener(MediaEvent.PROGRESS,_V_.proxy(this,this.updateContent),false);},createElement:function(){var el=this._super("div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=_V_.createElement("div",{className:"vjs-duration-display",innerHTML:'0:00'});el.appendChild(_V_.createElement("div").appendChild(this.content));return el;},updateContent:function(){if(this.player.getDuration()){this.content.innerHTML=_V_.formatTime(this.player.getDuration());}}});_V_.TimeDivider=_V_.Component.extend({createElement:function(){return this._super("div",{className:"vjs-time-divider",innerHTML:'<div><span>/</span></div>'});}});_V_.RemainingTimeDisplay=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEventListener(MediaEvent.PROGRESS,_V_.proxy(this,this.updateContent),false);},createElement:function(){var el=this._super("div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=_V_.createElement("div",{className:"vjs-remaining-time-display",innerHTML:'-0:00'});el.appendChild(_V_.createElement("div").appendChild(this.content));return el;},updateContent:function(newTime){var position=typeof newTime=='number'?newTime:this.player.getPosition();if(this.player.getDuration()){this.content.innerHTML="-"+_V_.formatTime(this.player.getDuration()-position);}}});_V_.Slider=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEventListener(MediaEvent.PROGRESS,_V_.proxy(this,this.update),false);this.on("mousedown",this.onMouseDown);this.on("touchstart",this.onMouseDown);this.on("focus",this.onFocus);this.on("blur",this.onBlur);this.player.addEventListener("controlsvisible",this.proxy(this.update),false);this.update();},createElement:function(type,attrs){attrs=_V_.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},attrs);return this._super(type,attrs);},onMouseDown:function(event){event.preventDefault();_V_.blockTextSelection();_V_.on(document,"mousemove",_V_.proxy(this,this.onMouseMove));_V_.on(document,"mouseup",_V_.proxy(this,this.onMouseUp));_V_.on(document,"touchmove",_V_.proxy(this,this.onMouseMove));_V_.on(document,"touchend",_V_.proxy(this,this.onMouseUp));this.onMouseMove(event);},onMouseUp:function(event){this.update();_V_.unblockTextSelection();_V_.off(document,"mousemove",this.onMouseMove,false);_V_.off(document,"mouseup",this.onMouseUp,false);_V_.off(document,"touchstart",this.onMouseMove,false);_V_.off(document,"touchend",this.onMouseUp,false);},update:function(newTime){var barProgress,progress=this.getPercent(newTime),handle=this.handle,bar=this.bar;if(isNaN(progress)){progress=0;}
barProgress=progress;if(handle){var box=this.el,boxWidth=box.offsetWidth,handleWidth=handle.el.offsetWidth,handlePercent=(handleWidth)?handleWidth/boxWidth:0,boxAdjustedPercent=1-handlePercent,adjustedProgress=progress*boxAdjustedPercent;barProgress=adjustedProgress+(handlePercent/2);handle.el.style.left=_V_.round(adjustedProgress*100,2)+"%";}
bar.el.style.width=_V_.round(barProgress*100,2)+"%";},calculateDistance:function(event){var box=this.el,boxX=_V_.findPosX(box),boxW=box.offsetWidth,handle=this.handle,pageX;if(event.originalEvent&&event.originalEvent.changedTouches){pageX=event.originalEvent.changedTouches[0].pageX;}else{pageX=event.pageX;}
if(handle){var handleW=handle.el.offsetWidth;boxX=boxX+(handleW/2);boxW=boxW-handleW;}
return Math.max(0,Math.min(1,(pageX-boxX)/boxW));},onFocus:function(event){_V_.on(document,"keyup",_V_.proxy(this,this.onKeyPress));},onKeyPress:function(event){if(event.which==37){event.preventDefault();this.stepBack();}else if(event.which==39){event.preventDefault();this.stepForward();}},onBlur:function(event){_V_.off(document,"keyup",_V_.proxy(this,this.onKeyPress));}});_V_.ProgressControl=_V_.Component.extend({options:{components:{"seekBar":{}}},createElement:function(){return this._super("div",{className:"vjs-progress-control vjs-control"});}});_V_.SeekBar=_V_.Slider.extend({options:{components:{"loadProgressBar":{},"bar":{componentClass:"PlayProgressBar"},"handle":{componentClass:"SeekHandle"}}},playerEvent:MediaEvent.PROGRESS,init:function(player,options){this._super(player,options);},createElement:function(){return this._super("div",{className:"vjs-progress-holder"});},getPercent:function(newTime){var duration=this.player.getDuration();if(typeof newTime=='number')return newTime/duration;return this.player.getPosition()/duration;},onMouseDown:function(event){this._super(event);this.player.scrubbing=true;this.videoWasPlaying=!this.player.isPaused();this.player.pause();},onMouseMove:function(event){var newTime=this.calculateDistance(event)*this.player.getDuration();if(newTime==this.player.getDuration()){newTime=newTime-0.1;}
this.player.seek(newTime);this.update(newTime);this.player.controlBar.remainingTimeDisplay.updateContent(newTime);this.player.controlBar.currentTimeDisplay.updateContent(newTime);},onMouseUp:function(event){this._super(event);this.player.scrubbing=false;if(this.videoWasPlaying){this.player.play();}},stepForward:function(){this.player.seek(this.player.getPosition()+1);},stepBack:function(){this.player.seek(this.player.getPosition()-1);}});_V_.LoadProgressBar=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEventListener(MediaEvent.PROGRESS,_V_.proxy(this,this.update),false);},createElement:function(){return this._super("div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'});},update:function(){}});_V_.PlayProgressBar=_V_.Component.extend({createElement:function(){return this._super("div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'});}});_V_.SeekHandle=_V_.Component.extend({createElement:function(){return this._super("div",{className:"vjs-seek-handle",innerHTML:'<span class="vjs-control-text">00:00</span>'});}});_V_.PosterImage=_V_.Button.extend({init:function(player,options){this._super(player,options);if(!this.player.options.poster){this.hide();}
player.addEventListener(MediaEvent.PLAY,_V_.proxy(this,this.hide),false);},createElement:function(){return _V_.createElement("img",{className:"vjs-poster",src:this.player.options.poster,tabIndex:-1});},onClick:function(){this.player.play();}});_V_.Captions=_V_.Button.extend({kind:"captions",init:function(player,options){var captionOverlay,captionsEvent=brightcove.player.events.CaptionsEvent;this._super(player,options);this.menu=this.createMenu();captionOverlay=this.player.captionOverlay;this.languages=captionOverlay.getLanguages();if(this.languages.length>0){this.currentLanguage=captionOverlay.getCurrentLanguage();this.createItems();}else if(this.showCaptionMenu!=false){this.player.captionOverlay.addEventListener(captionsEvent.DFXP_LOAD_ERROR,$.proxy(this.createItems,this));this.player.captionOverlay.addEventListener(captionsEvent.LANGUAGES_LOADED,$.proxy(this.createItems,this));}},createMenu:function(){var menu=new _V_.Menu(this.player);menu.el.appendChild(_V_.createElement('li',{className:'vjs-menu-title',innerHTML:_V_.uc(this.kind)}));this.addComponent(menu);menu.hide();return menu;},createItems:function(event){if(this.itemsCreated){return;}
event=event||{};var i=0,languages=event.languages||this.languages||[],currentLanguage=event.currentLanguage||this.currentLanguage||"",language,options,offMenuItem,nop=function(){};this.player.playerContext.currentLanguage=currentLanguage;this.menu.addItem(new _V_.OffMenuItem(this.player,{label:"Off",onClick:nop}));this.menu.addItem(new _V_.CaptionOptionsMenuItem(this.player,{label:"Options"}));for(;i<languages.length;i++){options=languages[i];options.onClick=nop;if(language==currentLanguage){options.selected=true;}
this.menu.addItem(new _V_.CaptionMenuItem(this.player,options));}
this.itemsCreated=true;this.player.playerContext.menuCaptions=true;this.menu.clickComponent(currentLanguage);},buildCSSClass:function(){return this.className+" vjs-menu-button "+this._super();},createElement:function(){return this._super('div',{className:'vjs-menu-button vjs-captions-button'});},onClick:function(){var playerContext=this.player.playerContext;if(!this.player.showCaptionMenu){playerContext.setCaptionsEnabled(!playerContext.captionsEnabled);}else if(playerContext.menuCaptions){if(this.menu.isHidden()){this.menu.lockShowing();}else{this.menu.hide();}}else if(playerContext.menuCaptionsOff){playerContext.menuCaptionsOff=false;this.menu.hide();}else{playerContext.menuCaptions=true;playerContext.setCaptionsEnabled(true);this.menu.clickComponent(playerContext.currentLanguage);}},toggleClass:function(){var captionsEnabled=this.player.playerContext.captionsEnabled;if(captionsEnabled){this.addClass('vjs-captions-button-clicked');}else{this.removeClass('vjs-captions-button-clicked');}}});_V_.Menu=_V_.Component.extend({init:function(player,options){this._super(player,options);this.components=[];},addItem:function(component){this.components.push(component);this.addComponent(component);},getItem:function(language){var i,component;for(i=0;i<this.components.length;i++){component=this.components[i];if(component.options.language==language){return component;}}
return null;},clickComponent:function(language){var component=this.getItem(language);if(component){component.onClick();}else{component=this.getItem("Default");if(component){component.onClick();}else if(this.components.length==2){this.components[1].onClick();}}},createElement:function(){return this._super("ul",{className:"vjs-menu"});}});_V_.MenuItem=_V_.Button.extend({init:function(player,options){this._super(player,options);if(options.selected){this.selected=true;this.clicked=true;this.addClass('vjs-selected');}},createElement:function(type,attrs){return this._super("li",_V_.merge({className:"vjs-menu-item",innerHTML:this.options.label},attrs));},onClick:function(){this.selected(true);},select:function(selected){if(selected){this.addClass("vjs-selected");}else{this.removeClass("vjs-selected");}}});_V_.CaptionOptionsMenuItem=_V_.MenuItem.extend({kind:'captionoptions',init:function(player,options){this._super(player,options);},onClick:function(){this.player.captionOverlay.showOptions();return false;}});_V_.OffMenuItem=_V_.MenuItem.extend({kind:'off',init:function(player,options){this._super(player,options);this.player.addEventListener('languageSelection',$.proxy(this.update,this));this.update();},onClick:function(){var event=document.createEvent('Event');event.initEvent('languageSelection',false,true);this.selected=true;this.clicked=true;this.player.dispatchEvent(event);this.player.playerContext.setCaptionsEnabled(false);this.player.playerContext.menuCaptionsOff=true;this.player.playerContext.menuCaptions=false;},update:function(){if(!this.clicked){this.selected=false;}
this.clicked=false;this.select(this.selected);}});_V_.CaptionMenuItem=_V_.MenuItem.extend({kind:'captionItem',init:function(player,options){this._super(player,options);this.player.addEventListener('languageSelection',$.proxy(this.update,this));this.update();},onClick:function(){this.player.playerContext.setCaptionsEnabled(true);var event=document.createEvent('Event');event.initEvent('languageSelection',false,true);this.selected=true;this.clicked=true;this.player.dispatchEvent(event);this.player.captionOverlay.setLanguage(this.options.language);},update:function(){if(!this.clicked){this.selected=false;}
this.clicked=false;this.select(this.selected);}});_V_.extend({on:function(elem,type,fn){var data=_V_.getData(elem),handlers;if(data&&!data.handler){data.handler=function(event){event=_V_.fixEvent(event);var handlers=_V_.getData(elem).events[event.type];if(handlers){var handlersCopy=[];_V_.each(handlers,function(handler,i){handlersCopy[i]=handler;});for(var i=0,l=handlersCopy.length;i<l;i++){handlersCopy[i].call(elem,event);}}};}
if(!data.events){data.events={};}
handlers=data.events[type];if(!handlers){handlers=data.events[type]=[];if(document.addEventListener){elem.addEventListener(type,data.handler,false);}else if(document.attachEvent){elem.attachEvent("on"+type,data.handler);}}
if(!fn.guid){fn.guid=_V_.guid++;}
handlers.push(fn);},addEvent:function(){return _V_.on.apply(this,arguments);},off:function(elem,type,fn){var data=_V_.getData(elem),handlers;if(!data.events){return;}
if(!type){for(type in data.events){_V_.cleanUpEvents(elem,type);}
return;}
handlers=data.events[type];if(!handlers){return;}
if(fn&&fn.guid){for(var i=0;i<handlers.length;i++){if(handlers[i].guid===fn.guid){handlers.splice(i--,1);}}}
_V_.cleanUpEvents(elem,type);},removeEvent:function(){return _V_.off.apply(this,arguments);},cleanUpEvents:function(elem,type){var data=_V_.getData(elem);if(data.events[type].length===0){delete data.events[type];if(document.removeEventListener){elem.removeEventListener(type,data.handler,false);}else if(document.detachEvent){elem.detachEvent("on"+type,data.handler);}}
if(_V_.isEmpty(data.events)){delete data.events;delete data.handler;}
if(_V_.isEmpty(data)){_V_.removeData(elem);}},fixEvent:function(event){if(event[_V_.expando]){return event;}
var originalEvent=event;event=new _V_.Event(originalEvent);for(var i=_V_.Event.props.length,prop;i;){prop=_V_.Event.props[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=event.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}
if(event.pageX==null&&event.clientX!=null){var eventDocument=event.target.ownerDocument||document,doc=eventDocument.documentElement,body=eventDocument.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(event.which==null&&(event.charCode!=null||event.keyCode!=null)){event.which=event.charCode!=null?event.charCode:event.keyCode;}
if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey;}
if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));}
return event;},trigger:function(elem,event){var data=_V_.getData(elem),parent=elem.parentNode||elem.ownerDocument,type=event.type||event,handler;if(data){handler=data.handler;}
event=typeof event==="object"?event[_V_.expando]?event:new _V_.Event(type,event):new _V_.Event(type);event.type=type;if(handler){handler.call(elem,event);}
event.result=undefined;event.target=elem;},triggerEvent:function(){return _V_.trigger.apply(this,arguments);},one:function(elem,type,fn){_V_.on(elem,type,function(){_V_.off(elem,type,arguments.callee);fn.apply(this,arguments);});}});_V_.Event=function(src,props){if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){_V_.merge(this,props);}
this.timeStamp=(new Date).getTime();this[_V_.expando]=true;};_V_.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};_V_.Event.props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");function returnTrue(){return true;}
function returnFalse(){return false;}
brightcove.player.ui.media.utils.CuePointType={AD:0,CODE:1,CHAPTER:2};(function(){var byTimeAscending=function(left,right){return left.time-right.time;};brightcove.player.ui.media.utils.CuePointWatcher=brightcove.player.core.EventDispatcher.extend({constructor:function(pPlayer){this._super();this.player=pPlayer;this.cuesFired=[];this.hasCues=false;this.cuePoints=[];this.positionAtLastProgress=0;var MediaEvent=brightcove.player.events.MediaEvent;this.player.addEventListener(MediaEvent.PLAY,this.onMediaPlay,this);this.player.addEventListener(MediaEvent.STOP,this.onMediaStop,this);this.player.addEventListener(MediaEvent.SEEK_NOTIFY,this.onMediaSeek,this);this.player.addEventListener(MediaEvent.PROGRESS,this.onMediaProgress,this);this.context=brightcove.player.PlayerContext.getInstance();},fireValidCuePointsFromIndex:function(pIndex,pPosition,pForce){if((this.player.isPaused()&&!pForce)||pIndex<0||pIndex>=this.cuePoints.length){return;}
var cuePoint=this.cuePoints[pIndex];if(cuePoint==null){return;}
if(pPosition<cuePoint.time&&!pForce){return;}
var storedCue=this.getStoredCue(cuePoint);if(!storedCue){this.cuesFired.push(cuePoint);if(cuePoint.type==brightcove.player.ui.media.utils.CuePointType.AD&&(cuePoint.name=="Pre-roll"||cuePoint.name=="Post-roll")){var ignoreThisJSLint=true;}else{var Tracer=brightcove.player.utils.Tracer;Tracer.debug(this,"Firing cue point of type "+
cuePoint.type+" at "+cuePoint.time+" ("+this.player.getPosition()+")",Tracer.TYPE_DEBUG);var CuePointEvent=brightcove.player.events.CuePointEvent;this.dispatchEvent(new CuePointEvent(CuePointEvent.CUE,cuePoint));}}
this.fireValidCuePointsFromIndex(pIndex+1,pPosition,pForce);},getStoredCue:function(pCuePoint){for(var i=0;i<this.cuesFired.length;i++){if(this.cuesFired[i]==pCuePoint){return this.cuesFired[i];}}
return null;},preventExecution:function(){return!this.hasCues||this.context.adPlaying;},findIndexOfClosestCue:function(pPosition,pStartIndex){var time;var numCues=this.cuePoints.length;for(var i=pStartIndex;i<numCues;i++){time=this.cuePoints[i].time;if(time>=pPosition){return i;}}
return-1;},reset:function(){this.cuesFired=[];this.positionAtLastProgress=0;},onMediaPlay:function(pEvent){if(this.cuePoints==null||this.cuePoints.length<1){this.hasCues=false;}else{this.hasCues=true;var firstCue=this.cuePoints[0];if(firstCue.time==0&&Math.floor(this.player.getPosition())==0){this.fireValidCuePointsFromIndex(0,0);}}},onMediaStop:function(pEvent){if(this.preventExecution()){return;}
var position=pEvent.position;var duration=pEvent.duration;if(position==duration){var positionToCheck=position;if(this.positionAtLastProgress>0){positionToCheck=this.positionAtLastProgress;}
var closestIndex=this.findIndexOfClosestCue(positionToCheck,0);this.fireValidCuePointsFromIndex(closestIndex,Number.MAX_VALUE,true);this.reset();}},onMediaProgress:function(pEvent){if(this.preventExecution()){return;}
var position=pEvent.position||this.player.getPosition(),positionToCheck=this.positionAtLastProgress,closestIndex=this.findIndexOfClosestCue(positionToCheck,0);this.fireValidCuePointsFromIndex(closestIndex,position);this.positionAtLastProgress=position;},onMediaSeek:function(pEvent){if(this.preventExecution()){return;}
this.reset();this.positionAtLastProgress=this.player.getPosition();},addCuePoints:function(cuePoints){this.cuePoints=this.cuePoints.concat(cuePoints||[]);this.cuePoints.sort(byTimeAscending);},updateCuePoints:function(pCuePoints){this.reset();var cuePoints=pCuePoints||[];this.cuePoints=cuePoints.slice();this.cuePoints.sort(byTimeAscending);this.hasCues=(this.cuePoints.length>0);}});})();brightcove.player.ui.themes.skins.Skin=brightcove.player.core.Class.extend({draw:function(pBlock){}});brightcove.player.ui.themes.skins.GradientRect=brightcove.player.ui.themes.skins.Skin.extend({draw:function(pBlock){this.div=pBlock.div;this.readValuesFromStyle(pBlock);this.orientation=this.orientation||brightcove.player.ui.ScrollDirection.VERTICAL;this.renderBackground();this.renderBorders(pBlock);this.roundCorners();},setOrientation:function(pOrientation){this.orientation=pOrientation;},isHorizontal:function(){return(this.orientation==brightcove.player.ui.ScrollDirection.HORIZONTAL);},getOrientationString:function(){return(this.isHorizontal())?"100% 0":"0 100%";},readValuesFromStyle:function(pBlock){var state="";if(pBlock.styleFormat.getValue("gradientTop")==undefined){state="."+(this.state||"active");}
this.top=pBlock.styleFormat.getValue("gradientTop"+state);this.mid=pBlock.styleFormat.getValue("gradientMid"+state);this.bot=pBlock.styleFormat.getValue("gradientBot"+state);state="";if(pBlock.styleFormat.getValue("border")==undefined){state="."+(this.state||"active");}
this.borderColor=pBlock.styleFormat.getValue("border"+state);this.ratios=pBlock.styleFormat.getValue("gradientRatios");this.borders=pBlock.styleFormat.getValue("borders")||[0,0,0,0];this.corners=pBlock.styleFormat.getValue("corners")||[0,0,0,0];},renderBackground:function(){if(this.mid==undefined){this.div.style.background="-webkit-gradient(linear, 0 0, "+this.getOrientationString()+", from("+this.top+"), to("+this.bot+"))";}else{var midPoint=(this.ratios)?this.ratios[1]/255:"0.5";this.div.style.background="-webkit-gradient(linear, 0 0, "+this.getOrientationString()+", from("+this.top+"),"
+"color-stop("+midPoint+", "+this.mid+"), to("+this.bot+"))";}},renderBorders:function(pBlock){if(this.borderColor!=undefined){this.div.style.width=(parseInt(pBlock.element.style.width,10)-(this.borders[1]+this.borders[3]))+"px";this.div.style.height=(parseInt(pBlock.element.style.height,10)-(this.borders[0]+this.borders[2]))+"px";this.div.style.borderTop=this.borders[0]+"px solid "+this.borderColor;this.div.style.borderRight=this.borders[1]+"px solid "+this.borderColor;this.div.style.borderBottom=this.borders[2]+"px solid "+this.borderColor;this.div.style.borderLeft=this.borders[3]+"px solid "+this.borderColor;}},roundCorners:function(){$(this.div).css({"-webkit-border-top-left-radius":this.corners[0]+"px","-webkit-border-top-right-radius":this.corners[1]+"px","-webkit-border-bottom-left-radius":this.corners[2]+"px","-webkit-border-bottom-right-radius":this.corners[3]+"px"});}});brightcove.player.ui.themes.skins.SimpleRect=brightcove.player.ui.themes.skins.Skin.extend({draw:function(pBlock){this.div=pBlock.div;this.readValuesFromStyle(pBlock);this.renderBackground();this.renderBorders(pBlock);this.roundCorners();},renderBackground:function(){this.div.style.background=this.backgroundColor;this.div.style.opacity=this.backgroundAlpha;},readValuesFromStyle:function(pBlock){var state="";face=pBlock.styleFormat.getValue("face");if(face==undefined){state="."+(this.state||"active");}
this.backgroundColor=pBlock.styleFormat.getValue("face"+state);this.backgroundAlpha=pBlock.styleFormat.getValue("face"+state+"Alpha");if(this.backgroundAlpha==undefined){this.backgroundAlpha=1;}
this.borderColor=pBlock.styleFormat.getValue("border"+state);this.borders=pBlock.styleFormat.getValue("borders")||[0,0,0,0];this.corners=pBlock.styleFormat.getValue("corners")||[0,0,0,0];},renderBorders:function(pBlock){if(this.borderColor!=undefined){this.div.style.width=(parseInt(pBlock.element.style.width,10)-(this.borders[1]+this.borders[3]))+"px";this.div.style.height=(parseInt(pBlock.element.style.height,10)-(this.borders[0]+this.borders[2]))+"px";this.div.style.borderTop=this.borders[0]+"px solid "+this.borderColor;this.div.style.borderRight=this.borders[1]+"px solid "+this.borderColor;this.div.style.borderBottom=this.borders[2]+"px solid "+this.borderColor;this.div.style.borderLeft=this.borders[3]+"px solid "+this.borderColor;}},roundCorners:function(){$(this.div).css({"-webkit-border-top-left-radius":this.corners[0]+"px","-webkit-border-top-right-radius":this.corners[1]+"px","-webkit-border-bottom-left-radius":this.corners[2]+"px","-webkit-border-bottom-right-radius":this.corners[3]+"px"});}});brightcove.player.ui.themes.skins.GradientPlayhead=brightcove.player.ui.themes.skins.GradientRect.extend({draw:function(pBlock){this._super(pBlock);var canvas=pBlock.canvas;canvas.width=pBlock.width;canvas.height=pBlock.height;canvas.style.position="absolute";canvas.style.top="3px";canvas.style.left="5px";var context=canvas.getContext("2d");context.fillStyle=pBlock.styleFormat.getValue("icon");context.fillRect(0,2,1,1);context.fillRect(1,1,1,3);context.fillRect(2,0,1,5);context.fillRect(7,0,1,5);context.fillRect(8,1,1,3);context.fillRect(9,2,1,1);}});brightcove.player.ui.themes.skins.HorizontalGradientRect=brightcove.player.ui.themes.skins.GradientRect.extend({orientation:"horizontal"});brightcove.player.ui.themes.skins.OverlayPlayIcon=brightcove.player.ui.themes.skins.Skin.extend({draw:function(pBlock){var ctx=pBlock.canvas.getContext("2d");ctx.globalAlpha=0.80;ctx.beginPath();ctx.moveTo(70.4,36.7);ctx.bezierCurveTo(69.7,35.9,68.4,35.0,66.5,33.9);ctx.lineTo(11.1,1.9);ctx.bezierCurveTo(8.9,0.7,7.1,0.1,5.5,0.0);ctx.lineTo(5.3,0.0);ctx.bezierCurveTo(3.7,0.0,2.4,0.5,1.4,1.5);ctx.bezierCurveTo(0.5,2.6,0.0,4.1,0.0,6.2);ctx.lineTo(0.7,74.8);ctx.bezierCurveTo(0.7,77.0,1.2,78.4,2.3,79.1);ctx.bezierCurveTo(3.2,79.7,4.3,80.0,5.8,80.0);ctx.lineTo(5.9,80.0);ctx.bezierCurveTo(7.3,80.0,8.5,79.6,9.6,79.0);ctx.lineTo(68.1,45.3);ctx.bezierCurveTo(68.7,45.0,69.4,44.5,70.2,43.8);ctx.bezierCurveTo(71.3,42.9,71.8,41.6,71.7,40.2);ctx.bezierCurveTo(71.7,38.8,71.2,37.6,70.4,36.7);ctx.closePath();ctx.moveTo(69.3,42.7);ctx.bezierCurveTo(68.6,43.3,67.9,43.7,67.4,44.0);ctx.lineTo(8.9,77.7);ctx.bezierCurveTo(8.0,78.3,6.9,78.6,5.8,78.6);ctx.bezierCurveTo(4.6,78.6,3.7,78.3,3.1,77.9);ctx.bezierCurveTo(2.5,77.5,2.1,76.5,2.1,74.8);ctx.lineTo(1.4,6.1);ctx.bezierCurveTo(1.4,4.5,1.8,3.3,2.5,2.5);ctx.bezierCurveTo(3.2,1.7,4.2,1.4,5.5,1.4);ctx.bezierCurveTo(6.8,1.5,8.4,2.0,10.4,3.1);ctx.lineTo(65.8,35.1);ctx.bezierCurveTo(67.5,36.2,68.7,37.0,69.3,37.7);ctx.bezierCurveTo(69.9,38.4,70.3,39.2,70.3,40.2);ctx.bezierCurveTo(70.3,41.2,70.0,42.1,69.3,42.7);ctx.closePath();ctx.fill();ctx.globalAlpha=1.00;ctx.beginPath();ctx.moveTo(2.8,6.1);ctx.bezierCurveTo(3.1,2.7,4.9,1.7,8.0,3.1);ctx.lineTo(66.8,37.1);ctx.bezierCurveTo(69.6,39.1,69.6,41.1,66.8,43.1);ctx.lineTo(8.0,77.0);ctx.bezierCurveTo(7.7,77.2,7.3,77.3,7.0,77.4);ctx.bezierCurveTo(6.0,77.8,5.1,77.8,4.4,77.4);ctx.bezierCurveTo(3.5,77.0,3.0,75.8,2.8,74.0);ctx.lineTo(2.8,6.1);ctx.closePath();gradient=ctx.createRadialGradient(34.1,52.3,0.0,34.1,52.3,58.1);gradient.addColorStop(0.00,"rgba(235, 232, 215, .4)");gradient.addColorStop(0.25,"rgba(235, 232, 215, .6)");gradient.addColorStop(0.74,"rgba(255, 255, 255, .80)");ctx.fillStyle=gradient;ctx.fill();ctx.globalAlpha=0.50;ctx.beginPath();ctx.moveTo(5.7,4.4);ctx.bezierCurveTo(5.4,4.4,5.2,4.5,5.2,4.6);ctx.bezierCurveTo(5.0,4.8,4.8,5.3,4.8,6.1);ctx.lineTo(4.8,74.0);ctx.bezierCurveTo(4.8,74.9,5.0,75.4,5.2,75.5);ctx.bezierCurveTo(5.2,75.7,5.4,75.7,5.7,75.7);ctx.bezierCurveTo(6.0,75.8,6.4,75.7,7.0,75.3);ctx.lineTo(65.8,41.3);ctx.bezierCurveTo(66.3,41.1,66.7,40.8,66.8,40.5);ctx.bezierCurveTo(66.9,40.3,67.0,40.2,67.0,40.1);ctx.bezierCurveTo(67.0,40.0,66.9,39.8,66.8,39.6);ctx.bezierCurveTo(66.7,39.4,66.3,39.2,65.8,38.8);ctx.lineTo(7.0,4.8);ctx.bezierCurveTo(6.4,4.6,6.0,4.4,5.7,4.4);ctx.closePath();ctx.moveTo(1.4,6.1);ctx.bezierCurveTo(1.4,4.5,1.8,3.3,2.5,2.5);ctx.bezierCurveTo(3.2,1.7,4.2,1.4,5.5,1.4);ctx.bezierCurveTo(6.8,1.5,8.4,2.0,10.4,3.1);ctx.lineTo(65.8,35.1);ctx.bezierCurveTo(67.5,36.2,68.7,37.0,69.3,37.7);ctx.bezierCurveTo(69.9,38.4,70.3,39.2,70.3,40.2);ctx.bezierCurveTo(70.3,41.2,70.0,42.1,69.3,42.7);ctx.bezierCurveTo(68.6,43.3,67.9,43.7,67.4,44.0);ctx.lineTo(8.9,77.7);ctx.bezierCurveTo(8.0,78.3,6.9,78.6,5.8,78.6);ctx.bezierCurveTo(4.6,78.6,3.7,78.3,3.1,77.9);ctx.bezierCurveTo(2.5,77.5,2.1,76.5,2.1,74.8);ctx.lineTo(1.4,6.1);ctx.closePath();ctx.fillStyle="rgb(255, 255, 255)";ctx.fill();ctx.restore();}});brightcove.player.ui.themes.skins.Playhead=brightcove.player.ui.themes.skins.SimpleRect.extend({draw:function(pBlock){this._super(pBlock);var canvas=pBlock.canvas;canvas.width=pBlock.width;canvas.height=pBlock.height;canvas.style.position="absolute";canvas.style.top="3px";canvas.style.left="5px";var context=canvas.getContext("2d");context.fillStyle=pBlock.styleFormat.getValue("icon");context.fillRect(0,2,1,1);context.fillRect(1,1,1,3);context.fillRect(2,0,1,5);context.fillRect(7,0,1,5);context.fillRect(8,1,1,3);context.fillRect(9,2,1,1);}});brightcove.player.ui.themes.skins.ScrollBar=brightcove.player.ui.themes.skins.Skin.extend({draw:function(pBlock){var canvas=pBlock.canvas;canvas.width=pBlock.width;canvas.height=pBlock.height;var context=canvas.getContext("2d");context.fillStyle=pBlock.styleFormat.getValue("border");context.fillRect(0,0,pBlock.width,pBlock.height);var buttonBackground=context.createLinearGradient(0,0,pBlock.width,0);buttonBackground.addColorStop(0,pBlock.styleFormat.getValue("gradientTop"));buttonBackground.addColorStop(1,pBlock.styleFormat.getValue("gradientBot"));context.fillStyle=buttonBackground;context.fillRect(1,1,pBlock.width-2,pBlock.height-2);context.fillStyle="rgba(255, 255, 255, .3)";var midpoint=Math.floor(pBlock.height/2);context.fillRect(3,midpoint-5,pBlock.width-6,1);context.fillRect(3,midpoint-2,pBlock.width-6,1);context.fillRect(3,midpoint+1,pBlock.width-6,1);context.fillRect(3,midpoint+4,pBlock.width-6,1);context.fillStyle="rgba(0, 0, 0, .2)";context.fillRect(3,midpoint-4,pBlock.width-6,1);context.fillRect(3,midpoint-1,pBlock.width-6,1);context.fillRect(3,midpoint+2,pBlock.width-6,1);context.fillRect(3,midpoint+5,pBlock.width-6,1);}});brightcove.player.beml.LayoutBox=brightcove.player.core.EventDispatcher.extend({constructor:function(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight){this._super();this.definition=pLayoutXML;this.setWidth=this.getAttribute(brightcove.player.beml.Attributes.WIDTH)||"0";this.setHeight=this.getAttribute(brightcove.player.beml.Attributes.HEIGHT)||"0";this.width=isNaN(Number(this.setWidth))?pWidth:Number(this.setWidth);this.height=isNaN(Number(this.setHeight))?pHeight:Number(this.setHeight);this.parentContainer=pContainer;this.elements=pLayoutXML.childNodes;this.rootBox=pRootContainer;this.rootBox.attachBox(this);this.layoutBoxes={};this.x=0;this.y=0;this.alpha=this.getAttribute(brightcove.player.beml.Attributes.ALPHA)||1;this.visible=this.getAttribute(brightcove.player.beml.Attributes.VISIBLE)!="false";this.includeInLayout=this.getAttribute(brightcove.player.beml.Attributes.INCLUDE_IN_LAYOUT)!="false";this.setBackground();this.attachElements();if(!this.includeInLayout||!this.visible){this.hide();}},setBackground:function(){var fillColor=this.getAttribute(brightcove.player.beml.Attributes.BACKGROUND_COLOR);if(fillColor.length>0){this.fillColor=parseInt(fillColor.substr(2),16);}
var backgroundImage=this.getAttribute(brightcove.player.beml.Attributes.BACKGROUND_IMAGE);if(backgroundImage){this.backgroundImage=backgroundImage;}
var StyleUtil=brightcove.player.ui.themes.StyleUtil;var css=StyleUtil.convertInlineCSStoJSON(this.getAttribute(brightcove.player.beml.Attributes.STYLE));if(this.fillColor==undefined&&css["background-color"]!=null){this.fillColor=parseInt(css["background-color"].substr(1),16);}else{var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var styleSheets=playerConfig.getItem(PlayerConfig.STYLES);if(styleSheets!=undefined){if(this.parentContainer){css=StyleUtil.assignCSStoJSON(styleSheets[this.definition.tagName],css);}else{css=StyleUtil.assignCSStoJSON(styleSheets["Layout"],css);}
css=StyleUtil.assignCSStoJSON(styleSheets[this.getID()],css);if(css.background&&css.background.color){this.fillColor=parseInt(css.background.color.substr(1),16);}}}
if(backgroundImage.length<1&&css["background-image"]){this.backgroundImage=css["background-image"];}
if(!this.parentContainer&&this.rootBox.topLevel){if(this.fillColor==undefined){var ThemeManager=brightcove.player.ui.themes.ThemeManager;var themeManager=ThemeManager.getInstance();var theme=themeManager.getThemeFromSetReference(ThemeManager.DEFAULT_THEME);var format=theme.styleSet.styles["background"];this.fillColor=parseInt(format.getValue("background").substr(1),16);}}},attachElements:function(){this.elementItems=[];var element;var length=this.elements.length;for(var i=0;i<length;i++){element=this.elements[i];this.createElementOrBox(element);}
this.calculateSize();},createElementOrBox:function(pElement){var box=brightcove.player.beml.Interpreter.getInstance().createLayoutBox(pElement,this,this.rootBox,this.width,this.height);if(box==null){var obj=this.rootBox.attachElement(pElement,this);if(obj!=null){this.elementItems.push(obj);if(obj instanceof brightcove.player.core.EventDispatcher){obj.addEventListener(brightcove.player.events.Event.RESIZE,this.onElementResize,this);}}}else{box.addEventListener(brightcove.player.events.Event.RESIZE,this.onElementResize,this);this.elementItems.push(box);this.layoutBoxes[box.getID()]=box;}},positionElements:function(){this.background=this.rootBox.fillBox(this,this.fillColor,this.backgroundImage);},determineSizeInvalidation:function(){return false;},onElementResize:function(pEvent){if(this.alreadyResizing)return;this.alreadyResizing=true;if(this.parentContainer!=null&&this.determineSizeInvalidation()){this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.RESIZE));}else{this.setSize(this.width,this.height);}
this.alreadyResizing=false;},setSize:function(pWidth,pHeight){this.width=this.getMaxWidth()?Math.min(this.getMaxWidth(),pWidth):pWidth;this.height=this.getMaxHeight()?Math.min(this.getMaxHeight(),pHeight):pHeight;},insertChildAt:function(pDefinition,pIndex){this.createElementOrBox(pDefinition);var element=this.elementItems.pop();this.elementItems.splice(pIndex,0,element);return element;},removeChildByID:function(pID){var element=this.getChild(pID);if(element){var index=this.getChildIndex(element);delete this.layoutBoxes[pID];if(element instanceof brightcove.player.core.EventDispatcher){element.removeEventListener(brightcove.player.events.Event.RESIZE,this.onElementResize,this);}
this.rootBox.removeElement(element);if(element.cleanUp){element.cleanUp();}
this.elementItems.splice(index,1);return true;}
return false;},removeChildAt:function(pIndex){var element=this.elementItems[pIndex];if(element){return this.removeChildByID(element.ID);}
return false;},getChildAt:function(pIndex){return this.elementItems[pIndex];},getChild:function(pID){for(var i in this.elementItems){if(this.elementItems[i].getID()==pID)return this.elementItems[i];}
return null;},getChildIndex:function(pElement){var numElements=this.elementItems.length;for(var i=0;i<numElements;i++){if(this.elementItems[i]==pElement)return i;}
return-1;},removeAllElements:function(){while(this.elementItems.length){this.removeChildByID(this.elementItems[0].getID());}
this.elementItems=[];},cleanUp:function(){this.removeAllElements();},getAttribute:function(pName,pCascadeUp){var value=this.definition.getAttribute(pName);if(value==null&&this.parentContainer!=null&&pCascadeUp){value=this.parentContainer.getAttribute(pName,true);}
if(value==null){value="";}
return value;},setAttribute:function(pName,pValue){this.definition.setAttribute(pName,pValue);if(pName==brightcove.player.beml.Attributes.HEIGHT){this.setHeight=pValue;}else if(pName==brightcove.player.beml.Attributes.WIDTH){this.setWidth=pValue;}},getMaxWidth:function(){var value=this.getAttribute(brightcove.player.beml.Attributes.MAX_WIDTH);if(value)return Number(value);return NaN;},setMaxWidth:function(pWidth){this.setAttribute(brightcove.player.beml.Attributes.MAX_WIDTH,pWidth.toString());},getMaxHeight:function(){var value=this.getAttribute(brightcove.player.beml.Attributes.MAX_HEIGHT);if(value)return Number(value);return NaN;},setMaxHeight:function(pHeight){this.setAttribute(brightcove.player.beml.Attributes.MAX_HEIGHT,pHeight.toString());},getDesiredWidth:function(){if(this.setWidth=="0"){return brightcove.player.beml.Attributes.VARIABLE;}
return this.setWidth||brightcove.player.beml.Attributes.VARIABLE;},getDesiredHeight:function(){if(this.setHeight=="0"){return brightcove.player.beml.Attributes.VARIABLE;}
return this.setHeight||brightcove.player.beml.Attributes.VARIABLE;},getBackgroundColor:function(){return this.fillColor;},setBackgroundColor:function(pColor){this.fillColor=pColor;this.background=this.rootBox.fillBox(this,this.fillColor,this.backgroundImage);},getBackgroundImage:function(){return this.backgroundImage;},setBackgroundImage:function(pBackgroundImage){this.backgroundImage=pBackgroundImage;this.rootBox.fillBox(this,this.fillColor,this.backgroundImage);},move:function(pX,pY){this.x=pX;this.y=pY;this.positionElements();this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.MOVE));},getX:function(){return this.x;},setX:function(pX){this.x=pX;this.positionElements();this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.MOVE));},getY:function(){return this.y;},setY:function(pY){this.y=pY;this.positionElements();this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.MOVE));},getAlpha:function(){return this.alpha;},setAlpha:function(pAlpha){this.alpha=pAlpha;if(this.background){this.background.setAlpha(pAlpha);}},hide:function(){this.showChildren(false);},show:function(){this.showChildren(true);},showChildren:function(pVisible){if(this.background){this.background.setVisible(pVisible);}
var element;for(var i in this.elementItems){element=this.elementItems[i];if(pVisible&&element.visible){element.show();}else{element.hide();}}},getVisible:function(){return this.visible;},setVisible:function(pVisible){this.visible=pVisible;pVisible?this.show():this.hide();},getID:function(){return this.getAttribute(brightcove.player.beml.Attributes.ID);},setID:function(pID){this.setAttribute(brightcove.player.beml.Attributes.ID,pID);},getPadding:function(){var padding=this.getAttribute(brightcove.player.beml.Attributes.PADDING);return padding?Number(padding):0;},getGutter:function(){var gutter=this.getAttribute(brightcove.player.beml.Attributes.GUTTER);return gutter?Number(gutter):0;},getIncludeInLayout:function(){return(this.getAttribute(brightcove.player.beml.Attributes.INCLUDE_IN_LAYOUT).toString()!="false");},setIncludeInLayout:function(pInclude){this.setAttribute(brightcove.player.beml.Attributes.INCLUDE_IN_LAYOUT,pInclude.toString());pInclude?this.show():this.hide();this.dispatchEvent(new brightcove.player.events.Event(brightcove.player.events.Event.RESIZE));}});brightcove.player.beml.OrderedBox=brightcove.player.beml.LayoutBox.extend({getDesiredSize:function(){var numElements=this.elementItems.length;var gutter=this.getGutter();if(isNaN(gutter))gutter=0;var position=0;var width;var height;var savedW=this.width;var savedH=this.height;var desiredSize=0;var element;var isHor=this.orientation=="horizontal";for(var i=0;i<numElements;i++){element=this.elementItems[i];if(!element.getIncludeInLayout())continue;width=element.width;height=element.height;position+=Math.round((isHor?width:height)+gutter);desiredSize=Math.round(Math.max(desiredSize,(isHor?height:width)));}
var desiredWidth=isHor?(position-gutter):desiredSize;var desiredHeight=isHor?desiredSize:(position-gutter);if(savedW>=1)desiredWidth=Math.max(desiredWidth,savedW);if(savedH>=1)desiredHeight=Math.max(desiredHeight,savedH);if(this.getMaxWidth())desiredWidth=Math.min(this.getMaxWidth(),desiredWidth);if(this.getMaxHeight())desiredHeight=Math.min(this.getMaxHeight(),desiredHeight);if(!isNaN(Number(desiredWidth))){desiredWidth=Number(desiredWidth);}
if(!isNaN(Number(desiredHeight))){desiredHeight=Number(desiredHeight);}
return{width:desiredWidth,height:desiredHeight};},calculateSize:function(){var size=this.getDesiredSize();this.elementWidth=this.width=size.width;this.elementHeight=this.height=size.height;},determineSizeInvalidation:function(){var size=this.getDesiredSize();if((this.orientation=="horizontal"&&size.width!=this.width)||(this.orientation=="vertical"&&size.height!=this.height)){this.width=size.width;this.height=size.height;return true;}else{return false;}},insertChildAt:function(pDefinition,pIndex){var element=this._super(pDefinition,pIndex);this.onElementResize(new brightcove.player.events.Event(brightcove.player.events.Event.RESIZE));return element;},removeChildByID:function(pID){if(this._super(pID)){this.onElementResize(new brightcove.player.events.Event(brightcove.player.events.Event.RESIZE));return true;}
return false;},removeChildAt:function(pIndex){if(this._super(pIndex)){this.onElementResize(new brightcove.player.events.Event(brightcove.player.events.Event.RESIZE));return true;}
return false;}});brightcove.player.beml.Attributes={ALPHA:"alpha",BACKGROUND_COLOR:"backgroundColor",BACKGROUND_IMAGE:"backgroundImage",BLOCKING:"blocking",BODY_FONT:"bodyFont",BOX_TYPE:"boxType",CLASS_PATH:"classPath",CLICK:"click",FEATURED:"featured",FILE:"file",FONT_NAME:"name",GUTTER:"gutter",HEIGHT:"height",HORIZONTAL_ALIGN:"hAlign",ID:"id",INCLUDE_IN_LAYOUT:"includeInLayout",LINK_FONT:"linkFont",MAX_HEIGHT:"maxHeight",MAX_WIDTH:"maxWidth",OPEN_BINDING:"{",PADDING:"padding",PARAM_NAME:"name",PARAM_VALUE:"value",PERCENT:"%",ROLL_OUT:"rollOut",ROLL_OVER:"rollOver",SHOW_BACK:"showBack",STYLE:"style",STYLE_FILE:"styleFile",STYLE_FORMAT_NAME:"styleFormatName",STYLES_CLASS:"class",STYLES_ID:"id",THEME:"theme",THEME_NAME:"name",TITLE_FONT:"titleFont",TOGGLED_CLICK:"toggledClick",WIDTH:"width",VARIABLE:"*",VERTICAL_ALIGN:"vAlign",VISIBLE:"visible",X:"x",Y:"y"};brightcove.player.beml.BindingObject=function(pSourceID,pSourceProperty,pDestinationID,pDestinationProperty,pFormatter){this.destinationProperty=pDestinationProperty;this.destinationID=pDestinationID;if(pSourceID.charAt(0)=="!"){this.inverseBoolean=true;pSourceID=pSourceID.substr(1);}
this.sourceID=pSourceID;this.sourceProperty=pSourceProperty;this.formatter=pFormatter;};brightcove.player.beml.Canvas=brightcove.player.beml.LayoutBox.extend({constructor:function(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight){this._super(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight);},getElementX:function(pElement){var x=pElement.getAttribute(brightcove.player.beml.Attributes.X);if(x.substr(-1)==brightcove.player.beml.Attributes.PERCENT){x=String(Math.round(((this.width-padding*2)*Number(x.substr(0,x.length-1)))/100));}else if(isNaN(Number(x))){x="0";}
return Number(x);},getElementY:function(pElement){var y=pElement.getAttribute(brightcove.player.beml.Attributes.Y);if(y.substr(-1)==brightcove.player.beml.Attributes.PERCENT){y=String(Math.round(((this.height-padding*2)*Number(y.substr(0,y.length-1)))/100));}else if(isNaN(Number(y))){y="0";}
return Number(y);},attachElements:function(){var sortFunction=function(pElementA,pElementB){var aDepth=Number(pElementA.getAttribute("depth"));var bDepth=Number(pElementB.getAttribute("depth"));return aDepth>bDepth?1:(aDepth<bDepth)?-1:0;};var elements=[];var length=this.elements.length;var element;for(var i=0;i<length;i++){element=this.elements[i];if(!element.getAttribute("depth")&&element.getAttribute("depth")!="0"){element.setAttribute("depth",i);}else{element.setAttribute("depth",Number(element.getAttribute("depth"))+length);}
elements.push(this.elements[i]);}
elements.sort(sortFunction);this.elements=elements;this._super();},calculateSize:function(){var numElements=this.elementItems.length;var savedW=this.width;var savedH=this.height;var element;this.elementWidth=0;this.elementHeight=0;var x;var y;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){element=this.elementItems[i];x=Number(element.getAttribute(Attributes.X));if(isNaN(x))x=0;y=Number(element.getAttribute(Attributes.Y));if(isNaN(y))y=0;this.elementWidth=Math.max(this.elementWidth,x+element.width);this.elementHeight=Math.max(this.elementHeight,y+element.height);}
if(this.width<=1)this.width=this.elementWidth;if(this.height<=1)this.height=this.elementHeight;if(savedW>=1)this.width=Math.max(this.width,savedW);if(savedH>=1)this.height=Math.max(this.height,savedH);if(this.getMaxWidth())this.width=Math.min(this.getMaxWidth(),this.width);if(this.getMaxHeight())this.height=Math.min(this.getMaxHeight(),this.height);if(!isNaN(Number(this.getDesiredWidth()))){this.width=Number(this.getDesiredWidth());}
if(!isNaN(Number(this.getDesiredHeight()))){this.height=Number(this.getDesiredHeight());}},setSize:function(pWidth,pHeight){if(isNaN(pWidth)||isNaN(pHeight))return;this._super(pWidth,pHeight);this.alreadyResizing=true;var numElements=this.elementItems.length;var elementWidth;var elementHeight;var padding2=this.getPadding()*2;var width;var height;var heightWithPadding=this.height-padding2;var widthWithPadding=this.width-padding2;this.elementWidth=0;this.elementHeight=0;var element;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){element=this.elementItems[i];elementHeight=element.getDesiredHeight();if(elementHeight.substr(-1)==Attributes.PERCENT){elementHeight=String(Math.round((heightWithPadding*Number(elementHeight.substr(0,elementHeight.length-1)))/100));}else if(elementHeight==Attributes.VARIABLE){elementHeight=String(Math.round(heightWithPadding-this.getElementY(element)));}
elementWidth=element.getDesiredWidth();if(elementWidth.substr(-1)==Attributes.PERCENT){elementWidth=String(Math.round((widthWithPadding*Number(elementWidth.substr(0,elementWidth.length-1)))/100));}else if(elementWidth==Attributes.VARIABLE){elementWidth=String(Math.round(widthWithPadding-this.getElementX(element)));}
width=Number(elementWidth);height=Number(elementHeight);element.setSize(width,height);this.elementWidth+=element.width;this.elementHeight+=element.height;}
this.positionElements();this.alreadyResizing=false;},positionElements:function(){var x=this.x+this.getPadding();var y=this.y+this.getPadding();var element;var length=this.elementItems.length;for(var i=0;i<length;i++){element=this.elementItems[i];element.move(this.getElementX(element)+x,this.getElementY(element)+y);}
this._super();},insertChildAt:function(pDefinition,pIndex){var element=this._super(pDefinition,pIndex);this.setSize(this.width,this.height);return element;},removeChildByID:function(pID){if(this._super(pID)){this.setSize(this.width,this.height);return true;}
return false;},removeChildAt:function(pIndex){if(this._super(pIndex)){this.setSize(this.width,this.height);return true;}
return false;}});brightcove.player.beml.Grid=brightcove.player.beml.LayoutBox.extend({constructor:function(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight){var definition=pLayoutXML;this.gridDefinition=definition;var children=pLayoutXML.childNodes;var Tags=brightcove.player.beml.Tags;var columns;var rows;var child;for(var i in children){child=children[i];switch(child.tagName){case Tags.COLUMNS:columns=child;this.columns=columns.childNodes;break;case Tags.ROWS:rows=child;break;default:break;}}
if(this.columns&&this.columns.length>0){var Attributes=brightcove.player.beml.Attributes;this.columnGutter=Number(columns.getAttribute(Attributes.GUTTER));this.columnWidths=[];if(rows){this.valid=true;if(rows.getAttribute(Attributes.STYLE)){rows.setAttribute(Attributes.STYLE,pLayoutXML.getAttribute(Attributes.STYLE));}
if(rows.getAttribute(Attributes.WIDTH)){rows.setAttribute(Attributes.WIDTH,pLayoutXML.getAttribute(Attributes.WIDTH));}
if(rows.getAttribute(Attributes.HEIGHT)){rows.setAttribute(Attributes.HEIGHT,pLayoutXML.getAttribute(Attributes.HEIGHT));}
if(rows.getAttribute(Attributes.PADDING)){rows.setAttribute(Attributes.PADDING,pLayoutXML.getAttribute(Attributes.PADDING));}
rows.setAttribute(Attributes.ID,pLayoutXML.getAttribute(Attributes.ID)||pLayoutXML.getAttribute("ID"));definition=rows;}}
this._super(definition,pContainer,pRootContainer,pWidth,pHeight);},calculateColumnWidths:function(){if(!this.valid){return;}
var width;var padding=this.getPadding();var widthWithPadding=this.width-padding*2;var savedColumns=[];var numColumns=this.columns.length;var totalWidth=0;var Attributes=brightcove.player.beml.Attributes;for(var j=0;j<numColumns;j++){width=this.columns[j].getAttribute(Attributes.WIDTH);if(width==null){width="";}
if(width.substr(-1)==Attributes.PERCENT){width=String(Math.round((widthWithPadding*Number(width.substr(0,width.length-1)))/100));}else if(width==Attributes.VARIABLE||width.length<1){savedColumns.push(j);continue;}
this.columnWidths[j]=Number(width);totalWidth+=this.columnWidths[j]+this.columnGutter;}
if(totalWidth>0){totalWidth-=this.columnGutter;}
var savedLength=savedColumns.length;var remainingWidth=widthWithPadding-totalWidth;var splitWidth=(remainingWidth-(this.columnGutter/(Math.max(1,savedLength-1))))/savedLength;for(j=0;j<savedLength;j++){this.columnWidths[savedColumns[j]]=splitWidth;}},calculateSize:function(){if(!this.valid){return;}
var gutter=this.getGutter();var width=0;var numColumns=this.columns.length;var columnWidth;var Attributes=brightcove.player.beml.Attributes;for(var j=0;j<numColumns;j++){columnWidth=this.columns[j].getAttribute(Attributes.WIDTH);if(isNaN(Number(columnWidth))){columnWidth="1";}
this.columnWidths[j]=Number(columnWidth);width+=this.columnWidths[j]+this.columnGutter;}
var height=0;var row;var numElements=this.elementItems.length;for(var i=0;i<numElements;i++){row=this.elementItems[i];height+=row.height+gutter;}
var padding=this.getPadding();this.elementWidth=this.width=width-this.columnGutter+padding;this.elementHeight=this.height=height-gutter+padding;},setSize:function(pWidth,pHeight){if(!this.valid){return;}
if(isNaN(pWidth)||isNaN(pHeight)){return;}
this._super(pWidth,pHeight);this.alreadyResizing=true;this.calculateColumnWidths();var numElements=this.elementItems.length;var row;var rowHeight;var skipSize;var usedHeight=0;var savedRows=[];var gutter=this.getGutter();var padding=this.getPadding();var widthWithPadding=this.width-padding*2;var heightWithPadding=this.height-padding*2;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){skipSize=false;row=this.elementItems[i];row.setColumns(this.columnWidths);row.setGutter(this.columnGutter);rowHeight=row.getDesiredHeight();if(rowHeight.substr(-1)==Attributes.PERCENT){rowHeight=String(Math.round((heightWithPadding*Number(rowHeight.substr(0,rowHeight.length-1)))/100));}else if(rowHeight==Attributes.VARIABLE||rowHeight=="NaN"){savedRows.push(row);skipSize=true;}
if(!skipSize){row.setSize(widthWithPadding,Number(rowHeight));usedHeight+=row.height;}}
var savedLength=savedRows.length;var newHeight=Math.round((heightWithPadding-usedHeight-(Math.max(1,(numElements-1))*gutter))/savedLength);for(i=0;i<savedLength;i++){row=savedRows[i];row.setSize(widthWithPadding,newHeight);}
this.positionElements();this.alreadyResizing=false;},positionElements:function(){if(!this.valid){return;}
var numElements=this.elementItems.length;var gutter=this.getGutter();var padding=this.getPadding();var x=this.getX()+padding;var y=this.getY()+padding;var row;for(var i=0;i<numElements;i++){row=this.elementItems[i];row.move(x,y);y+=row.height+gutter;}
this._super();},getAttribute:function(pName,pCascadeUp){var value=this.gridDefinition.getAttribute(pName);if(value==null){value=this._super(pName,pCascadeUp);}
return value;},insertChildAt:function(pDefinition,pIndex){return null;},removeChildAt:function(pIndex){return false;}});brightcove.player.beml.HBox=brightcove.player.beml.OrderedBox.extend({constructor:function(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight){this.orientation="horizontal";this._super(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight);},setSize:function(pWidth,pHeight){if(isNaN(pWidth)||isNaN(pHeight))return;this._super(pWidth,pHeight);this.alreadyResizing=true;var numElements=this.elementItems.length;var gutter=this.getGutter();var padding=this.getPadding();if(isNaN(gutter))gutter=0;var savedElements=[];var elementWidth;var elementHeight;var skipSize;var padding2=padding*2;var usedWidth=0;var width;var height;var heightWithPadding=this.height-padding2;var widthWithPadding=this.width-padding2;this.elementWidth=0;var element;var notIncludedInLayout=0;var maxWidth;var maxWidths=0;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){maxWidth=0;skipSize=false;element=this.elementItems[i];if(!element.getIncludeInLayout()){notIncludedInLayout++;continue;}
elementHeight=element.getDesiredHeight()||String(heightWithPadding);if(elementHeight==Attributes.VARIABLE){elementHeight=String(heightWithPadding||element.height);}else if(elementHeight.substr(-1)==Attributes.PERCENT){elementHeight=String(Math.round(((heightWithPadding)*Number(elementHeight.substr(0,elementHeight.length-1)))/100));}
elementWidth=element.getDesiredWidth();if(elementWidth.substr(-1)==Attributes.PERCENT){elementWidth=String(Math.round((widthWithPadding*Number(elementWidth.substr(0,elementWidth.length-1)))/100));}else if(elementWidth==Attributes.VARIABLE||elementWidth=="NaN"){if(element.hasOwnProperty("getMaxWidth")&&element.getMaxWidth()){maxWidth=element.getMaxWidth();maxWidths+=maxWidth;}
savedElements.push({element:element,height:elementHeight,maxWidth:maxWidth});skipSize=true;}
if(!skipSize){width=Number(elementWidth);height=Number(elementHeight);element.setSize(width,height);usedWidth+=width;this.elementWidth+=width;}}
numElements-=notIncludedInLayout;var savedLength=savedElements.length;var newWidth=Math.round((widthWithPadding-usedWidth-((numElements-1)*gutter))/savedLength);var noWidthsExceeded=false;while(maxWidths>0&&savedLength){noWidthsExceeded=true;for(i=0;i<savedLength;i++){maxWidth=savedElements[i].maxWidth;if(maxWidth<newWidth&&maxWidth>0){savedElements[i].element.setSize(maxWidth,savedElements[i].height);savedElements.splice(i,1);this.elementWidth+=maxWidth;usedWidth+=maxWidth;maxWidths-=maxWidth;savedLength--;newWidth=Math.round((widthWithPadding-usedWidth-((numElements-1)*gutter))/savedLength);noWidthsExceeded=false;break;}}
if(noWidthsExceeded){break;}}
for(i=0;i<savedLength;i++){element=savedElements[i].element;width=newWidth;height=savedElements[i].height;element.setSize(width,height);this.elementWidth+=element.width;}
this.elementWidth+=(gutter*(numElements-1));this.positionElements();this.alreadyResizing=false;},positionElements:function(){var padding=this.getPadding();var element;var x=this.getX()+padding;var widthWithPadding=this.width-padding*2;var numElements=this.elementItems.length;var gutter=this.getGutter();switch(this.getAttribute(brightcove.player.beml.Attributes.HORIZONTAL_ALIGN)){case brightcove.player.ui.Alignment.RIGHT:x+=(widthWithPadding-this.elementWidth);break;case brightcove.player.ui.Alignment.CENTER:x+=(widthWithPadding-this.elementWidth)/2;break;}
for(var i=0;i<numElements;i++){element=this.elementItems[i];if(!element.getIncludeInLayout())continue;switch(this.getAttribute(brightcove.player.beml.Attributes.VERTICAL_ALIGN)){case brightcove.player.ui.Alignment.BOTTOM:element.move(x,this.getY()+Math.round(this.height-element.height)-padding);break;case brightcove.player.ui.Alignment.MIDDLE:element.move(x,this.getY()+Math.round((this.height-element.height))/2);break;default:element.move(x,this.getY()+padding);break;}
x+=Math.round(element.width+gutter);}
this._super();}});brightcove.player.beml.Interpreter=brightcove.player.core.Class.extend({constructor:function(){this.events=[brightcove.player.beml.Attributes.CLICK,brightcove.player.beml.Attributes.TOGGLED_CLICK,brightcove.player.beml.Attributes.ROLL_OUT,brightcove.player.beml.Attributes.ROLL_OVER];this.classes={};},addBinding:function(pContainer,pItem){pItem.sourceElement=pContainer.getElement(pItem.sourceID);pItem.destinationElement=pContainer.getElement(pItem.destinationID);if(!pItem.sourceElement||!pItem.destinationElement){var Tracer=brightcove.player.utils.Tracer;Tracer.warn(this,"Element not defined for binding: "+pItem.sourceID,Tracer.TYPE_BEML);}else{pItem.binding=new brightcove.player.data.Binding(new brightcove.player.data.EndPoint(pItem.sourceElement,pItem.sourceProperty,brightcove.player.events.PropertyChangeEvent.CHANGE,pItem.inverseBoolean),new brightcove.player.data.EndPoint(pItem.destinationElement,pItem.destinationProperty),pItem.formatter);pItem.binding.execute();}},registerClass:function(pClassPath,pClass){this.classes[pClassPath]=pClass;},createRootLayoutBox:function(pContainer){return this.createLayoutBox(pContainer.definition,null,pContainer,pContainer.width,pContainer.height);},createLayoutBox:function(pBox,pContainer,pRootContainer,pWidth,pHeight){var id=brightcove.player.beml.Attributes.ID;if(pBox.getAttribute(id)==null)pBox.setAttribute(id,brightcove.player.beml.Interpreter.getUniqueID());var layoutBox;var nodeName;var LayoutBoxTypes=brightcove.player.beml.LayoutBoxTypes;if(pBox.tagName=="Layout"||pBox.tagName=="ListItem"){switch(pBox.getAttribute(brightcove.player.beml.Attributes.BOX_TYPE)){case LayoutBoxTypes.HBOX.toLowerCase():nodeName=LayoutBoxTypes.HBOX;break;case LayoutBoxTypes.VBOX.toLowerCase():nodeName=LayoutBoxTypes.VBOX;break;default:nodeName=LayoutBoxTypes.CANVAS;break;}}else{nodeName=pBox.nodeName;}
switch(nodeName.toLowerCase()){case LayoutBoxTypes.HBOX:layoutBox=new brightcove.player.beml.HBox(pBox,pContainer,pRootContainer,pWidth,pHeight);break;case LayoutBoxTypes.VBOX:layoutBox=new brightcove.player.beml.VBox(pBox,pContainer,pRootContainer,pWidth,pHeight);break;case LayoutBoxTypes.GRID:layoutBox=new brightcove.player.beml.Grid(pBox,pContainer,pRootContainer,pWidth,pHeight);break;case LayoutBoxTypes.ROW:layoutBox=new brightcove.player.beml.Row(pBox,pContainer,pRootContainer,pWidth,pHeight);break;case LayoutBoxTypes.CANVAS:layoutBox=new brightcove.player.beml.Canvas(pBox,pContainer,pRootContainer,pWidth,pHeight);break;case LayoutBoxTypes.VIEW_STACK:layoutBox=new brightcove.player.beml.ViewStack(pBox,pContainer,pRootContainer,pWidth,pHeight);break;}
return layoutBox;},createElement:function(pElement){var id=brightcove.player.beml.Attributes.ID;if(pElement.getAttribute(id)==undefined)pElement.setAttribute(id,brightcove.player.beml.Interpreter.getUniqueID());var elementName=pElement.tagName;var theClass;var classPath=brightcove.player.beml.TagMappings.getMapping(elementName);if(classPath==null){classPath=pElement.getAttribute(brightcove.player.beml.Attributes.CLASS_PATH);}
if(classPath!=null){try{theClass=eval(classPath);}catch(e){thsClass=this.classes[classPath];if(theClass==null){var Tracer=brightcove.player.utils.Tracer;Tracer.error(this,"Unable to instantiate "+classPath,Tracer.TYPE_BEML);}}}
if(theClass!=null){return new theClass();}
return null;},addElementToBindings:function(pElement,pBindings){var attributes=pElement.attributes;var path;var name;var value;var formatter;var formatterClass;var joinedPath;var classPath;for(var i in attributes){name=attributes[i].name;value=attributes[i].value;if(value==undefined)continue;formatter=null;if(this.events.indexOf(name)<0&&(value.charAt(0)==brightcove.player.beml.Attributes.OPEN_BINDING)){joinedPath=value.substr(1,value.length-2);if(joinedPath.substr(0,7)=="format("){joinedPath=joinedPath.substring(7,joinedPath.indexOf(")",7));path=joinedPath.split(" ").join("").split(",");classPath="brightcove.player.data.formatters."+path[1];joinedPath=path[0];try{formatterClass=document[classPath];formatter=new formatterClass();}catch(e){var Tracer=brightcove.player.utils.Tracer;Tracer.error(this,"Unable to instantiate "+classPath,Tracer.TYPE_BEML);}}
path=joinedPath.split(".");if(path.length==1){path[1]="self";}
pBindings.push(new brightcove.player.beml.BindingObject(path.shift(),path.join("."),pElement.getAttribute(brightcove.player.beml.Attributes.ID),name,formatter));pElement.setAttribute(name,null);}}},configurePropertiesForElement:function(pLayoutElement,pProperties){pLayoutElement.properties=pProperties;var definition=pLayoutElement.definition;for(var property in pProperties){definition.setAttribute(property,pProperties[property]);}
var attributes=definition.attributes;var name;var value;var height;var width;for(var i in attributes){if(attributes[i]instanceof Function)continue;name=attributes[i].name;if(name==undefined)continue;value=attributes[i].value;if(name==brightcove.player.beml.Attributes.HEIGHT){height=Number(value);}else if(name==brightcove.player.beml.Attributes.WIDTH){width=Number(value);}else if(pLayoutElement.hasOwnProperty(name)){try{if(String(value)==""){pLayoutElement[name]="";}else if(!isNaN(Number(value))){pLayoutElement[name]=Number(value);}else if(String(value)=="true"){pLayoutElement[name]=true;}else if(String(value)=="false"){pLayoutElement[name]=false;}else if(String(value)=="null"){pLayoutElement[name]=null;}else{pLayoutElement[name]=value;}}catch(e){}}}
if(!isNaN(width)||!isNaN(height)){pLayoutElement.setSize(width,height);}},sizeElement:function(pLayoutElement){var Attributes=brightcove.player.beml.Attributes;var element=pLayoutElement.definition;if(element.getAttribute(Attributes.HEIGHT)||element.getAttribute(Attributes.WIDTH)){var width=1;var height=1;var skipSizeWidth;var skipSizeHeight;if(element.getAttribute(Attributes.WIDTH)&&element.getAttribute(Attributes.WIDTH).substr(-1)==Attributes.PERCENT){skipSizeWidth=true;}else{width=element.getAttribute(Attributes.WIDTH)||pLayoutElement.width;}
if(element.getAttribute(Attributes.HEIGHT)&&element.getAttribute(Attributes.HEIGHT).substr(-1)==Attributes.PERCENT){skipSizeHeight=true;}else{height=element.getAttribute(Attributes.HEIGHT)||pLayoutElement.height;}
if(!(skipSizeWidth&&skipSizeHeight)){pLayoutElement.setSize(width,height);}}},createBindings:function(pContainer,pBindings){for(var i in pBindings){this.addBinding(pContainer,pBindings[i]);}},removeBindings:function(pBindings){for(var i in pBindings){if(pBindings[i].binding){pBindings[i].binding.remove();}}},removeBindingForElement:function(pElement,pBindings){for(var i=pBindings.length-1;i>-1;i--){bindingObject=pBindings[i];if(bindingObject.sourceElement==pElement||bindingObject.destinationElement==pElement){bindingObject.binding.remove();bindingObject.splice(i,1);}}},updateBindings:function(pContainer,pBindings){var binding;var bindableDataName=pContainer.bindableDataName;for(var i in pBindings){binding=pBindings[i].binding;if(binding){if(pBindings[i].sourceID==bindableDataName){binding.remove();}else{continue;}}
this.addBinding(pContainer,pBindings[i]);}},processEvent:function(pContainer,pElement,pEvent){}});brightcove.player.beml.Interpreter.VERSION="1.0.0";brightcove.player.beml.Interpreter.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.beml.Interpreter();}
return this.instance;};brightcove.player.beml.Interpreter.getUniqueID=function(){return"u"+(brightcove.player.beml.Interpreter.sIdCount++);};brightcove.player.beml.Interpreter.sIdCount=0;brightcove.player.beml.LayoutBoxTypes={HBOX:"hbox",VBOX:"vbox",CANVAS:"canvas",GRID:"grid",ROW:"row",VIEW_STACK:"viewstack"};brightcove.player.beml.Row=brightcove.player.beml.LayoutBox.extend({calculateSize:function(){this.elementWidth=mWidth=1;this.elementHeight=mHeight=1;},setColumns:function(pColumns){this.columnWidths=pColumns;},getGutter:function(){if(this.gutter!=undefined){return this.gutter;}
return this._super();},setGutter:function(pGutter){this.gutter=pGutter;},setSize:function(pWidth,pHeight){if(isNaN(pWidth)||isNaN(pHeight)){return;}
this._super(pWidth,pHeight);if(this.columnWidths==undefined){return;}
this.alreadyResizing=true;var numElements=this.elementItems.length;var elementWidth;var elementHeight;var padding=this.getPadding()*2;var width;var height;var heightWithPadding=this.height-padding;this.elementWidth=0;var element;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){element=this.elementItems[i];elementHeight=element.getDesiredHeight()||String(heightWithPadding);if(elementHeight==Attributes.VARIABLE){elementHeight=String(heightWithPadding||element.height);}else if(elementHeight.substr(-1)==Attributes.PERCENT){elementHeight=String(Math.round(((heightWithPadding)*Number(elementHeight.substr(0,elementHeight.length-1)))/100));}
elementWidth=element.getDesiredWidth();if(elementWidth.substr(-1)==Attributes.PERCENT){elementWidth=String(Math.round((this.columnWidths[i]*Number(elementWidth.substr(0,elementWidth.length-1)))/100));}else if(elementWidth==Attributes.VARIABLE||elementWidth=="NaN"){elementWidth=String(this.columnWidths[i]);}
width=Number(elementWidth);height=Number(elementHeight);element.setSize(width,height);this.elementWidth+=width;}
this.positionElements();this.alreadyResizing=false;},positionElements:function(){if(this.columnWidths==undefined){return;}
var numElements=this.elementItems.length;var gutter=this.getGutter();var x=this.getX();var y=this.getY();var height=this.height;var element;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){element=this.elementItems[i];switch(this.getAttribute(Attributes.VERTICAL_ALIGN)){case brightcove.player.ui.Alignment.BOTTOM:element.move(x,y+Math.round(height-element.height));break;case brightcove.player.ui.Alignment.MIDDLE:element.move(x,y+Math.round((height-element.height)/2));break;default:element.move(x,y);break;}
x+=Math.round(this.columnWidths[i]+gutter);}
this._super();},insertChildAt:function(pDefinition,pIndex){return null;},removeChildByID:function(pID){return false;},removeChildAt:function(pIndex){return false;}});brightcove.player.beml.TagMappings=brightcove.player.core.Class.extend({constructor:function(){this.createMap();},createMap:function(){this.map={};var Tags=brightcove.player.beml.Tags;this.map[Tags.LABEL]="brightcove.player.ui.controls.Label";this.map[Tags.TITLE_LABEL]="brightcove.player.ui.controls.TitleLabel";this.map[Tags.LINK]="brightcove.player.ui.controls.Link";this.map[Tags.LIST]="brightcove.player.ui.controls.List";this.map[Tags.TILE_LIST]="brightcove.player.ui.controls.TileList";this.map[Tags.BUTTON]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.TOGGLE_BUTTON]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.TAB_BAR]="brightcove.player.ui.controls.TabBar";this.map[Tags.COMBO_BOX]="brightcove.player.ui.controls.ComboBox";this.map[Tags.BEML_VIDEO_DISPLAY]="brightcove.player.ui.media.BEMLVideoDisplay";this.map[Tags.VIDEO_DISPLAY]="brightcove.player.ui.media.ChromelessVideoPlayer";this.map[Tags.VIDEO_PLAYER]="brightcove.player.ui.media.VideoPlayer";this.map[Tags.AUDIO_PLAYER]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.MEDIA_CONTROLS]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.PLAYHEAD]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.VOLUME_CONTROL]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.CHROMELESS_VIDEO_PLAYER]="brightcove.player.ui.media.ChromelessVideoPlayer";this.map[Tags.THUMBNAIL_BUTTON]="brightcove.player.ui.media.ThumbnailButton";this.map[Tags.IMAGE]="brightcove.player.ui.containers.Image";this.map[Tags.GRAPHIC_BLOCK]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.TEXT_REGION]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.SPACER]="brightcove.player.ui.beml.IgnoredObject";this.map[Tags.SWFLOADER]="brightcove.player.ui.beml.IgnoredObject";},getMapping:function(pKey){return this.map[pKey];}});brightcove.player.beml.TagMappings.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.beml.TagMappings();}
return this.instance;};brightcove.player.beml.TagMappings.getMapping=function(pKey){return brightcove.player.beml.TagMappings.getInstance().getMapping(pKey);};brightcove.player.beml.Tags={SPACER:"Spacer",LAYOUT:"Layout",LABELS:"Labels",LABEL_OVERRIDE:"label",THEME:"Theme",MODULES:"Modules",PARAM:"param",STYLES:"Style",FONT:"Font",ROWS:"Rows",COLUMNS:"Columns",COLUMN:"Column",LIST_ITEM:"ListItem",BEML_VIDEO_DISPLAY:"BEMLVideoDisplay",VIDEO_DISPLAY:"VideoDisplay",VIDEO_PLAYER:"VideoPlayer",IMAGE:"Image",LABEL:"Label",LABELS:"Labels",TITLE_LABEL:"TitleLabel",LINK:"Link",SWFLOADER:"SWFLoader",BANNER:"Banner",EXPANDING_BANNER:"ExpandingBanner",LIST:"List",TILE_LIST:"TileList",BUTTON:"Button",TOGGLE_BUTTON:"ToggleButton",TAB_BAR:"TabBar",COMBO_BOX:"ComboBox",THUMBNAIL_BUTTON:"ThumbnailButton",AUDIO_PLAYER:"AudioPlayer",MEDIA_CONTROLS:"MediaControls",PLAYHEAD:"Playhead",TEXT_REGION:"TextRegion",VOLUME_CONTROL:"VolumeControl",MASK:"Mask",EFFECTS:"Effects",ANIMATION:"Animation",PARALLEL_ANIMATION:"ParallelAnimation",SEQUENCED_ANIMATION:"SequencedAnimation",ADVERTISING_CONTEXT:"AdvertisingContext",CHROMELESS_VIDEO_PLAYER:"ChromelessVideoPlayer",GRAPHIC_BLOCK:"GraphicBlock",CHROMELESS_CONTROLS:"ChromelessControls"};brightcove.player.beml.VBox=brightcove.player.beml.OrderedBox.extend({constructor:function(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight){this.orientation="vertical";this._super(pLayoutXML,pContainer,pRootContainer,pWidth,pHeight);},setSize:function(pWidth,pHeight){if(isNaN(pWidth)||isNaN(pHeight))return;this._super(pWidth,pHeight);this.alreadyResizing=true;var numElements=this.elementItems.length;var gutter=this.getGutter();var padding=this.getPadding();if(isNaN(gutter))gutter=0;var savedElements=[];var elementWidth;var elementHeight;var skipSize;var padding2=padding*2;var usedHeight=0;var width;var height;var heightWithPadding=this.height-padding2;var widthWithPadding=this.width-padding2;this.elementHeight=0;var element;var notIncludedInLayout=0;var maxHeight;var maxHeights=0;var Attributes=brightcove.player.beml.Attributes;for(var i=0;i<numElements;i++){maxHeight=0;skipSize=false;element=this.elementItems[i];if(!element.getIncludeInLayout()){notIncludedInLayout++;continue;}
elementWidth=element.getDesiredWidth()||String(widthWithPadding);if(elementWidth==Attributes.VARIABLE){elementWidth=String(widthWithPadding||element.width);}else if(elementWidth.substr(-1)==Attributes.PERCENT){elementWidth=String(Math.round((widthWithPadding*Number(elementWidth.substr(0,elementWidth.length-1)))/100));}
elementHeight=element.getDesiredHeight();if(elementHeight.substr(-1)==Attributes.PERCENT){elementHeight=String(Math.round((heightWithPadding*Number(elementHeight.substr(0,elementHeight.length-1)))/100));}else if(elementHeight==Attributes.VARIABLE||elementHeight=="NaN"){if(element.hasOwnProperty("getMaxHeight")&&element.getMaxHeight()){maxHeight=element.getMaxHeight();maxHeights+=maxHeight;}
savedElements.push({element:element,width:elementWidth,maxHeight:maxHeight});skipSize=true;}
if(!skipSize){width=Number(elementWidth);height=Number(elementHeight);element.setSize(width,height);usedHeight+=height;this.elementHeight+=height;}}
numElements-=notIncludedInLayout;var savedLength=savedElements.length;var newHeight=Math.round((heightWithPadding-usedHeight-((numElements-1)*gutter))/savedLength);var noHeightsExceeded=false;while(maxHeights>0&&savedLength){noHeightsExceeded=true;for(i=0;i<savedLength;i++){maxHeight=savedElements[i].maxHeight;if(maxHeight<newHeight&&maxHeight>0){savedElements[i].element.setSize(savedElements[i].width,maxHeight);savedElements.splice(i,1);this.elementHeight+=maxHeight;usedHeight+=maxHeight;maxHeights-=maxHeight;savedLength--;newHeight=Math.round((heightWithPadding-usedHeight-((numElements-1)*gutter))/savedLength);noHeightsExceeded=false;break;}}
if(noHeightsExceeded){break;}}
for(i=0;i<savedLength;i++){element=savedElements[i].element;width=savedElements[i].width;height=newHeight;element.setSize(width,height);this.elementHeight+=element.height;}
this.elementHeight+=(gutter*(numElements-1));this.positionElements();this.alreadyResizing=false;},positionElements:function(){var padding=this.getPadding();var element;var y=this.getY()+padding;var heightWithPadding=this.height-padding*2;var numElements=this.elementItems.length;var gutter=this.getGutter();switch(this.getAttribute(brightcove.player.beml.Attributes.VERTICAL_ALIGN)){case brightcove.player.ui.Alignment.BOTTOM:y+=(heightWithPadding-this.elementHeight);break;case brightcove.player.ui.Alignment.MIDDLE:y+=(heightWithPadding-this.elementHeight)/2;break;}
for(var i=0;i<numElements;i++){element=this.elementItems[i];if(!element.getIncludeInLayout())continue;switch(this.getAttribute(brightcove.player.beml.Attributes.HORIZONTAL_ALIGN)){case brightcove.player.ui.Alignment.RIGHT:element.move(this.getX()+Math.round(this.width-element.width)-padding,y);break;case brightcove.player.ui.Alignment.CENTER:element.move(this.getX()+Math.round((this.width-element.width))/2,y);break;default:element.move(this.getX()+padding,y);break;}
y+=Math.round(element.height+gutter);}
this._super();}});(function(){brightcove.player.api.utils.DataTrimmer={videoProperties:["publishedDate","renditions","videoStillURL"],videoPropertyMappings:[["FLVFullLengthStreamed","isStreaming"],["FLVFullLengthURL","defaultURL"]],mediaProperties:["adKeys","displayName","endDate","id","length","linkText","linkURL","longDescription","shortDescription","startDate","thumbnailURL"],mediaPropertyMappings:[["lineupId","playlistID"],["publisherId","publisherID"],["referenceId","referenceID"]],adPolicyProperties:{adServerURL:"adServerURL",playAdOnLoad:"playAdOnLoad",prerollAds:"prerollAds",midrollAds:"midrollAds",postrollAds:"postrollAds",playerAdKeys:"playerAdKeys",onLoadAdKeys:"onLoadAdKeys",prerollAdKeys:"prerollAdKeys",midrollAdKeys:"midrollAdKeys",postrollAdKeys:"postrollAdKeys",adPlayCap:"adPlayCap",titleBasedAdInterval:"videoBasedAdInterval",titleAdPlayInterval:"videoAdPlayInterval",timeBasedAdInterval:"timeBasedAdInterval",timeAdPlayInterval:"timeAdPlayInterval",firstAdPlay:"firstAdPlay",additionalAdTargetingParams:"additionalAdTargetingParams",adTranslationSWF:"adTranslationSWF",adRulesSWF:"adRulesSWF"},playlistMappings:{thumbnail:"thumbnailURL",currentPageIndex:"page",displayName:'displayName',filteredCount:'filteredCount',id:'id',longDescription:'longDescription',recordsPerPage:'recordsPerPage',referenceId:'referenceID',shortDescription:'shortDescription',videoCount:'videoCount'},trimVideo:function(pVideo){if(pVideo==null){return null;}
var DataTrimmer=brightcove.player.api.utils.DataTrimmer;var video=DataTrimmer.trimMedia(pVideo);if(video==null){return null;}
var clone=brightcove.player.utils.ObjectUtil.cloneDeep(pVideo);var props=DataTrimmer.videoProperties;var numProps=props.length;var property;for(var i=0;i<numProps;i++){property=props[i];video[property]=clone[property];}
if(clone.renditions){video.renditions=clone.renditions.slice();}
props=DataTrimmer.videoPropertyMappings;numProps=props.length;for(i=0;i<numProps;i++){video[props[i][1]]=clone[props[i][0]];}
for(j in clone.customFieldValues){video.customFields[j.split(" ").join("")]=clone.customFieldValues[j];}
return video;},trimMedia:function(pMedia){if(pMedia==null){return null;}
var clone=brightcove.player.utils.ObjectUtil.cloneDeep(pMedia);var media={};var DataTrimmer=brightcove.player.api.utils.DataTrimmer;var props=DataTrimmer.mediaProperties;var numProps=props.length;var property;for(var i=0;i<numProps;i++){property=props[i];media[property]=clone[property];}
props=DataTrimmer.mediaPropertyMappings;numProps=props.length;for(i=0;i<numProps;i++){media[props[i][1]]=clone[props[i][0]];}
media.tags=[];for(var j in clone.tags){media.tags[j]=clone.tags[j].name;}
media.customFields={};for(j in clone.customFields){media.customFields[j]=clone.customFields[j];}
media.captions=[];for(j in clone.captions){media.captions[j]=clone.captions[j];}
return media;},trimPlaylist:function(playlist){var propertyName,self=brightcove.player.api.utils.DataTrimmer,result={},i;for(propertyName in playlist){if(self.playlistMappings.hasOwnProperty(propertyName)){result[self.playlistMappings[propertyName]]=playlist[propertyName];}}
result.videos=[];i=playlist.videoDTOs.length;while(i--){result.videos[i]=self.trimVideo(playlist.videoDTOs[i]);}
return result;},trimAdPolicy:function(){var
DataTrimmer=brightcove.player.api.utils.DataTrimmer,PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),adPolicy=playerConfig.getItem(PlayerConfig.AD_POLICY),trimmedAdPolicy={},adPolicyProperties=DataTrimmer.adPolicyProperties,key;for(key in adPolicy){if(adPolicyProperties.hasOwnProperty(key)){trimmedAdPolicy[adPolicyProperties[key]]=adPolicy[key];}}
return trimmedAdPolicy;}};})();brightcove.player.api.components.UIObjectAPI=brightcove.player.core.Class.extend({constructor:function(pElement){this.element=pElement;}});brightcove.player.api.data.CuePoint=function(pCuePoint){this.name=pCuePoint.name;this.videoID=pCuePoint.videoId;this.metadata=pCuePoint.metadata;this.type=pCuePoint.type;this.time=pCuePoint.time;};brightcove.player.api.modules.APIModule=brightcove.player.core.EventDispatcher.extend({constructor:function(pName){this._super();this.name=pName;},getPlayer:function(){var PlayerConfig=brightcove.player.PlayerConfig;return PlayerConfig.getInstance().getItem(PlayerConfig.PLAYER);},sendToAsyncResultHandler:function(pHandlerName,pResult){var message={handler:pHandlerName,data:pResult};var messageBroker=brightcove.player.api.MessageBroker.getInstance();messageBroker.sendMessage(message,messageBroker.Types.ASYNC_GETTER);}});brightcove.player.api.modules.APIModules={AD_PLUGIN:"adPlugin",ADVERTISING:"advertising",AUTH:"auth",CAPTIONS:"captions",CONTENT:"content",CUE_POINTS:"cuePoints",EXPERIENCE:"experience",VIDEO_PLAYER:"videoPlayer"};brightcove.player.api.modules.AdModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){this._super(brightcove.player.api.modules.APIModules.ADVERTISING);},getAdPolicy:function(pCallback){var adPolicy=brightcove.player.api.utils.DataTrimmer.trimAdPolicy();if(pCallback){pCallback(adPolicy);}
return adPolicy;},setAdPolicy:function(pAdPolicy,pCallback){var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),adPolicy=playerConfig.getItem(PlayerConfig.AD_POLICY);adPolicy.setAdPolicy(pAdPolicy);if(pCallback){pCallback();}},dispatchAdEvent:function(pEvent){var module=brightcove.player.api.APIManager.modules["advertising"];module.dispatchEvent(pEvent);}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.ADVERTISING,brightcove.player.api.modules.AdModule);brightcove.player.api.modules.AdPluginModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){this._super(brightcove.player.api.modules.APIModules.AD_PLUGIN);},init:function(){var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance();this.adManager=playerConfig.getItem(PlayerConfig.AD_MANAGER);},startLinearAdMode:function(){if(!this.adManager){this.init();}
this.adManager.startLinearAdMode();},endLinearAdMode:function(){if(!this.adManager){this.init();}
this.adManager.endLinearAdMode();},resumePlayer:function(){if(!this.adManager){this.init();}
this.adManager.resumePlayer();},adPaused:function(){if(!this.adManager){this.init();}
this.adManager.pausePlayer();},dispatchAdEvent:function(pEvent){brightcove.player.api.modules.AdModule.prototype.dispatchAdEvent(pEvent);},dispatchAdPluginEvent:function(pType){var
AdPluginEvent=brightcove.player.events.AdPluginEvent,module=brightcove.player.api.APIManager.modules["adPlugin"];module.dispatchEvent(new AdPluginEvent(pType));}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.AD_PLUGIN,brightcove.player.api.modules.AdPluginModule);(function(){var ContentManager=brightcove.player.content.ContentManager.getInstance(),ContentEvent=brightcove.player.events.ContentEvent,APIModules=brightcove.api.modules.APIModules,serviceType="";brightcove.player.api.modules.AuthModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){var context=brightcove.player.PlayerContext.getInstance(),currentURL;this._super(APIModules.AUTH);this.requestorId=null;this.resourceId=null;if(this.getVideoPlayer()){this.onVideoPlayerSet();}else{this.getPlayer().addEventListener(brightcove.player.events.ExperienceEvent.VIDEO_PLAYER_SET,this.onVideoPlayerSet,this);}
this.PASS_REQUESTORID="requestorId";this.PASS_RESOURCEID="resourceId";this.PASS_METADATA_RESOURCEID="bcadobepassresourceid";this.PASS_METADATA_REQUESTORID="bcadobepassrequestorid";this.PASS_METADATA_TITLE="bcadobepasstitle";this.PASS_METADATA_GUID="bcadobepassreferenceid";this.PASS_METADATA_RATING="bcadobepassrating";this.PASS_METADATA_SCHEME="bcadobepassratingscheme";},getVideoPlayer:function(){return this.getPlayer().videoPlayer;},onVideoPlayerSet:function(pEvent){if(this.videoPlayer){this.videoPlayer.removeEventListener(MediaEvent.CHANGE,this.onMediaChange,this);this.videoPlayer.removeEventListener(MediaEvent.ERROR,this.onMediaError,this);}
this.videoPlayer=this.getVideoPlayer();if(this.videoPlayer){this.videoPlayer.addEventListener(MediaEvent.CHANGE,this.onMediaChange,this);this.videoPlayer.addEventListener(MediaEvent.ERROR,this.onMediaError,this);}},getCurrentVideo:function(pCallback){var video=this.video;if(!video){if(this.videoPlayer){video=this.videoPlayer.video;if(video){video=brightcove.player.api.utils.DataTrimmer.trimVideo(video);}}}
if(pCallback){pCallback(video);}
return video;},getRequestorID:function(application,media){var requestorID;if(media.customFields.hasOwnProperty(this.PASS_METADATA_REQUESTORID)){requestorID=media.customFields[this.PASS_METADATA_REQUESTORID];}else if(application.tveSettings&&application.tveSettings[this.PASS_REQUESTORID]){requestorID=application.tveSettings[this.PASS_REQUESTORID];}
return requestorID;},getResourceID:function(application,media){var resourceID;if(media.customFields.hasOwnProperty(this.PASS_METADATA_RESOURCEID)){return media.customFields[this.PASS_METADATA_RESOURCEID];}
resourceID='<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">';resourceID+="<channel>";var requestorID=this.getRequestorID(application,media);resourceID+="<title>"+requestorID+"</title>";resourceID+="<item>";var itemTitle=media.displayName;if(media.customFields.hasOwnProperty(this.PASS_METADATA_TITLE)){itemTitle=media.customFields[this.PASS_METADATA_TITLE];}
resourceID+="<title>"+itemTitle+"</title>";var guid=media.referenceID;if(media.customFields.hasOwnProperty(this.PASS_METADATA_GUID)){guid=media.customFields[this.PASS_METADATA_GUID];}
resourceID+="<guid>"+guid+"</guid>";if(media.customFields.hasOwnProperty(this.PASS_METADATA_SCHEME)&&media.customFields.hasOwnProperty(this.PASS_METADATA_RATING)){var ratingScheme=media.customFields[this.PASS_METADATA_SCHEME];var rating=media.customFields[this.PASS_METADATA_RATING];resourceID+="<media:rating scheme="+'"urn:'+ratingScheme+'">';resourceID+=rating+"</media:rating>";}
resourceID+="</item>";resourceID+="</channel>";resourceID+="</rss>";return resourceID;},onMediaChange:function(pEvent){var PlayerConfig=brightcove.player.PlayerConfig;var application=PlayerConfig.getInstance().getPropertiesForID("application");this.video=this.rendition=null;this.video=this.getCurrentVideo();this.requestorId=null;this.resourceId=null;if(application.hasOwnProperty("tveSettings")&&application.tveSettings!=null){serviceType="adobepass";if(this.video.customFields){this.requestorId=this.getRequestorID(application,this.video);this.resourceId=this.getResourceID(application,this.video);}}
if(this.video.defaultURL=="UNAUTHORIZED"){AuthEvent=brightcove.player.events.AuthEvent;this.dispatchEvent(new AuthEvent(AuthEvent.AUTH_NEEDED,serviceType,this.requestorId,this.resourceId));}},onMediaError:function(pEvent){this.video=this.rendition=null;this.video=this.getCurrentVideo();},onMediaLoadByID:function(pEvent){ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_ID,this.onMediaLoadByID,this);var media=pEvent.media;if(media){if(media.FLVFullLengthURL=="UNAUTHORIZED"){this.dispatchEvent(new AuthEvent(AuthEvent.AUTH_NEEDED,serviceType,this.requestorId,this.resourceId));}else{this.playMedia(media);}}},playMedia:function(pMedia){this.videoPlayer.setIsCueing(!brightcove.player.api.modules.VideoPlayerModule.canPlayWithoutUserInteraction);this.videoPlayer.setCanAutoplay(true);this.videoPlayer.showOverlayMenu(true);this.videoPlayer.loadMediaDTO(pMedia);this.videoPlayer.setIsCueing(false);if(brightcove.player.api.modules.VideoPlayerModule.canPlayWithoutUserInteraction){this.videoPlayer.play();}},onVideoLoad:function(pEvent){ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_ID,this.onVideoLoad,this);ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_REF,this.onVideoLoad,this);if(pEvent.media){this.playVideo(pEvent.media.id);}else{this.dispatchEvent(new MediaEvent(MediaEvent.ERROR));}},showMessage:function(pMessage,pModal){if(this.videoPlayer){this.videoPlayer.displayMessage(pMessage);}},removeMessage:function(){if(this.videoPlayer){this.videoPlayer.videoDisplay.removeMessage();}},playWithToken:function(pToken,pService){var mediaDTO=this.getCurrentVideo();if(pService=="adobepass"){ContentManager.addEventListener(ContentEvent.MEDIA_LOAD_BY_ID,this.onMediaLoadByID,this);if(mediaDTO){ContentManager.fetchMediaByIDWithTVEToken(mediaDTO.id,pToken);}else{UserMessageManager.getInstance().showMessage(UserMessageManager.UNAVAILABLE_CONTENT,false,false);}}else if(pService=="ais"&&mediaDTO){var PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),contentModule=playerConfig.getItem(PlayerConfig.API_MANAGER).getModule(APIModules.CONTENT);if(contentModule){var args={hdnea:pToken};mediaDTO.defaultURL=brightcove.player.utils.URLUtil.appendQueryArgs(mediaDTO.defaultURL,args);var media=contentModule.updateMedia(mediaDTO);this.playMedia(media);}}}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.AUTH,brightcove.player.api.modules.AuthModule);})();(function(){var defaultLanguage='en',currentLanguage=defaultLanguage,styleOptions={};brightcove.player.api.modules.CaptionsModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){var context=brightcove.player.PlayerContext.getInstance(),currentURL;this._super(brightcove.player.api.modules.APIModules.CAPTIONS);},getPlayer:function(){var PlayerConfig=brightcove.player.PlayerConfig;return PlayerConfig.getInstance().getItem(PlayerConfig.PLAYER);},getVideoPlayer:function(){var player=this.getPlayer();return(player?player.videoPlayer:undefined);},getVideoID:function(pCaptionsModule,pVideoID){var currentVideo,videoPlayer=this.getVideoPlayer();if(pVideoID){return pVideoID;}
currentVideo=(videoPlayer?videoPlayer.video:undefined);return currentVideo?currentVideo.id:undefined;},loadDFXP:function(pDfxp,pVideoID){var videoID=this.getVideoID(this,pVideoID),CaptionsEvent=brightcove.player.events.CaptionsEvent;if(!videoID){this.dispatchEvent(new CaptionsEvent(CaptionsEvent.DFXP_LOAD_ERROR,"<DFXP provided>","There is no video loaded in the player.  You must pass a video ID."));return;}
this.parseDFXP("<DFXP provided>",pDfxp,pVideoID);},parseDFXP:function(pUrl,pData,pVideoID){var player=this.getPlayer(),CaptionsEvent=brightcove.player.events.CaptionsEvent;if(!player.videoPlayer.captionOverlay){player.videoPlayer.captionOverlay=new brightcove.player.ui.media.CaptionOverlay();player.videoPlayer.captionOverlay.setPlayer(player.videoPlayer);}
player.videoPlayer.captionOverlay.addEventListener(CaptionsEvent.DFXP_LOAD_ERROR,this.onCaptionsEvent,this,false);player.videoPlayer.captionOverlay.addEventListener(CaptionsEvent.DFXP_LOAD_SUCCESS,this.onCaptionsEvent,this,false);player.videoPlayer.captionOverlay.parseDFXP(pUrl,pData,pVideoID);},onCaptionsEvent:function(pEvent){this.dispatchEvent(pEvent);},setLanguage:function(pLanguage){var captionOverlay=this.getPlayer().videoPlayer.captionOverlay;if(currentLanguage==pLanguage){return;}
currentLanguage=pLanguage;if(captionOverlay){captionOverlay.setLanguage(currentLanguage);}},getLanguages:function(pVideoID){var i,result=[],player=this.getPlayer(),videoID=this.getVideoID(this,pVideoID),captions;if(!player.videoPlayer.captionOverlay){return result;}
return player.videoPlayer.captionOverlay.getLanguages(pVideoID);},getLanguagesAsync:function(pHandlerName,pVideoID){this.sendToAsyncResultHandler(pHandlerName,this.getLanguages(pVideoID));},setStyleOptions:function(pValues){var
json={},splits=pValues.split(';'),split,i,player=this.getPlayer();for(i=0;i<splits.length;i++){split=splits[i].split(':');json[split[0]]=split[1];}
$.extend(styleOptions,json);if(player.videoPlayer.captionOverlay){player.videoPlayer.captionOverlay.setStyleOptions(styleOptions);}},getStyleOptionsAsync:function(pHandler){this.sendToAsyncResultHandler(pHandler,this.getStyleOptions());},getStyleOptions:function(){var
arr=[],p;for(p in styleOptions){arr.push(p+':'+styleOptions[p]);}
return arr.join(';');},setCaptionsEnabled:function(pValue){var captionDisplayArea=$('.captionDisplayArea');this.getPlayer().videoPlayer.playerContext.setCaptionsEnabled(pValue);if(captionDisplayArea){captionDisplayArea.css('display',pValue?'block':'none');}},getCaptionsEnabledAsync:function(pHandler){this.sendToAsyncResultHandler(pHandler,this.getCaptionsEnabled());},getCaptionsEnabled:function(){return this.getPlayer().videoPlayer.playerContext.captionsEnabled;},showOptions:function(load){var player=this.getPlayer().videoPlayer.captionOverlay.showOptions(load);}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.CAPTIONS,brightcove.player.api.modules.CaptionsModule);})();(function(){var content=brightcove.player.content,ContentEvent=brightcove.player.events.ContentEvent,LoadByIdEvent=ContentEvent.MEDIA_LOAD_BY_ID,LoadByRefEvent=ContentEvent.MEDIA_LOAD_BY_REF,ContentManager=content.ContentManager.getInstance(),trimVideo=brightcove.player.api.utils.DataTrimmer.trimVideo,trimPlaylist=brightcove.player.api.utils.DataTrimmer.trimPlaylist,urlTrackingVideoProperties={defaultURL:"FLVFullLengthURL",videoStillURL:"videoStillURL",thumbnailURL:"thumbnailURL"},videoProperties={adKeys:"adKeys",displayName:"displayName",length:"length",longDescription:"longDescription",shortDescription:"shortDescription",renditions:"renditions"},noop=$.noop,extend=$.extend,each=$.each,getPlaylist=function(getter,fetcher){return function(id,callback){var result=ContentManager[getter](id,0,100),trimmedCallback;trimmedCallback=function(result){var trimmed=trimPlaylist(result);(callback||noop)(trimmed);return trimmed;};if(result){return trimmedCallback(result);}
return ContentManager[fetcher](id,trimmedCallback,0,100);};},parseUrl=function(url){if(!url){return null;}
var schemeOriginPath,search,parts,params={};parts=url.split('?');if(parts.length==0){return null;}
schemeOriginPath=parts[0];search=parts[1]||"";each(search.split('&'),function(_,param){var parts=param.split('=');if(parts[0]){params[parts[0]]=parts[1];}});return{schemeOriginPath:schemeOriginPath,params:params};};brightcove.player.api.modules.ContentModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){this._super(brightcove.player.api.modules.APIModules.CONTENT);ContentManager.addEventListener(LoadByIdEvent,this.onMediaLoad,this);ContentManager.addEventListener(LoadByRefEvent,this.onMediaLoad,this);},onMediaLoad:function(pEvent){var media=trimVideo(pEvent.media);var ContentEvent=brightcove.player.events.ContentEvent;this.dispatchEvent(new ContentEvent(ContentEvent.MEDIA_LOAD,media));},getMedia:function(pID,pProperty){var media;if(pProperty==null){pProperty="id";}
switch(pProperty){case"id":media=ContentManager.getMediaByID(Number(pID));break;case"referenceId":media=ContentManager.getMediaByReferenceID(pID.toString());break;default:return null;}
if(brightcove.player.content.ContentUtil.isInvalidMediaItem(media)){return null;}
return trimVideo(media);},getMediaAsynch:function(pID,pProperty){if(pProperty==null){pProperty="id";}
var media=this.getMedia(pID,pProperty);if(media){var ContentEvent=brightcove.player.events.ContentEvent;this.dispatchEvent(new ContentEvent(ContentEvent.MEDIA_LOAD,media));}else{switch(pProperty){case"id":ContentManager.fetchMediaByID(Number(pID));break;case"referenceId":ContentManager.fetchMediaByReferenceID(pID.toString());break;}}},getMediaByIDAsync:function(pHandlerName,pID){var media=this.getMedia(pID,"id");if(media){this.sendToAsyncResultHandler(pHandlerName,media);}else{var module=this;ContentManager.fetchMediaByIDWithCallback(pID,function(pMedia){module.sendToAsyncResultHandler(pHandlerName,trimVideo(pMedia));});}},getMediaByReferenceIDAsync:function(pHandlerName,pReferenceID){var media=this.getMedia(pReferenceID,"referenceId");if(media){this.sendToAsyncResultHandler(pHandlerName,media);}else{var module=this;ContentManager.fetchMediaByReferenceIDWithCallback(pReferenceID,function(pMedia){module.sendToAsyncResultHandler(pHandlerName,trimVideo(pMedia));});}},getMediaByID:function(pID,pCallback){var media=this.getMedia(pID,"id");if(pCallback){if(media){pCallback(media);}else{ContentManager.fetchMediaByIDWithCallback(pID,function(pMedia){pCallback(trimVideo(pMedia));});}}
return media;},getMediaByReferenceID:function(pReferenceID,pCallback){var media=this.getMedia(pReferenceID,"referenceId");if(pCallback){if(media){pCallback(media);}else{ContentManager.fetchMediaByReferenceIDWithCallback(pReferenceID,function(pMedia){pCallback(trimVideo(pMedia));});}}
return media;},getPlaylistByID:getPlaylist('getMediaCollectionByID','fetchPlaylistByIDWithCallback'),getPlaylistByReferenceID:getPlaylist('getMediaCollectionByReferenceID','fetchPlaylistByReferenceIDWithCallback'),updateMedia:function(updates,callback){var video=ContentManager.getMediaByID(updates.id),propertyName,oldUrl,updatedUrl,mergedParams,param,trimmedVideo,queries=[];if(!video){this.dispatchEvent(new ContentEvent(ContentEvent.MEDIA_NOT_FOUND,updates));throw new Error("Update media request for an unknown id: "+updates.id);}
for(propertyName in urlTrackingVideoProperties){if(!updates.hasOwnProperty(propertyName)){continue;}
var updatedProp=false;try{oldUrl=parseUrl(video[propertyName]);updatedUrl=parseUrl(updates[propertyName]);if(oldUrl&&updatedUrl){mergedParams=extend({},updatedUrl.params,oldUrl.params);for(param in mergedParams){queries.push(param+"="+mergedParams[param]);}
video[urlTrackingVideoProperties[propertyName]]=updatedUrl.schemeOriginPath+"?"+queries.join("&");updatedProp=true;}}catch(e){}
if(!updatedProp){video[urlTrackingVideoProperties[propertyName]]=updates[propertyName];}}
for(propertyName in videoProperties){if(updates.hasOwnProperty(propertyName)){video[videoProperties[propertyName]]=updates[propertyName];}}
trimmedVideo=trimVideo(video);if(callback){callback(trimmedVideo);}
return extend(true,{},trimmedVideo);}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.CONTENT,brightcove.player.api.modules.ContentModule);})();brightcove.player.api.modules.CuePointsModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){this._super(brightcove.player.api.modules.APIModules.CUE_POINTS);if(this.getVideoPlayer()){this.onVideoPlayerSet();}else{this.getPlayer().addEventListener(brightcove.player.events.ExperienceEvent.VIDEO_PLAYER_SET,this.onVideoPlayerSet,this);}},onVideoPlayerSet:function(pEvent){var CuePointEvent=brightcove.player.events.CuePointEvent;if(this.videoPlayer){this.videoPlayer.removeEventListener(CuePointEvent.CUE,this.onCue,this);}
this.videoPlayer=this.getVideoPlayer();if(this.videoPlayer){this.videoPlayer.addEventListener(CuePointEvent.CUE,this.onCue,this);}},onCue:function(pEvent){var cuePoint=new brightcove.player.api.data.CuePoint(pEvent.cuePoint);var CuePointEvent=brightcove.player.events.CuePointEvent;this.dispatchEvent(new CuePointEvent(CuePointEvent.CUE,cuePoint));},getVideoPlayer:function(){return this.getPlayer().videoPlayer;},getVideo:function(pID,pMethod){var manager=brightcove.player.content.ContentManager.getInstance();var video=manager.getMediaByID(pID);if(!video){var Tracer=brightcove.player.utils.Tracer;Tracer.warn(this,"CuePointsModule."+pMethod+"() called for video not found in player: "+pID,Tracer.TYPE_API);}
return video;},clearCuePoints:function(pID,pCueType){var video=this.getVideo(pID,"clearCuePoints");if(!video){return false;}
var cuePoints=video.cuePoints;if(!cuePoints){return false;}
var found=false;for(var i=cuePoints.length-1;i>-1;i--){if(cuePoints[i].type==pCueType){cuePoints.splice(i,1);found=true;}}
if(found){this.checkToUpdateVideoPlayer(video);}
return true;},removeCuePointsAtTime:function(pID,pTime,pCueType){var video=this.getVideo(pID,"removeCuePointsAtTime");if(!video){return false;}
var cuePoints=video.cuePoints;if(!cuePoints){return false;}
var cuePoint;var found=false;for(var i=cuePoints.length-1;i>-1;i--){cuePoint=cuePoints[i];if(cuePoint.type==pCueType&&cuePoint.time==pTime){cuePoints.splice(i,1);found=true;}}
if(found){this.checkToUpdateVideoPlayer(video);}
return found;},checkToUpdateVideoPlayer:function(pVideo){if(this.getVideoPlayer().video==pVideo){this.getVideoPlayer().updateCuePoints();}},addCuePoints:function(pID,pCuePoints){var video=this.getVideo(pID,"addCuePoints");if(!video){return false;}
var formattedCuePoints=[];var numCuePoints=pCuePoints.length;var cueObject;var cuePoint;var type;var CuePointType=brightcove.player.ui.media.utils.CuePointType;for(var i=0;i<numCuePoints;i++){cueObject=pCuePoints[i];cuePoint={};cuePoint.videoId=pID;cuePoint.type=CuePointType.CODE;if(!isNaN(Number(cueObject))){cuePoint.time=Number(cueObject);}else{cuePoint.time=cueObject.time;cuePoint.name=cueObject.name;cuePoint.metadata=cueObject.metadata;cuePoint.forceStop=cueObject.forceStop;if(cueObject.type!=null){type=cueObject.type.toString().toLowerCase();if(type=="0"||type=="ad"){cuePoint.type=CuePointType.AD;}else if(type=="2"||type=="chapter"){cuePoint.type=CuePointType.CHAPTER;}}}
formattedCuePoints.push(cuePoint);}
if(!video.cuePoints||video.cuePoints.length<1){video.cuePoints=[];}
video.cuePoints=video.cuePoints.concat(formattedCuePoints);this.getVideoPlayer().addCuePoints(formattedCuePoints);return true;},clearCodeCuePoints:function(pID){var CuePointType=brightcove.player.ui.media.utils.CuePointType;return this.clearCuePoints(pID,CuePointType.CODE);},removeCodeCuePointsAtTime:function(pTitleId,pTime){var CuePointType=brightcove.player.ui.media.utils.CuePointType;return this.removeCuePointsAtTime(pTitleId,pTime,CuePointType.CODE);},clearAdCuePoints:function(pID){var CuePointType=brightcove.player.ui.media.utils.CuePointType;return this.clearCuePoints(pID,CuePointType.AD);},removeAdCuePointsAtTime:function(pTitleId,pTime){var CuePointType=brightcove.player.ui.media.utils.CuePointType;return this.removeCuePointsAtTime(pTitleId,pTime,CuePointType.AD);},getCuePoints:function(pID,pCallback){var cuePoints;var video=this.getVideo(pID,"addCuePoints");if(video&&video.cuePoints){var CuePoint=brightcove.player.api.data.CuePoint;cuePoints=[];var totalCues=video.cuePoints.length;for(var i=0;i<totalCues;i++){cuePoints[i]=new CuePoint(video.cuePoints[i]);}}
if(pCallback){pCallback(cuePoints);}
return cuePoints;},getCuePointsAsync:function(pHandlerName,pID){this.sendToAsyncResultHandler(pHandlerName,this.getCuePoints(pID));}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.CUE_POINTS,brightcove.player.api.modules.CuePointsModule);brightcove.player.api.modules.ExperienceModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){this._super(brightcove.player.api.modules.APIModules.EXPERIENCE);this.apiWrappers={};this.getPlayer().addEventListener(brightcove.player.events.ExperienceEvent.TEMPLATE_READY,this.handleTemplateReady,this);},handleTemplateReady:function(pEvent){this.getPlayer().removeEventListener(brightcove.player.events.ExperienceEvent.TEMPLATE_READY,this.handleTemplateReady,this);this.dispatchEvent(pEvent);var PlayerConfig=brightcove.player.PlayerConfig;var application=PlayerConfig.getInstance().getPropertiesForID("application");if(application.enableAPI==="true"){var messageBroker=brightcove.player.api.MessageBroker.getInstance();messageBroker.sendMessage(new brightcove.player.api.APIMessage("callTemplateReady",pEvent),messageBroker.Types.API);}},getAPI:function(pID){var element=this.getPlayer().getElement(pID);var definition;var name;if(element==null){element=this.getPlayer().getLayoutBox(pID);if(element==null){return null;}
definition=element.definition;name="LayoutBox";}else{definition=element.definition;name=definition.tagName;var videoTags=["VideoPlayer","ChromelessVideoPlayer"];if(videoTags.indexOf(name)>-1){var VIDEO_PLAYER=brightcove.player.api.modules.APIModules.VIDEO_PLAYER;return brightcove.player.api.APIManager.getInstance().getModule(VIDEO_PLAYER);}}
if(definition){var apiWrapper;if(this.apiWrappers[pID]!=null){apiWrapper=this.apiWrappers[pID];if(apiWrapper.element!=element){apiWrapper=null;}}
if(apiWrapper==null){var apiClass=brightcove.player.api.components[name+"API"];if(apiClass){apiInterface=new apiClass(element);this.apiWrappers[pID]=apiInterface;}}
return apiInterface;}
return null;},setSize:function(pWidth,pHeight){this.getPlayer().setSize(pWidth,pHeight);},getExperienceID:function(pCallback){var PlayerConfig=brightcove.player.PlayerConfig;var id=PlayerConfig.getInstance().getItem(PlayerConfig.TEMPLATE_DATA).id;if(pCallback){pCallback(id);}
return id;},getExperienceIDAsync:function(pHandlerName){this.sendToAsyncResultHandler(pHandlerName,this.getExperienceID());},getLayoutRoot:function(){return this.getPlayer().getLayoutRoot();},getJSElementByID:function(pID){var api=this.getElementByID(pID);if(api){return api.element.definition.tagName;}},getElementByID:function(pID){return this.getAPI(pID);},getReady:function(callback){if(callback){callback(this.getPlayer().ready);}
return this.getPlayer().ready;},getReadyAsync:function(pHandlerName){this.sendToAsyncResultHandler(pHandlerName,this.getReady());}});brightcove.player.api.APIManager.registerModuleClass(brightcove.player.api.modules.APIModules.EXPERIENCE,brightcove.player.api.modules.ExperienceModule);(function(window,$,document,undefined){var ContentManager=brightcove.player.content.ContentManager.getInstance(),ContentEvent=brightcove.player.events.ContentEvent,APIModules=brightcove.api.modules.APIModules,MediaEvent=brightcove.player.events.MediaEvent,AdEvent=brightcove.player.events.AdEvent,VideoPlayerModule,setVideo=function(player,video,cueing){if(!video){VideoPlayerModule.dispatchEvent(new MediaEvent(MediaEvent.ERROR));return;}
player.setIsCueing(cueing);player.setCanAutoplay(true);player.showOverlayMenu(true);player.loadMediaDTO(video);player.setIsCueing(false);},cueVideo=function(fetcher,player,id){ContentManager[fetcher](id,function(video){setVideo(player,video,true);});},loadVideo=function(fetcher,player,id){ContentManager[fetcher](id,function(video){setVideo(player,video,!brightcove.player.api.modules.VideoPlayerModule.canPlayWithoutUserInteraction);});},applyVideoDisplayCallbacks=function(self,showKey,hideKey,callbacks){var videoDisplay=self.getVideoPlayer().videoDisplay;callbacks=extend({show:noop,hide:noop},callbacks);videoDisplay[showKey]=callbacks.show;videoDisplay[hideKey]=callbacks.hide;},extend=$.extend,noop=$.noop;brightcove.player.api.modules.VideoPlayerModule=brightcove.player.api.modules.APIModule.extend({constructor:function(){this._super(APIModules.VIDEO_PLAYER);if(this.getVideoPlayer()){this.onVideoPlayerSet();}else{this.getPlayer().addEventListener(brightcove.player.events.ExperienceEvent.VIDEO_PLAYER_SET,this.onVideoPlayerSet,this);}
this.isCueing=false;VideoPlayerModule=this;},getVideoPlayer:function(){return this.getPlayer().videoPlayer;},dispatchMediaEvent:function(pType,pPosition,pDuration,pMedia,pRendition){if(pMedia==null){pMedia=this.video||this.getCurrentVideo();}
if(pRendition==null){pRendition=this.rendition||this.getCurrentRendition();}
if(pPosition==null){pPosition=this.getVideoPosition();}
if(pDuration==null){pDuration=this.getVideoDuration();}
this.dispatchEvent(new MediaEvent(pType,pPosition,pDuration,pMedia,pRendition));},redispatchMediaEvent:function(pEvent){var media=brightcove.player.api.utils.DataTrimmer.trimVideo(pEvent.media);this.dispatchMediaEvent(pEvent.type,pEvent.position,pEvent.duration,media,pEvent.rendition);},onMediaChange:function(pEvent){this.video=this.rendition=null;this.video=this.getCurrentVideo();this.rendition=this.getCurrentRendition();var position=this.getVideoPosition();var duration=0;if(this.video.length>0){duration=this.video.length/1000;}else{duration=this.getVideoDuration();}
this.dispatchMediaEvent(MediaEvent.CHANGE,position,duration,this.video,this.rendition);this.dispatchMediaEvent(MediaEvent.RENDITION_CHANGE,position,duration,this.video,this.rendition);},onAdOrMediaBegin:function(pEvent){brightcove.player.api.modules.VideoPlayerModule.canPlayWithoutUserInteraction=true;this.videoPlayer.removeEventListener(MediaEvent.BEGIN,this.onAdOrMediaBegin,this);this.videoPlayer.removeEventListener(AdEvent.BEGIN,this.onAdOrMediaBegin,this);},onCue:function(pEvent){var cuePoint=new brightcove.player.api.data.CuePoint(pEvent.cuePoint);var CuePointEvent=brightcove.player.events.CuePointEvent;this.dispatchEvent(new CuePointEvent(CuePointEvent.CUE,cuePoint));},onVideoPlayerSet:function(pEvent){var CuePointEvent=brightcove.player.events.CuePointEvent;var redispatchedEvents=[MediaEvent.BEGIN,MediaEvent.COMPLETE,MediaEvent.PLAY,MediaEvent.STOP,MediaEvent.PROGRESS,MediaEvent.SEEK_NOTIFY];var i;if(this.videoPlayer){this.videoPlayer.removeEventListener(CuePointEvent.CUE,this.onCue,this);this.videoPlayer.removeEventListener(MediaEvent.BEGIN,this.onAdOrMediaBegin,this);this.videoPlayer.removeEventListener(AdEvent.BEGIN,this.onAdOrMediaBegin,this);this.videoPlayer.removeEventListener(MediaEvent.CHANGE,this.onMediaChange,this);for(i in redispatchedEvents){this.videoPlayer.removeEventListener(redispatchedEvents[i],this.redispatchMediaEvent,this);}}
this.videoPlayer=this.getVideoPlayer();if(this.videoPlayer){if(!brightcove.player.api.modules.VideoPlayerModule.canPlayWithoutUserInteraction){this.videoPlayer.addEventListener(MediaEvent.BEGIN,this.onAdOrMediaBegin,this);this.videoPlayer.addEventListener(AdEvent.BEGIN,this.onAdOrMediaBegin,this);}
this.videoPlayer.addEventListener(CuePointEvent.CUE,this.onCue,this);this.videoPlayer.addEventListener(MediaEvent.CHANGE,this.onMediaChange,this);for(i in redispatchedEvents){this.videoPlayer.addEventListener(redispatchedEvents[i],this.redispatchMediaEvent,this);}}},onVideoLoad:function(pEvent){ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_ID,this.onVideoLoad,this);ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_REF,this.onVideoLoad,this);if(pEvent.media){this.playVideo(pEvent.media.id);}else{this.dispatchEvent(new MediaEvent(MediaEvent.ERROR));}},getVideo:function(pID,pProperty,pReturnInvalid){var video;if(pProperty==null){pProperty="id";}
if(pProperty=="referenceId"){video=ContentManager.getMediaByReferenceID(pID);}else{video=ContentManager.getMediaByID(pID);}
if(!pReturnInvalid&&brightcove.player.content.ContentUtil.isInvalidMediaItem(video)){return null;}
return video;},fetchVideo:function(pID,pProperty){if(pProperty==null){pProperty="id";}
ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_ID,this.onVideoLoad,this);ContentManager.removeEventListener(ContentEvent.MEDIA_LOAD_BY_REF,this.onVideoLoad,this);if(pProperty=="referenceId"){ContentManager.addEventListener(ContentEvent.MEDIA_LOAD_BY_REF,this.onVideoLoad,this);ContentManager.fetchMediaByReferenceID(String(pID));}else{ContentManager.addEventListener(ContentEvent.MEDIA_LOAD_BY_ID,this.onVideoLoad,this);ContentManager.fetchMediaByID(Number(pID));}},playVideo:function(pID,pProperty){if(pProperty==null){pProperty="id";}
var video=this.getVideo(pID,pProperty);if(video==null){return false;}else{setVideo(this.videoPlayer,video,this.isCueing);return true;}},getCurrentVideo:function(pCallback){var video=this.video;if(!video){if(this.videoPlayer){video=this.videoPlayer.video;if(video){video=brightcove.player.api.utils.DataTrimmer.trimVideo(video);}}}
if(pCallback){pCallback(video);}
return video;},getCurrentVideoAsync:function(pHandlerName){this.sendToAsyncResultHandler(pHandlerName,this.getCurrentVideo());},getCurrentRendition:function(pCallback){var rendition=this.rendition;if(!rendition){if(this.videoPlayer){rendition=this.videoPlayer.rendition;if(rendition){rendition=brightcove.player.utils.ObjectUtil.cloneDeep(rendition);}}}
if(pCallback){pCallback(rendition);}
return rendition;},getCurrentRenditionAsync:function(pHandlerName){this.sendToAsyncResultHandler(pHandlerName,this.getCurrentRendition());},play:function(){if(this.videoPlayer){this.videoPlayer.play();}},pause:function(pPause){if(pPause==undefined){pPause=true;}
if(this.videoPlayer){if(pPause){if(this.getIsPlaying()){this.videoPlayer.pause();}}else{if(!this.getIsPlaying()){this.videoPlayer.play();}}}},seek:function(pTime){if(this.videoPlayer){this.videoPlayer.seek(pTime);}},getVideoPosition:function(pFormat,pCallback){var position=0;if(this.videoPlayer){position=this.videoPlayer.getPosition();}
if(typeof pFormat=="function"){pCallback=pFormat;pFormat=false;}
if(pFormat){position=brightcove.player.utils.MediaUtil.formatTime(position);}
if(pCallback){pCallback(position);}
return position;},getVideoPositionAsync:function(pHandlerName,pFormat){this.sendToAsyncResultHandler(pHandlerName,this.getVideoPosition(pFormat));},getVideoDuration:function(pFormat,pCallback){var duration=0;if(this.videoPlayer){duration=this.videoPlayer.getDuration();}
if(typeof pFormat=="function"){pCallback=pFormat;pFormat=false;}
if(pFormat){duration=brightcove.player.utils.MediaUtil.formatTime(duration);}
if(pCallback){pCallback(duration);}
return duration;},getVideoDurationAsync:function(pHandlerName,pFormat){this.sendToAsyncResultHandler(pHandlerName,this.getVideoDuration(pFormat));},getIsPlaying:function(pCallback){var playing=false;if(this.videoPlayer){var PlayerUtil=brightcove.player.utils.PlayerUtil;if(PlayerUtil.isAndroid()&&!PlayerUtil.isAndroidWithInPagePlayback()){var Tracer=brightcove.player.utils.Tracer;Tracer.warn(this,"getIsPlaying() called on small screen Android device will always return false.",Tracer.TYPE_API);}else{playing=!this.videoPlayer.isPaused();}}
if(pCallback){pCallback(playing);}
return playing;},getIsPlayingAsync:function(pHandlerName){this.sendToAsyncResultHandler(pHandlerName,this.getIsPlaying());},loadVideo:function(pID,pProperty){if(pProperty==null){pProperty="id";}
if(!this.playVideo(pID,pProperty)){if(this.getVideo(pID,pProperty,true)){var Tracer=brightcove.player.utils.Tracer;Tracer.warn(this,"Requested video was georestricted: "+pID,Tracer.TYPE_API);return false;}
this.fetchVideo(pID,pProperty);return false;}else{return true;}},loadVideoByID:function(id){if(isNaN(parseInt(id,10))){var Tracer=brightcove.player.utils.Tracer;Tracer.warn(this,"loadVideoByID() called with non-numeric id: "+id,Tracer.TYPE_API);return;}
loadVideo('fetchMediaByIDWithCallback',this.videoPlayer,id);},loadVideoByReferenceID:function(refId){loadVideo('fetchMediaByReferenceIDWithCallback',this.videoPlayer,refId);},cueVideoByID:function(id){cueVideo('fetchMediaByIDWithCallback',this.videoPlayer,id);},cueVideoByReferenceID:function(refId){cueVideo('fetchMediaByReferenceIDWithCallback',this.videoPlayer,refId);},overlay:function(){var $overlay=$('.bc-overlay'),$video;if($overlay.size()<1){$(document.body).append('<style>'+'.bc-overlay {'+'  pointer-events: none; position: absolute;'+'}'+'.bc-overlay * {'+'  pointer-events: auto'+'}'+'</style>');$video=$('video');$overlay=$('<div class="bc-overlay"></div>').insertAfter(this.videoPlayer.element).css(extend($video.offset(),{height:$video.height(),width:$video.width()}));}
return $overlay[0];},seekable:function(){return $('video').prop('seekable');},getPrivacyMode:function(pCallback){var privacyMode;if(this.videoPlayer){privacyMode=this.videoPlayer.privacyMode;}
if(pCallback){pCallback(privacyMode);}
return privacyMode;},getPrivacyModeAsync:function(pHandlerName){this.sendToAsyncResultHandler(pHandlerName,this.getPrivacyMode());},setPrivacyMode:function(mode){if(this.videoPlayer){this.videoPlayer.privacyMode=mode;}},loadingCallbacks:function(callbacks){applyVideoDisplayCallbacks(this,'onShowLoadingAnimation','onHideLoadingAnimation',callbacks);},playOverlayCallbacks:function(callbacks){applyVideoDisplayCallbacks(this,'onShowOverlayMenu','onHideOverlayMenu',callbacks);}});brightcove.player.api.modules.VideoPlayerModule.canPlayWithoutUserInteraction=!brightcove.player.utils.PlayerUtil.isIOS()&&!brightcove.player.utils.PlayerUtil.isChromeForAndroid();brightcove.player.api.APIManager.registerModuleClass(APIModules.VIDEO_PLAYER,brightcove.player.api.modules.VideoPlayerModule);})(window,window.jQuery,document);brightcove.player.api.components.AbstractListAPI=brightcove.player.api.components.UIObjectAPI.extend({constructor:function(pElement){this._super(pElement);},getSelectedIndex:function(){return this.element.getSelectedIndex();},setSelectedIndex:function(pIndex){this.element.setSelectedIndex(pIndex);}});brightcove.player.api.components.ListAPI=brightcove.player.api.components.AbstractListAPI.extend({constructor:function(pElement){this._super(pElement);}});brightcove.player.api.components.TileListAPI=brightcove.player.api.components.AbstractListAPI.extend({constructor:function(pElement){this._super(pElement);}});brightcove.player.api.components.UIObjectAPI=brightcove.player.core.Class.extend({constructor:function(pElement){this.element=pElement;}});brightcove.player.advertising.AdContext=brightcove.player.core.Class.extend({constructor:function(pVideo,pCuePoint){this.videoDTO=pVideo;this.cuePointDTO=pCuePoint;this.insertionType=pCuePoint.name;},getAdPolicy:function(){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();return playerConfig.getItem(PlayerConfig.AD_POLICY);},getViewerExperienceDTO:function(){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();return playerConfig.getItem(PlayerConfig.TEMPLATE_DATA);},getCuePoint:function(){return this.cuePointDTO;},getPlayerKeyValues:function(){return this.getAdPolicy().playerAdKeys||"";},getInsertionKeyValues:function(){var adPolicy=this.getAdPolicy();var InsertionTypes=brightcove.player.advertising.InsertionTypes;switch(this.insertionType){case InsertionTypes.PREROLL:return adPolicy.prerollAdKeys;case InsertionTypes.POSTROLL:return adPolicy.postrollAdKeys;default:return adPolicy.midrollAdKeys;}},getPlayerID:function(){return this.getViewerExperienceDTO().id;},getPublisherID:function(){return this.getViewerExperienceDTO().publisherId;},getAdServerURL:function(){return this.getAdPolicy().adServerURL;},getVideoID:function(){var contentManager=brightcove.player.content.ContentManager.getInstance();var id=(this.videoDTO==null)?"":this.videoDTO.id;return id?id:"";},getVideoAdKeys:function(){var contentManager=brightcove.player.content.ContentManager.getInstance();var adKeys=(this.videoDTO==null)?"":this.videoDTO.adKeys;return adKeys?adKeys:"";},getPlaylistID:function(){var contentManager=brightcove.player.content.ContentManager.getInstance();if(contentManager.getIsPlaylist()&&this.videoDTO){if(this.videoDTO.lineupId){return this.videoDTO.lineupId;}else if(this.videoDTO.playlistID){return this.videoDTO.playlistID;}}else{return"0";}},getAdditionalAdTargetingParams:function(){var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var params=playerConfig.getItem(PlayerConfig.EMBED_PARAMS).additionalAdTargetingParams;return params?params:"";}});brightcove.player.advertising.AdContext.CUE="cue";brightcove.player.advertising.AdControlsProxy=brightcove.player.ui.media.ControlsProxy.extend({constructor:function(){this._super();this.resetAdState();this.deviceSupportsAdvertising=true;this.firstPrerollCheck=true;this.afterAdFunc=null;this.playerContext=brightcove.player.PlayerContext.getInstance();$(document.body).bind(brightcove.player.events.MediaEvent.COMPLETE,$.proxy(this.onMediaComplete,this));},needPrerollCheck:function(){var needCheck=true;if(this.firstPrerollCheck||!this.deviceSupportsAdvertising){needCheck=false;}
else{needCheck=this.beforePrerollPoint;}
this.firstPrerollCheck=false;return needCheck;},postrollsComplete:function(){return!this.deviceSupportsAdvertising||(this.afterPostrollPoint&&!playerContext.adPlaying);},respondToPlay:function(){if(this.needPrerollCheck()){this.beforePrerollPoint=false;var adManager=brightcove.player.advertising.AdManager.getInstance();adManager.handlePreroll();}
else if(this.playerContext.adPlaying){var adManager=brightcove.player.advertising.AdManager.getInstance();adManager.handleResume();}else{this._super();}},respondToPause:function(){if(this.playerContext.adPlaying){var adManager=brightcove.player.advertising.AdManager.getInstance();adManager.handlePause();}else{this._super();}},onMediaChange:function(){this.resetAdState();},resetAdState:function(){this.beforePrerollPoint=true;this.afterPostrollPoint=false;},onMediaComplete:function(){if(this.deviceSupportsAdvertising&&!this.afterPostrollPoint){brightcove.player.advertising.AdManager.getInstance().handlePostroll();}}});brightcove.player.advertising.AdManager=brightcove.player.core.EventDispatcher.extend({constructor:function(){this._super();var
PlayerConfig=brightcove.player.PlayerConfig,PlayerContext=brightcove.player.PlayerContext;this.playerConfig=PlayerConfig.getInstance();this.adPolicy=this.playerConfig.getItem(PlayerConfig.AD_POLICY);this.imaPlugin=null;this.playerContext=PlayerContext.getInstance();this.playerConfig.setItem(PlayerConfig.AD_MANAGER,this);this.firstLoad=true;this.controlsProxy=new brightcove.player.advertising.AdControlsProxy();brightcove.player.ui.media.ControlsProxy.setInstance(this.controlsProxy);},setupIMA:function(){var
AdStatusEvent=brightcove.player.advertising.events.AdStatusEvent,AdEvent=brightcove.player.events.AdEvent;this.imaPlugin=brightcove.player.advertising.ima.IMATranslation.getInstance();if(this.adPolicy&&(this.adPolicy.prerollAds||this.adPolicy.postrollAds)){this.imaPlugin.addEventListener(AdEvent.START,this.startLinearAdMode,this);this.imaPlugin.addEventListener(AdEvent.COMPLETE,this.endLinearAdMode,this);this.imaPlugin.addEventListener(AdEvent.RESUME_PLAYER,this.resumePlayer,this);}},handlePreroll:function(){this.insertionPoint=brightcove.player.advertising.InsertionTypes.PREROLL;this.handleAd();},handlePostroll:function(){this.insertionPoint=brightcove.player.advertising.InsertionTypes.POSTROLL;this.handleAd();},handlePause:function(){var AdPluginModule;if(brightcove.player.api&&brightcove.player.api.APIManager&&brightcove.player.api.APIManager.modules){AdPluginModule=brightcove.player.api.APIManager.modules["adPlugin"];}
if(AdPluginModule!=undefined&&AdPluginModule.listeners.pauseAd){AdPluginModule.dispatchAdPluginEvent(brightcove.player.events.AdPluginEvent.PAUSE_AD);}},handleResume:function(){var AdPluginModule;if(brightcove.player.api&&brightcove.player.api.APIManager&&brightcove.player.api.APIManager.modules){AdPluginModule=brightcove.player.api.APIManager.modules["adPlugin"];}
if(AdPluginModule!=undefined&&AdPluginModule.listeners.resumeAd){AdPluginModule.dispatchAdPluginEvent(brightcove.player.events.AdPluginEvent.RESUME_AD);}
this.playerContext.setAdPaused(false);},handleAd:function(){var
Tracer=brightcove.player.utils.Tracer,isPrerollPoint=this.insertionPoint==brightcove.player.advertising.InsertionTypes.PREROLL,isPostrollPoint=this.insertionPoint==brightcove.player.advertising.InsertionTypes.POSTROLL,prerollAdsOn=this.adPolicy!=null&&this.adPolicy.prerollAds,postrollAdsOn=this.adPolicy!=null&&this.adPolicy.postrollAds,errMessage=null,contentManager=brightcove.player.content.ContentManager.getInstance(),AdPluginModule,AdPluginEvent=brightcove.player.events.AdPluginEvent;if(this.playerContext.adPlaying&&!isPrerollPoint){Tracer.debug(this,"An ad is already playing, so skipping handling a "+this.insertionPoint+" ad",Tracer.TYPE_AD);return;}
if(brightcove.player.api&&brightcove.player.api.APIManager&&brightcove.player.api.APIManager.modules){AdPluginModule=brightcove.player.api.APIManager.modules["adPlugin"];}
if(isPrerollPoint){if(AdPluginModule!=undefined&&AdPluginModule.listeners.readyForPreroll){this.loadVideoForLaterPlayback();this.imaPlugin=null;AdPluginModule.dispatchAdPluginEvent(AdPluginEvent.READY_FOR_PREROLL);}
else if(this.imaPlugin!=null){if(!prerollAdsOn){errMessage="Not requesting ads since prerolls are disabled";}
else{this.loadVideoForLaterPlayback();this.imaPlugin.handleIMAPreroll();}}
else{errMessage="No ad plugins were found listening for a pre-roll, so skipping it.";}}
else if(isPostrollPoint){if(AdPluginModule!=undefined&&AdPluginModule.listeners.readyForPostroll){this.imaPlugin=null;AdPluginModule.dispatchAdPluginEvent(AdPluginEvent.READY_FOR_POSTROLL);}
else if(this.imaPlugin!=null){if(!postrollAdsOn){errMessage="Not requesting ads since postrolls are disabled";}
else{this.imaPlugin.handleIMAPostroll();}}
else{errMessage="No ad plugins were found listening for a post-roll, so skipping it.";}}
else{errMessage="At an unknown insertion point.";}
if(errMessage){Tracer.debug(this,errMessage,Tracer.TYPE_AD);this.resumePlayer();}},loadVideoForLaterPlayback:function(){if(!this.firstLoad){return;}
var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),player=playerConfig.getItem(PlayerConfig.PLAYER),video=player.videoPlayer.videoDisplay.video;this.firstLoad=false;if(video.isPaused()){video.loadForLaterPlayback();video.pause();}else{video.play();}},startLinearAdMode:function(){if(!this.insertionPoint){if(this.controlsProxy.afterPostrollPoint){this.insertionPoint=brightcove.player.advertising.InsertionTypes.POSTROLL;}
else if(this.controlsProxy.beforePrerollPoint){this.insertionPoint=brightcove.player.advertising.InsertionTypes.PREROLL;}
else{this.insertionPoint=brightcove.player.advertising.InsertionTypes.MIDROLL;}}
var AdEvent=brightcove.player.events.AdEvent;this.onAdStart(new AdEvent(AdEvent.START));},onAdStart:function(pAdEvent){this.playerContext.setAdPlaying(true);var Tracer=brightcove.player.utils.Tracer;Tracer.debug(this,"The "+this.insertionPoint+" ad has started playback",Tracer.TYPE_AD);},endLinearAdMode:function(){if(!this.playerContext.adPlaying){var Tracer=brightcove.player.utils.Tracer;Tracer.debug(this,"endLinearAdMode was called when the player was not in ad mode.",Tracer.TYPE_AD);this.resumePlayer();}else{this.onAdComplete();}},onAdComplete:function(pAdEvent){var Tracer=brightcove.player.utils.Tracer,AdEvent=brightcove.player.events.AdEvent,player=this.playerConfig.getItem(brightcove.player.PlayerConfig.PLAYER);Tracer.debug(this,"The "+this.insertionPoint+" ad has completed",Tracer.TYPE_AD);this.fixAfterPostrollPoint();this.insertionPoint=null;this.playerContext.setAdPlaying(false);},fixAfterPostrollPoint:function(){this.controlsProxy.afterPostrollPoint=this.insertionPoint==brightcove.player.advertising.InsertionTypes.POSTROLL;},resumePlayer:function(pAdEvent){var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),player=playerConfig.getItem(PlayerConfig.PLAYER),videoPlayer=player.videoPlayer,videoDisplay=videoPlayer.videoDisplay;this.fixAfterPostrollPoint();var lastInsertionPoint=this.insertionPoint;this.insertionPoint=null;this.playerContext.setAdPlaying(false);var afterAdFunc=this.controlsProxy.afterAdFunc;if(afterAdFunc){this.controlsProxy.afterAdFunc=null;afterAdFunc();}
else if(lastInsertionPoint==brightcove.player.advertising.InsertionTypes.POSTROLL){videoDisplay.resetForPlay();this.controlsProxy.resetAdState();}
else{this.controlsProxy.respondToPlay();}},pausePlayer:function(pAdEvent){var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),player=playerConfig.getItem(PlayerConfig.PLAYER),videoPlayer=player.videoPlayer,videoDisplay=videoPlayer.videoDisplay;this.playerContext.setAdPaused(true);var AdEvent=brightcove.player.events.AdEvent;videoDisplay.onAdStop(new AdEvent(AdEvent.STOP,0,0));}});brightcove.player.advertising.AdManager.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.advertising.AdManager();}
return this.instance;};brightcove.player.advertising.AdPolicy=brightcove.player.core.Class.extend({constructor:function(pViewerExperienceDTO){this.adServerURL=pViewerExperienceDTO.adServerURL;this.adTranslationSWF=pViewerExperienceDTO.adTranslationSWF;this.adRulesSWF=pViewerExperienceDTO.adPolicySWF;var adPolicy=pViewerExperienceDTO.adPolicy;this.populateFromDTO(adPolicy);},populateFromDTO:function(pAdPolicy){this.playAdOnLoad=pAdPolicy.playAdOnLoad;this.prerollAds=pAdPolicy.prerollAds;this.midrollAds=pAdPolicy.midrollAds;this.postrollAds=pAdPolicy.postrollAds;this.playerAdKeys=pAdPolicy.playerAdKeys||"";this.onLoadAdKeys=pAdPolicy.onLoadAdKeys||"";this.prerollAdKeys=pAdPolicy.prerollAdKeys||"";this.midrollAdKeys=pAdPolicy.midrollAdKeys||"";this.postrollAdKeys=pAdPolicy.postrollAdKeys||"";this.adPlayCap=pAdPolicy.adPlayCap;this.titleBasedAdInterval=pAdPolicy.titleBasedAdInterval;this.titleAdPlayInterval=pAdPolicy.titleAdPlayInterval;this.timeBasedAdInterval=pAdPolicy.timeBasedAdInterval;this.timeAdPlayInterval=pAdPolicy.timeAdPlayInterval;this.firstAdPlay=pAdPolicy.firstAdPlay;if(this.firstAdPlay<1||isNaN(this.firstAdPlay)){this.firstAdPlay=1;}},setAdPolicy:function(pAdPolicy){var
key,err,invalidProps="",Tracer=brightcove.player.utils.Tracer;if(!pAdPolicy){Tracer.warn("Cannot use an undefined object to set ad policy properties.");return;}
for(key in pAdPolicy){if(this.validSetAdPolicyProperty(key)){try{this[key]=pAdPolicy[key];}
catch(err){Tracer.warn(this,"The ad policy "+key+" could not be set: "+err,Tracer.TYPE_AD);}}else{invalidProps+=key+" ";}
if(key.indexOf("onload")!=-1){Tracer.warn(this,"ad policy has set "+key+". onload ad policy values are not used in the HTML player.",Tracer.TYPE_AD);}}
if(invalidProps!=""){Tracer.warn(this,"Not setting the following unsettable or invalid ad policy properties: "+invalidProps,Tracer.TYPE_AD);}},validSetAdPolicyProperty:function(key){return key=="playerAdKeys"||key=="onLoadAdKeys"||key=="prerollAdKeys"||key=="midrollAdKeys"||key=="postrollAdKeys"||key=="playAdOnLoad"||key=="prerollAds"||key=="midrollAds"||key=="postrollAds"||key=="adPlayCap"||key=="adServerURL";}});brightcove.player.advertising.InsertionTypes={};brightcove.player.advertising.InsertionTypes.ON_LOAD="onload";brightcove.player.advertising.InsertionTypes.PREROLL="Pre-roll";brightcove.player.advertising.InsertionTypes.MIDROLL="Mid-roll";brightcove.player.advertising.InsertionTypes.POSTROLL="Post-roll";brightcove.player.advertising.events.AdStatusEvent=brightcove.player.events.Event.extend({});brightcove.player.advertising.events.AdStatusEvent.FEATURE_LOAD="featureLoad";brightcove.player.advertising.events.AdStatusEvent.FEATURE_LOAD_ERROR="featureLoadError";brightcove.player.advertising.ima.IMARequest=brightcove.player.core.Class.extend({constructor:function(pAdContext){this.adContext=pAdContext;this.IMARequest=brightcove.player.advertising.ima.IMARequest;},getAdTagURL:function(pAppendOrd){var
requestURL="",adServerURL=this.adContext.getAdServerURL();this.isIMA=(adServerURL?(adServerURL.indexOf(this.IMARequest.IMA_AD_SERVER_URL)!=-1):false);this.keyDelimiter=(this.isIMA?this.IMARequest.IMA_DELIMITER:this.IMARequest.DFP_DELIMITER);requestURL=this.constructURL();if((pAppendOrd||pAppendOrd==undefined)&&!this.isIMA){var milliseconds=new Date().getTime();requestURL+=";ord="+milliseconds;requestURL+="?";}
return requestURL;},constructURL:function(){var URL="";if(this.isIMA){URL=this.createIMABaseURL();}else{URL=this.adContext.getAdPolicy().adServerURL;URL+=this.getPlaylistTargeting(URL);URL+=this.getPlayerParams();URL+=this.getRequestParams();}
return URL;},addPlaylistTargetingParams:function(pBaseURL){var
newURL=pBaseURL,iuSearch=/&iu=[^&]*&/,iuArray,playlistTargetingParam=this.getPlaylistTargeting(pBaseURL),iuResult="",iuComponents,iuDelimiter="/",Tracer=brightcove.player.utils.Tracer,traceMessage="Ad Unit \'zone\' updated from: ";if(playlistTargetingParam){iuArray=newURL.match(iuSearch);if(iuArray[0].search(iuDelimiter)==-1){iuDelimiter="%2F";}
if(iuArray&&iuArray.length>0){iuComponents=iuArray[0].split(iuDelimiter);if(iuComponents.length>=this.MAX_IU_PARAM_LENGTH){return newURL;}
traceMessage+=iuArray[0]+" to: ";iuResult=iuArray[0].substring(0,iuArray[0].length-1);if(iuResult.substr(iuResult.length-iuDelimiter.length,iuResult.length-1)!=iuDelimiter){iuResult+=iuDelimiter;}
iuResult+=playlistTargetingParam+"&";traceMessage+=iuResult;newURL=newURL.replace(iuSearch,iuResult);}
Tracer.debug(this,traceMessage,Tracer.TYPE_AD);}
return newURL;},getPlaylistTargeting:function(baseURL){var
playlistParam="",baseURLHasForwardSlash=false,playlistTargeting=this.adContext.playlistTargeting;if(baseURL&&baseURL.substr(baseURL.length-1)=="/"){baseURLHasForwardSlash=true;}
if(playlistTargeting!=""&&playlistTargeting!=null){if(this.isIMA){playlistParam+=playlistTargeting;}else{playlistParam+=(baseURLHasForwardSlash?"":"/")+playlistTargeting;}}
return playlistParam;},getPlayerParams:function(){var
baseURLParams="",instanceID=(this.adContext.getPlayerID()?this.adContext.getPlayerID():NaN),playerAdKeys=this.adContext.getPlayerKeyValues(),additionalAdParams=this.adContext.getAdditionalAdTargetingParams();baseURLParams+=this.keyDelimiter+"plID="+instanceID;if(playerAdKeys&&playerAdKeys.length>0){baseURLParams=this.addWithDelimiter(baseURLParams,playerAdKeys);}
if(additionalAdParams&&additionalAdParams.length>0){baseURLParams+=this.keyDelimiter+additionalAdParams;}
return baseURLParams;},getRequestParams:function(){var
mAdContext=this.adContext,pRequestParams="";if(mAdContext.getPlaylistID()>0){pRequestParams+=this.keyDelimiter+"lnID="+mAdContext.getPlaylistID();}
if(mAdContext.getVideoID()>0){pRequestParams+=this.keyDelimiter+"ttID="+mAdContext.getVideoID();}
if(mAdContext.getVideoAdKeys()&&mAdContext.getVideoAdKeys().length>0){pRequestParams=this.addWithDelimiter(pRequestParams,mAdContext.getVideoAdKeys());}
if(mAdContext.getCuePoint()!=null){if(mAdContext.getInsertionKeyValues().length>0){pRequestParams=this.addWithDelimiter(pRequestParams,mAdContext.getInsertionKeyValues());}
var InsertionTypes=brightcove.player.advertising.InsertionTypes;switch(mAdContext.getCuePoint().name){case InsertionTypes.PREROLL:pRequestParams+=this.keyDelimiter+"cue=pre";break;case InsertionTypes.POSTROLL:pRequestParams+=this.keyDelimiter+"cue=post";break;default:pRequestParams+=this.keyDelimiter+"cue=mid";break;}
var metadata=mAdContext.getCuePoint().metadata;if(metadata&&metadata.length>0){pRequestParams=this.addWithDelimiter(pRequestParams,metadata);}}
return pRequestParams;},createIMABaseURL:function(){var
adServerURL=this.adContext.getAdServerURL(),custParamIndex,mBaseURL="",mAdServerString="",tempCustomParamsString="",mCustomParamsString="",mEndOfURLString="";custParamIndex=adServerURL.indexOf(this.IMARequest.IMA_CUSTOM_PARAMS_TAG);if(custParamIndex!=-1){mAdServerString=adServerURL.substring(0,custParamIndex);mAdServerString=this.addPlaylistTargetingParams(mAdServerString);mBaseURL=mAdServerString;tempCustomParamsString=adServerURL.substring(custParamIndex);if(tempCustomParamsString.indexOf("&")!=-1){mCustomParamsString=tempCustomParamsString.substring(0,tempCustomParamsString.indexOf("&"));mEndOfURLString=tempCustomParamsString.substring(tempCustomParamsString.indexOf("&"));}else{mCustomParamsString=tempCustomParamsString;}}else{mAdServerString=this.addPlaylistTargetingParams(adServerURL);mBaseURL=mAdServerString;mCustomParamsString="&"+this.IMARequest.IMA_CUSTOM_PARAMS_TAG;}
mCustomParamsString+=this.convertBCKeyValues(this.getPlayerParams());mCustomParamsString+=this.convertBCKeyValues(this.getRequestParams());mCustomParamsString=mCustomParamsString.replace(/=%26/,"=");mBaseURL+=mCustomParamsString;mBaseURL+=mEndOfURLString;return mBaseURL;},addWithDelimiter:function(pURL,pKeyValues){if(pKeyValues==null){return pURL;}
if(pURL.charAt(pURL.length-1)==this.keyDelimiter){pURL=pURL.substring(0,pURL.length-1);}
if(pKeyValues.charAt(0)==this.keyDelimiter){pKeyValues=pKeyValues.substring(1);}
return pURL+this.keyDelimiter+pKeyValues;},convertBCKeyValues:function(pURL){var imaURL=pURL.replace(/;/g,"%26");imaURL=imaURL.replace(/&/g,"%26");imaURL=imaURL.replace(/=/g,"%3D");return imaURL;}});brightcove.player.advertising.ima.IMARequest.DFP_DELIMITER=";";brightcove.player.advertising.ima.IMARequest.IMA_DELIMITER="&";brightcove.player.advertising.ima.IMARequest.IMA_AD_SERVER_URL="//pubads.g.doubleclick.net/gampad/";brightcove.player.advertising.ima.IMARequest.IMA_CUSTOM_PARAMS_TAG="cust_params=";brightcove.player.advertising.ima.IMARequest.MAX_IU_PARAM_LENGTH=6;brightcove.player.advertising.ima.IMATranslation=brightcove.player.core.EventDispatcher.extend({constructor:function(adSourceMode){this._super();this.imaLoaded=false;this.imaAdsManager;this.adRequest;this.PREROLL_FETCH="preroll_fetch";this.POSTROLL_FETCH="postroll_fetch";this.adsLoaded=false;this.adSourceMode=adSourceMode;},load:function(){var imaPlugin=this;var onIMALoaded=function(){imaPlugin.imaLoaded=true;var AdStatusEvent=brightcove.player.advertising.events.AdStatusEvent;imaPlugin.dispatchEvent(new AdStatusEvent(AdStatusEvent.FEATURE_LOAD));};var onIMAErrorLoading=function(e){var AdStatusEvent=brightcove.player.advertising.events.AdStatusEvent;imaPlugin.onError("Error loading IMA: "+e.originalEvent.getError());imaPlugin.dispatchEvent(new AdStatusEvent(AdStatusEvent.FEATURE_LOAD_ERROR));};var onIMALoadTimeout=function(){if(!imaPlugin.imaLoaded){var e={};e.originalEvent={};e.originalEvent.getError=function(){return"Timed out loading IMA";};onIMAErrorLoading(e);}};var imaVersion=1.7;var playerConfig=brightcove.player.PlayerConfig.getInstance();var embedParams=playerConfig.getItem(brightcove.player.PlayerConfig.EMBED_PARAMS);if(embedParams.secureHTMLConnections&&embedParams.secureHTMLConnections==="true"){imaVersion=1.8;}
google.load("ima",imaVersion,{"callback":$.proxy(onIMALoaded,this)});setTimeout(onIMALoadTimeout,5000);},onAdLoadError:function(pIMAAdEvent){this.adRequest=null;var errorMesg=this.getErrorEventMessage(pIMAAdEvent);this.onError("Error playing back ad: "+errorMesg);var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.RESUME_PLAYER));},getErrorEventMessage:function(pIMAAdEvent){var errorObj=pIMAAdEvent.originalEvent.getError();var errorMesg=errorObj?errorObj.getMessage():"unknown error";var innerError=errorObj.getInnerError();if(innerError){errorMesg+=" (inner error: "+innerError+")";}
return errorMesg;},onAdError:function(pIMAAdEvent){var errorMesg=this.getErrorEventMessage(pIMAAdEvent);this.onError("Error playing back ad: "+errorMesg);var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.COMPLETE));},onIMALoaded:function(event){var AdStatusEvent=brightcove.player.advertising.events.AdStatusEvent;this.removeEventListener(AdStatusEvent.FEATURE_LOAD,this.onIMALoaded,this);this.imaLoaded=true;},handleIMAPreroll:function(){this.adRequest=this.PREROLL_FETCH;this.fetchAds();},handleIMAPostroll:function(){this.adRequest=this.POSTROLL_FETCH;this.fetchAds();},onError:function(pErrMessage){var Tracer=brightcove.player.utils.Tracer;Tracer.error(this,pErrMessage,Tracer.TYPE_AD);},onPauseRequested:function(){var AdModule=brightcove.player.api.modules.AdModule;var AdApiEvent=brightcove.api.events.AdEvent;if(AdModule!=undefined){AdModule.prototype.dispatchAdEvent(new AdApiEvent(AdApiEvent.START));}},onContentResumeRequested:function(){var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.COMPLETE));var AdModule=brightcove.player.api.modules.AdModule;var AdApiEvent=brightcove.api.events.AdEvent;if(AdModule!=undefined){AdModule.prototype.dispatchAdEvent(new AdApiEvent(AdApiEvent.COMPLETE));}},fetchAds:function(){var
PlayerConfig=brightcove.player.PlayerConfig,playerConfig=PlayerConfig.getInstance(),contentManager=brightcove.player.content.ContentManager.getInstance(),player=playerConfig.getItem(PlayerConfig.PLAYER),adPolicy=playerConfig.getItem(PlayerConfig.AD_POLICY),videoPlayer=player.videoPlayer,InsertionTypes=brightcove.player.advertising.InsertionTypes,Tracer=brightcove.player.utils.Tracer;if(!this.imaLoaded){this.onError("IMA not loaded, no ad will be requested");return;}
var economics=videoPlayer.video.economics;if(economics!=1){var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.RESUME_PLAYER));Tracer.debug(this,"Ads are turned off for this video.",Tracer.TYPE_AD);return;}
var cuePoint=this.fetchCuePointData(videoPlayer.video.cuePoints);var adContext=new brightcove.player.advertising.AdContext(videoPlayer.video,cuePoint);var url;if(this.adSourceMode==brightcove.player.advertising.ima.IMATranslation.IMA_MODE){var imaRequest=new brightcove.player.advertising.ima.IMARequest(adContext);url=imaRequest.getAdTagURL();}
else{url=this.createVastUrl(adContext);}
Tracer.debug(this,"Requesting ads from ad tag URL : "+url,Tracer.TYPE_AD);this.unloadIMAAdsManager();this.adsLoader=new google.ima.AdsLoader();$(this.adsLoader).bind(google.ima.AdsLoadedEvent.Type.ADS_LOADED,$.proxy(this.onAdsLoaded,this));$(this.adsLoader).bind(google.ima.AdErrorEvent.Type.AD_ERROR,$.proxy(this.onAdLoadError,this));var adRequest={adTagUrl:url,adType:"video"};try{this.adsLoader.requestAds(adRequest);}catch(e){this.onAdLoadError('Error while requesting ads:'+e.message);}},fetchCuePointData:function(pCuePoints){var cuePoint;if(pCuePoints){if(this.adRequest==this.PREROLL_FETCH){cuePoint=pCuePoints[0];}else if(this.adRequest==this.POSTROLL_FETCH){cuePoint=pCuePoints[pCuePoints.length-1];}}
if(!cuePoint||cuePoint.type==1){cuePoint={};cuePoint.time=0;cuePoint.type=1;if(this.adRequest==this.PREROLL_FETCH){cuePoint.name=brightcove.player.advertising.InsertionTypes.PREROLL;}else if(this.adRequest==this.POSTROLL_FETCH){cuePoint.name=brightcove.player.advertising.InsertionTypes.POSTROLL;}}
return cuePoint;},createVastUrl:function(pAdContext){var url=pAdContext.getAdServerURL();var urlLower=url.toLowerCase();var urlArray=[url,urlLower];if(url.indexOf("{")!=-1){urlArray=this.replaceMacro(urlArray,"{playerkeyvalues}",pAdContext.getPlayerKeyValues());urlArray=this.replaceMacro(urlArray,"{videokeyvalues}",pAdContext.getVideoAdKeys());urlArray=this.replaceMacro(urlArray,"{insertionkeyvalues}",pAdContext.getInsertionKeyValues());urlArray=this.replaceMacro(urlArray,"{embedkeyvalues}",pAdContext.getAdditionalAdTargetingParams());var cuePoint=pAdContext.getCuePoint();var cuePointMeta=cuePoint?cuePoint.metadata:"";urlArray=this.replaceMacro(urlArray,"{cuepointkeyvalues}",cuePointMeta?cuePointMeta:"");urlArray=this.replaceMacro(urlArray,"{playerid}",""+pAdContext.getPlayerID());urlArray=this.replaceMacro(urlArray,"{playlistid}",""+pAdContext.getPlaylistID());urlArray=this.replaceMacro(urlArray,"{publisherid}",""+pAdContext.getPublisherID());urlArray=this.replaceMacro(urlArray,"{videoid}",""+pAdContext.getVideoID());urlArray=this.replaceMacro(urlArray,"{cuepointtype}",this.getCuePointType(pAdContext));urlArray=this.replaceMacro(urlArray,"{random}",new Date().getTime());}
return urlArray[0];},replaceMacro:function(pUrlArray,pMacro,pValue){var ind=pUrlArray[1].indexOf(pMacro);if(ind==-1){return pUrlArray;}
pUrlArray[0]=pUrlArray[0].substr(0,ind)+pValue+pUrlArray[0].substr(ind+pMacro.length);pUrlArray[1]=pUrlArray[0].toLowerCase();return pUrlArray;},getCuePointType:function(pAdContext){var cueType="mid";var cueName=pAdContext.getCuePoint().name;if(cueName=="Pre-roll"){cueType="pre";}
else if(cueName=="Post-roll"){cueType="post";}
return cueType;},unloadIMAAdsManager:function(){this.adsLoaded=false;if(this.imaAdsManager){$(this.imaAdsManager).unbind(google.ima.AdErrorEvent.Type.AD_ERROR);$(this.imaAdsManager).unbind(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED);$(this.imaAdsManager).unbind(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED);$(this.imaAdsManager).unbind(google.ima.AdEvent.Type.COMPLETE);this.imaAdsManager.unload();}},onAdsLoaded:function(adsLoadedEvent){var
Tracer=brightcove.player.utils.Tracer,playbackError;Tracer.debug(this,"Loaded ad for playback",Tracer.TYPE_AD);var newImaAdsManager=adsLoadedEvent.originalEvent.getAdsManager();if(newImaAdsManager!==this.imaAdsManager){this.unloadIMAAdsManager();this.imaAdsManager=newImaAdsManager;}
this.adsLoaded=true;if(this.adRequest==this.PREROLL_FETCH){playbackError=this.playAd(brightcove.player.advertising.InsertionTypes.PREROLL);}
else if(this.adRequest==this.POSTROLL_FETCH){playbackError=this.playAd(brightcove.player.advertising.InsertionTypes.POSTROLL);}
this.adRequest=null;if(playbackError){this.onError(playbackError);var AdEvent=brightcove.player.events.AdEvent;this.dispatchEvent(new AdEvent(AdEvent.RESUME_PLAYER));}},playAd:function(insertionPoint){var
Tracer=brightcove.player.utils.Tracer,AdEvent=brightcove.player.events.AdEvent;if(!this.imaLoaded){return"IMA not loaded, so not playing "+insertionPoint+" ad";}else if(!this.adsLoaded){return"No ads are loaded at the time the ad is needed, so skipping ad playback";}
Tracer.debug(this,"Playing "+insertionPoint+" ad",Tracer.TYPE_AD);$(this.imaAdsManager).bind(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,$.proxy(this.onPauseRequested,this));$(this.imaAdsManager).bind(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,$.proxy(this.onContentResumeRequested,this));$(this.imaAdsManager).bind(google.ima.AdErrorEvent.Type.AD_ERROR,$.proxy(this.onAdError,this));this.adsLoaded=false;this.dispatchEvent(new AdEvent(AdEvent.START));var PlayerConfig=brightcove.player.PlayerConfig;var playerConfig=PlayerConfig.getInstance();var videoPlayer=playerConfig.getItem(PlayerConfig.VIDEO_PLAYER);var videoElement=videoPlayer.getVideoTag();try{this.imaAdsManager.setClickTrackingElement(videoElement);var playSettings=new Object();playSettings.restoreContentState=false;this.imaAdsManager.play(videoElement,playSettings);}catch(adError){return"Ad could not be played: "+adError;}
return null;}});brightcove.player.advertising.ima.IMATranslation.createInstance=function(imaMode){if(this.instance!=null){this.instance.onError("A new internal ad plugin was attempted to be created while one already existed.");}
else{this.instance=new brightcove.player.advertising.ima.IMATranslation(imaMode);}
return this.instance;};brightcove.player.advertising.ima.IMATranslation.getInstance=function(){if(this.instance==null){this.instance=new brightcove.player.advertising.ima.IMATranslation(brightcove.player.advertising.ima.IMATranslation.IMA_MODE);}
return this.instance;};brightcove.player.advertising.ima.IMATranslation.IMA_MODE="IMA";brightcove.player.advertising.ima.IMATranslation.VAST_MODE="VAST";brightcove.player.advertising.AdvertisingModule=brightcove.player.core.Class.extend({constructor:function(pViewerExperienceDTO){var PlayerContext=brightcove.player.PlayerContext;this.playerContext=PlayerContext.getInstance();if(this.playerContext.playerInitialized){this.onAdModuleInitialize();}
else{var PropertyChangeEvent=brightcove.player.events.PropertyChangeEvent;this.playerContext.addEventListener(PropertyChangeEvent.CHANGE,this.onPlayerContextPropertyChange,this);}},onPlayerContextPropertyChange:function(pEvent){if(pEvent.property=="playerInitialized"){if(this.playerContext.playerInitialized){this.onAdModuleInitialize();}}},onAdModuleInitialize:function(pEvent){var
PlayerConfig=brightcove.player.PlayerConfig,Tracer=brightcove.player.utils.Tracer,playerConfig=PlayerConfig.getInstance(),pViewerDTO=playerConfig.getItem(PlayerConfig.TEMPLATE_DATA),imaPlugin,pluginManager,ima3Url;if(pViewerDTO.adPolicy==null){Tracer.error(this,"The ad policy is null when advertising is enabled",Tracer.TYPE_AD);return;}
Tracer.debug(this,"Ads are enabled in this player",Tracer.TYPE_AD);this.adPolicy=new brightcove.player.advertising.AdPolicy(pViewerDTO);var embedParams=playerConfig.getItem(PlayerConfig.EMBED_PARAMS);if(embedParams.adServerURL!=null){this.adPolicy.adServerURL=embedParams.adServerURL;}
if(embedParams.additionalAdTargetingParams!=null){this.adPolicy.additionalAdTargetingParams=embedParams.additionalAdTargetingParams;}
playerConfig.setItem(PlayerConfig.AD_POLICY,this.adPolicy);this.adsLoader={};var AdManager=brightcove.player.advertising.AdManager;AdManager.getInstance();var swf=pViewerDTO.adTranslationSWF;if(swf){swf=swf.split("/");swf=swf[swf.length-1];swf=swf.toLowerCase();}
var dfp,dfp_deprecated,vast,vast_deprecated,ima3,ima2_deprecated;if(pViewerDTO.adPolicySWF==null){if(swf==null||swf=="dfp_xml_updated"){dfp=true;}
else if(swf=="dfp_xml_deprecated"){dfp_deprecated=true;}
else if(swf=="vast"||swf=="vast_updated"){vast=true;}
else if(swf=="vast_deprecated"){vast_deprecated=true;}
else if(swf=="ima3.swf"||swf=="DoubleclickInstream.swf"){ima3=true;}
else if(swf=="ima2_deprecated"){ima2_deprecated=true;}}
if(dfp_deprecated||ima2_deprecated){imaPlugin=brightcove.player.advertising.ima.IMATranslation.createInstance(brightcove.player.advertising.ima.IMATranslation.IMA_MODE);}
else if(vast_deprecated){imaPlugin=brightcove.player.advertising.ima.IMATranslation.createInstance(brightcove.player.advertising.ima.IMATranslation.VAST_MODE);}
else if(vast){ima3Url=brightcove.player.PlayerConfig.getInstance().getItem(PlayerConfig.CDN);ima3Url+="js/adplugins/ima3.js?blocking=true";pluginManager=brightcove.player.api.PluginManager.getInstance();pluginManager.addPlugin(ima3Url);}
else if(dfp||ima3){ima3Url=brightcove.player.PlayerConfig.getInstance().getItem(PlayerConfig.CDN);ima3Url+="js/adplugins/ima3.js?blocking=true";pluginManager=brightcove.player.api.PluginManager.getInstance();pluginManager.addPlugin(ima3Url);}
if(imaPlugin){var AdStatusEvent=brightcove.player.advertising.events.AdStatusEvent;imaPlugin.addEventListener(AdStatusEvent.FEATURE_LOAD,this.onTranslationLoaded,this);imaPlugin.addEventListener(AdStatusEvent.FEATURE_LOAD_ERROR,this.onTranslationLoadError,this);imaPlugin.load();}
else{this.adManager=brightcove.player.advertising.AdManager.getInstance();}},onTranslationLoaded:function(pEvent){this.removeEventListeners();this.adManager=brightcove.player.advertising.AdManager.getInstance();this.adManager.setupIMA();},onTranslationLoadError:function(pEvent){this.removeEventListeners();},removeEventListeners:function(){var imaPlugin=brightcove.player.advertising.ima.IMATranslation.getInstance();var AdStatusEvent=brightcove.player.advertising.events.AdStatusEvent;imaPlugin.removeEventListener(AdStatusEvent.FEATURE_LOAD,this.onTranslationLoaded,this);imaPlugin.removeEventListener(AdStatusEvent.FEATURE_LOAD_ERROR,this.onTranslationLoadError,this);}});new brightcove.player.advertising.AdvertisingModule();